{
  "resourceType" : "PlanDefinition",
  "id" : "HIVB9DT",
  "meta" : {
    "profile" : ["http://hl7.org/fhir/uv/cpg/StructureDefinition/cpg-recommendationdefinition",
    "http://hl7.org/fhir/uv/crmi/StructureDefinition/crmi-shareableplandefinition",
    "http://hl7.org/fhir/uv/crmi/StructureDefinition/crmi-publishableplandefinition"]
  },
  "text" : {
    "status" : "extensions",
    "div" : "<div xmlns=\"http://www.w3.org/1999/xhtml\">\n<div>\n    <table class=\"grid dict\">\n        \n        <tr>\n            <th scope=\"row\"><b>Id: </b></th>\n            <td style=\"padding-left: 4px;\">HIVB9DT</td>\n        </tr>\n        \n\n        \n        <tr>\n            <th scope=\"row\"><b>Url: </b></th>\n            <td style=\"padding-left: 4px;\"><a href=\"PlanDefinition-HIVB9DT.html\">HIV.B9.DT Determine retest recommendation</a></td>\n        </tr>\n        \n\n        \n        <tr>\n            <th scope=\"row\"><b>Version: </b></th>\n            <td style=\"padding-left: 4px;\">1.0.0</td>\n        </tr>\n        \n\n        \n\n        \n        <tr>\n            <th scope=\"row\"><b>Title: </b></th>\n            <td style=\"padding-left: 4px;\">HIV.B9.DT Determine retest recommendation</td>\n        </tr>\n        \n\n        \n\n        \n        <tr>\n            <th scope=\"row\"><b>Status: </b></th>\n            <td style=\"padding-left: 4px;\">draft</td>\n        </tr>\n        \n\n        \n        <tr>\n            <th scope=\"row\"><b>Experimental: </b></th>\n            <td style=\"padding-left: 4px;\">true</td>\n        </tr>\n        \n\n        \n        <tr>\n            <th scope=\"row\"><b>Type: </b></th>\n            <td style=\"padding-left: 4px;\">\n                \n                    \n                        \n                        <p style=\"margin-bottom: 5px;\">\n                            <b>system: </b> <span><a href=\"http://terminology.hl7.org/6.0.2/CodeSystem-plan-definition-type.html\">http://terminology.hl7.org/CodeSystem/plan-definition-type</a></span>\n                        </p>\n                        \n                        \n                        <p style=\"margin-bottom: 5px;\">\n                            <b>code: </b> <span>eca-rule</span>\n                        </p>\n                        \n                        \n                    \n                \n                \n            </td>\n        </tr>\n        \n\n        \n\n        \n        <tr>\n            <th scope=\"row\"><b>Date: </b></th>\n            <td style=\"padding-left: 4px;\">2025-07-08 23:21:58+0200</td>\n        </tr>\n        \n\n        \n        <tr>\n            <th scope=\"row\"><b>Publisher: </b></th>\n            <td style=\"padding-left: 4px;\">WHO</td>\n        </tr>\n        \n\n        \n        <tr>\n            <th scope=\"row\"><b>Description: </b></th>\n            <td style=\"padding-left: 4px;\"><div><p>HIV restesting recommendations</p>\n</div></td>\n        </tr>\n        \n\n        \n\n        \n\n        \n\n        \n\n        \n\n        \n\n        \n\n        \n\n        \n\n        \n\n        \n        <tr>\n            <th scope=\"row\"><b>Related Artifacts: </b></th>\n            <td style=\"padding-left: 4px;\">\n                \n                \n                <p><b>References</b></p>\n                <ul>\n                    \n                    <li><div><p>Consolidated Guidelines on HIV Testing Services (2019)</p>\n</div><br/><a href=\"null\"/></li>\n                    \n                </ul>\n                \n                \n                \n                \n                \n                \n            </td>\n        </tr>\n        \n\n        \n        <tr>\n            <th scope=\"row\"><b>Libraries: </b></th>\n            <td style=\"padding-left: 4px;\">\n                <table class=\"grid-dict\">\n                    \n                    <tr>\n                        <td><a href=\"Library-HIVB9DTLogic.html\">HIV.B9.DT Logic</a></td>\n                    </tr>\n                    \n                </table>\n            </td>\n        </tr>\n        \n\n        \n        <tr>\n            <th scope=\"row\"><b>Actions: </b></th>\n            <td style=\"padding-left: 4px;\">\n                <table class=\"grid-dict\">\n                    \n                    <tr>\n                        <td>\n                            \n                            Determine retest recommendation\n                            \n                            <br/>\n                            \n                            \n                            \n                            <b>Then:</b>\n                            <table class=\"grid-dict\">\n                                \n                                <tr>\n                                    <td>\n                                        \n                                        Schedule an annual follow-up test\n                                        \n                                        <br/>\n                                        \n                                        \n                                        <b>If:</b>\n                                        \n                                        <i>Applicability:</i>\n                                        \n                                        <i>(Schedule an annual follow-up test)</i>\n                                        <br/>\n                                        \n                                        \n                                        \n                                        \n                                        <b>Then:</b> <i>Definition:</i> <a href=\"ActivityDefinition-HIVB9DTScheduleFollowUp.html\">HIV.B9.DT Schedule Follow-up Test</a><br/>\n                                        \n                                        <i>Dynamic Values:</i><br/>\n                                        \n                                        intent: <i>('plan' from &quot;http://hl7.org/fhir/request-intent&quot;)</i>\n                                        <br/>\n                                        \n                                        code.coding: <i>('171121004' from &quot;SNOMED-CT&quot; display 'HIV screening')</i>\n                                        <br/>\n                                        \n                                        occurrenceDateTime: <i>(Schedule Date)</i>\n                                        <br/>\n                                        \n                                        \n                                        \n                                        \n                                    </td>\n                                </tr>\n                                \n                                <tr>\n                                    <td>\n                                        \n                                        Schedule quarterly retesting for PrEP users\n                                        \n                                        <br/>\n                                        \n                                        \n                                        <b>If:</b>\n                                        \n                                        <i>Applicability:</i>\n                                        \n                                        <i>(Schedule quarterly retesting for PrEP users)</i>\n                                        <br/>\n                                        \n                                        \n                                        \n                                        \n                                        <b>Then:</b> <i>Definition:</i> <a href=\"ActivityDefinition-HIVB9DTScheduleFollowUp.html\">HIV.B9.DT Schedule Follow-up Test</a><br/>\n                                        \n                                        <i>Dynamic Values:</i><br/>\n                                        \n                                        intent: <i>('plan' from &quot;http://hl7.org/fhir/request-intent&quot;)</i>\n                                        <br/>\n                                        \n                                        code.coding: <i>('171121004' from &quot;SNOMED-CT&quot; display 'HIV screening')</i>\n                                        <br/>\n                                        \n                                        occurrenceDateTime: <i>(Schedule Date)</i>\n                                        <br/>\n                                        \n                                        \n                                        \n                                        \n                                    </td>\n                                </tr>\n                                \n                                <tr>\n                                    <td>\n                                        \n                                        Follow-up test recommended\n                                        \n                                        <br/>\n                                        \n                                        \n                                        <b>If:</b>\n                                        \n                                        <i>Applicability:</i>\n                                        \n                                        <i>(Follow-up test recommended)</i>\n                                        <br/>\n                                        \n                                        \n                                        \n                                        \n                                        <b>Then:</b> <i>Definition:</i> <a href=\"ActivityDefinition-HIVB9DTScheduleFollowUp.html\">HIV.B9.DT Schedule Follow-up Test</a><br/>\n                                        \n                                        <i>Dynamic Values:</i><br/>\n                                        \n                                        intent: <i>('proposal' from &quot;http://hl7.org/fhir/request-intent&quot;)</i>\n                                        <br/>\n                                        \n                                        code.coding: <i>('171121004' from &quot;SNOMED-CT&quot; display 'HIV screening')</i>\n                                        <br/>\n                                        \n                                        \n                                        \n                                        \n                                    </td>\n                                </tr>\n                                \n                                <tr>\n                                    <td>\n                                        \n                                        Schedule an HIV test, syphilis test, hepatitis B test as early as possible during this pregnancy\n                                        \n                                        <br/>\n                                        \n                                        \n                                        <b>If:</b>\n                                        \n                                        <i>Applicability:</i>\n                                        \n                                        <i>(Schedule an HIV test, syphilis test, hepatitis B test as early as possible during this pregnancy)</i>\n                                        <br/>\n                                        \n                                        \n                                        \n                                        <b>Then:</b> <i>Additional sub-actions not displayed</i>\n                                        \n                                    </td>\n                                </tr>\n                                \n                                <tr>\n                                    <td>\n                                        \n                                        Schedule a follow-up tests for pregnant persons\n                                        \n                                        <br/>\n                                        \n                                        \n                                        <b>If:</b>\n                                        \n                                        <i>Applicability:</i>\n                                        \n                                        <i>(Schedule a 'Follow-up test recommended date' at first ANC contact date)</i>\n                                        <br/>\n                                        \n                                        \n                                        \n                                        <b>Then:</b> <i>Additional sub-actions not displayed</i>\n                                        \n                                    </td>\n                                </tr>\n                                \n                                <tr>\n                                    <td>\n                                        \n                                        Send retest recommendation to provider\n                                        \n                                        <br/>\n                                        \n                                        \n                                        <b>If:</b>\n                                        \n                                        <i>Applicability:</i>\n                                        \n                                        <i>(Guidance)</i>\n                                        <br/>\n                                        \n                                        \n                                        \n                                        \n                                        <b>Then:</b> <i>Definition:</i> <a href=\"ActivityDefinition-HIVGuidanceCommunicationRequestActivity.html\">HIVGuidanceCommunicationRequestActivity</a><br/>\n                                        \n                                        <i>Dynamic Values:</i><br/>\n                                        \n                                        description: <i>(Guidance)</i>\n                                        <br/>\n                                        \n                                        \n                                        \n                                        \n                                    </td>\n                                </tr>\n                                \n                            </table>\n                            \n                        </td>\n                    </tr>\n                    \n                </table>\n            </td>\n        </tr>\n        \n    </table>\n</div>\n</div>"
  },
  "extension" : [{
    "url" : "http://hl7.org/fhir/StructureDefinition/cqf-knowledgeCapability",
    "valueCode" : "computable"
  }],
  "url" : "http://smart.who.int/hiv/PlanDefinition/HIVB9DT",
  "version" : "1.0.0",
  "name" : "HIVB9DT",
  "title" : "HIV.B9.DT Determine retest recommendation",
  "type" : {
    "coding" : [{
      "system" : "http://terminology.hl7.org/CodeSystem/plan-definition-type",
      "code" : "eca-rule"
    }]
  },
  "status" : "draft",
  "experimental" : true,
  "date" : "2025-07-08T23:21:58+02:00",
  "publisher" : "WHO",
  "contact" : [{
    "name" : "WHO",
    "telecom" : [{
      "system" : "url",
      "value" : "http://who.int"
    }]
  }],
  "description" : "HIV restesting recommendations",
  "relatedArtifact" : [{
    "type" : "citation",
    "citation" : "Consolidated Guidelines on HIV Testing Services (2019)"
  }],
  "library" : ["http://smart.who.int/hiv/Library/HIVB9DTLogic"],
  "action" : [{
    "textEquivalent" : "Determine retest recommendation",
    "action" : [{
      "textEquivalent" : "Schedule an annual follow-up test",
      "condition" : [{
        "kind" : "applicability",
        "expression" : {
          "language" : "text/cql-identifier",
          "expression" : "Schedule an annual follow-up test"
        }
      }],
      "type" : {
        "coding" : [{
          "code" : "create"
        }]
      },
      "definitionCanonical" : "http://smart.who.int/hiv/ActivityDefinition/HIVB9DTScheduleFollowUp",
      "dynamicValue" : [{
        "path" : "intent",
        "expression" : {
          "description" : "Intent = 'plan'",
          "language" : "text/cql",
          "expression" : "'plan' from \"http://hl7.org/fhir/request-intent\""
        }
      },
      {
        "path" : "code.coding",
        "expression" : {
          "description" : "HIV Screening",
          "language" : "text/cql",
          "expression" : "'171121004' from \"SNOMED-CT\" display 'HIV screening'"
        }
      },
      {
        "path" : "occurrenceDateTime",
        "expression" : {
          "description" : "At the recommended interval",
          "language" : "text/cql-identifier",
          "expression" : "Schedule Date"
        }
      }]
    },
    {
      "textEquivalent" : "Schedule quarterly retesting for PrEP users",
      "condition" : [{
        "kind" : "applicability",
        "expression" : {
          "language" : "text/cql-identifier",
          "expression" : "Schedule quarterly retesting for PrEP users"
        }
      }],
      "type" : {
        "coding" : [{
          "code" : "create"
        }]
      },
      "definitionCanonical" : "http://smart.who.int/hiv/ActivityDefinition/HIVB9DTScheduleFollowUp",
      "dynamicValue" : [{
        "path" : "intent",
        "expression" : {
          "description" : "Intent = 'plan'",
          "language" : "text/cql",
          "expression" : "'plan' from \"http://hl7.org/fhir/request-intent\""
        }
      },
      {
        "path" : "code.coding",
        "expression" : {
          "description" : "HIV Screening",
          "language" : "text/cql",
          "expression" : "'171121004' from \"SNOMED-CT\" display 'HIV screening'"
        }
      },
      {
        "path" : "occurrenceDateTime",
        "expression" : {
          "description" : "At the recommended interval",
          "language" : "text/cql-identifier",
          "expression" : "Schedule Date"
        }
      }]
    },
    {
      "textEquivalent" : "Follow-up test recommended",
      "condition" : [{
        "kind" : "applicability",
        "expression" : {
          "language" : "text/cql-identifier",
          "expression" : "Follow-up test recommended"
        }
      }],
      "type" : {
        "coding" : [{
          "code" : "create"
        }]
      },
      "definitionCanonical" : "http://smart.who.int/hiv/ActivityDefinition/HIVB9DTScheduleFollowUp",
      "dynamicValue" : [{
        "path" : "intent",
        "expression" : {
          "description" : "Intent = 'proposal'",
          "language" : "text/cql",
          "expression" : "'proposal' from \"http://hl7.org/fhir/request-intent\""
        }
      },
      {
        "path" : "code.coding",
        "expression" : {
          "description" : "HIV Screening",
          "language" : "text/cql",
          "expression" : "'171121004' from \"SNOMED-CT\" display 'HIV screening'"
        }
      }]
    },
    {
      "textEquivalent" : "Schedule an HIV test, syphilis test, hepatitis B test as early as possible during this pregnancy",
      "condition" : [{
        "kind" : "applicability",
        "expression" : {
          "language" : "text/cql-identifier",
          "expression" : "Schedule an HIV test, syphilis test, hepatitis B test as early as possible during this pregnancy"
        }
      }],
      "type" : {
        "coding" : [{
          "code" : "create"
        }]
      },
      "action" : [{
        "textEquivalent" : "Schedule an HIV test as early as possible",
        "type" : {
          "coding" : [{
            "code" : "create"
          }]
        },
        "definitionCanonical" : "http://smart.who.int/hiv/ActivityDefinition/HIVB9DTScheduleFollowUp",
        "dynamicValue" : [{
          "path" : "intent",
          "expression" : {
            "description" : "Intent = 'proposal'",
            "language" : "text/cql",
            "expression" : "'proposal' from \"http://hl7.org/fhir/request-intent\""
          }
        },
        {
          "path" : "code.coding",
          "expression" : {
            "description" : "HIV test",
            "language" : "text/cql",
            "expression" : "'171121004' from \"SNOMED-CT\" display 'HIV test'"
          }
        }]
      },
      {
        "textEquivalent" : "Schedule a Syphilis test as early as possible",
        "type" : {
          "coding" : [{
            "code" : "create"
          }]
        },
        "definitionCanonical" : "http://smart.who.int/hiv/ActivityDefinition/HIVB9DTScheduleFollowUp",
        "dynamicValue" : [{
          "path" : "intent",
          "expression" : {
            "description" : "Intent = 'proposal'",
            "language" : "text/cql",
            "expression" : "'proposal' from \"http://hl7.org/fhir/request-intent\""
          }
        },
        {
          "path" : "code.coding",
          "expression" : {
            "description" : "Syphilis test",
            "language" : "text/cql",
            "expression" : "'40675008' from \"SNOMED-CT\" display 'Syphilis test'"
          }
        }]
      },
      {
        "textEquivalent" : "Schedule a Heptatitis test as early as possible",
        "type" : {
          "coding" : [{
            "code" : "create"
          }]
        },
        "definitionCanonical" : "http://smart.who.int/hiv/ActivityDefinition/HIVB9DTScheduleFollowUp",
        "dynamicValue" : [{
          "path" : "intent",
          "expression" : {
            "description" : "Intent = 'proposal'",
            "language" : "text/cql",
            "expression" : "'proposal' from \"http://hl7.org/fhir/request-intent\""
          }
        },
        {
          "path" : "code.coding",
          "expression" : {
            "description" : "Heptatitis B test",
            "language" : "text/cql",
            "expression" : "'313476009' from \"SNOMED-CT\" display 'Heptatitis B test'"
          }
        }]
      }]
    },
    {
      "textEquivalent" : "Schedule a follow-up tests for pregnant persons",
      "condition" : [{
        "kind" : "applicability",
        "expression" : {
          "language" : "text/cql-identifier",
          "expression" : "Schedule a 'Follow-up test recommended date' at first ANC contact date"
        }
      }],
      "type" : {
        "coding" : [{
          "code" : "create"
        }]
      },
      "action" : [{
        "textEquivalent" : "Schedule a follow-up test recommended date at first ANC contact date",
        "type" : {
          "coding" : [{
            "code" : "create"
          }]
        },
        "definitionCanonical" : "http://smart.who.int/hiv/ActivityDefinition/HIVB9DTScheduleFollowUp",
        "dynamicValue" : [{
          "path" : "intent",
          "expression" : {
            "description" : "Intent = 'proposal'",
            "language" : "text/cql",
            "expression" : "'proposal' from \"http://hl7.org/fhir/request-intent\""
          }
        },
        {
          "path" : "code.coding",
          "expression" : {
            "description" : "HIV Screening",
            "language" : "text/cql",
            "expression" : "'171121004' from \"SNOMED-CT\" display 'HIV screening'"
          }
        }]
      },
      {
        "textEquivalent" : "Schedule a follow-up test recommended date during a third trimester visit",
        "type" : {
          "coding" : [{
            "code" : "create"
          }]
        },
        "definitionCanonical" : "http://smart.who.int/hiv/ActivityDefinition/HIVB9DTScheduleFollowUp",
        "dynamicValue" : [{
          "path" : "intent",
          "expression" : {
            "description" : "Intent = 'proposal'",
            "language" : "text/cql",
            "expression" : "'proposal' from \"http://hl7.org/fhir/request-intent\""
          }
        },
        {
          "path" : "code.coding",
          "expression" : {
            "description" : "HIV Screening",
            "language" : "text/cql",
            "expression" : "'171121004' from \"SNOMED-CT\" display 'HIV screening'"
          }
        }]
      },
      {
        "textEquivalent" : "Schedule a follow-up test recommended date either two-weeks, 6 months or 9 months post delivery",
        "type" : {
          "coding" : [{
            "code" : "create"
          }]
        },
        "definitionCanonical" : "http://smart.who.int/hiv/ActivityDefinition/HIVB9DTScheduleFollowUp",
        "dynamicValue" : [{
          "path" : "intent",
          "expression" : {
            "description" : "Intent = 'proposal'",
            "language" : "text/cql",
            "expression" : "'proposal' from \"http://hl7.org/fhir/request-intent\""
          }
        },
        {
          "path" : "code.coding",
          "expression" : {
            "description" : "HIV Screening",
            "language" : "text/cql",
            "expression" : "'171121004' from \"SNOMED-CT\" display 'HIV screening'"
          }
        }]
      }]
    },
    {
      "textEquivalent" : "Send retest recommendation to provider",
      "condition" : [{
        "kind" : "applicability",
        "expression" : {
          "language" : "text/cql-identifier",
          "expression" : "Guidance"
        }
      }],
      "definitionCanonical" : "http://smart.who.int/hiv/ActivityDefinition/HIVGuidanceCommunicationRequestActivity",
      "dynamicValue" : [{
        "path" : "description",
        "expression" : {
          "language" : "text/cql-identifier",
          "expression" : "Guidance"
        }
      }]
    }]
  }]
}