<?xml version="1.0" encoding="UTF-8"?>
<library xmlns="urn:hl7-org:elm:r1" xmlns:t="urn:hl7-org:elm-types:r1" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:fhir="http://hl7.org/fhir" xmlns:qdm43="urn:healthit-gov:qdm:v4_3" xmlns:qdm53="urn:healthit-gov:qdm:v5_3" xmlns:a="urn:hl7-org:cql-annotations:r1" localId="0">
   <annotation translatorOptions="EnableAnnotations,EnableLocators,DisableListDemotion,DisableListPromotion" signatureLevel="Overloads" xsi:type="a:CqlToElmInfo"/>
   <annotation message="An operand identifier [reference] is hiding another identifier of the same name." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="An operand identifier [reference] is hiding another identifier of the same name." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="An operand identifier [reference] is hiding another identifier of the same name." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation xsi:type="a:Annotation">
      <a:s r="293">
         <a:s>/**
 * Library: HIV.IND.4 Logic
 * Ref No: PRV.4
 * Short Name: Volume of PrEP prescribed
 *
 * Definition: Total volume of PrEP product prescribed
 *
 * Numerator: The total sum of the volume of PrEP product prescribed for each PrEP recipient during the reporting period
 * Numerator Calculation: SUM of &quot;Number of days prescribed&quot; for all clients with &quot;Medications prescribed&quot;='PrEP for HIV prevention'
 * Numerator Exclusions: 
 *
 * Denominator: 1
 * Denominator Calculation: 1
 * Denominator Exclusions: 
 *
 * Disaggregations:
 * • Gender (female, male, other*) 
 *  • Age (15–19, 20–24, 25–49, 50+ years) 
 *  • Key populations (men who have sex with men, people living in prisons and other closed settings, people who inject drugs, sex workers, trans and gender diverse people)** 
 *  • PrEP product and formulation (oral, long-acting device, long-acting injectable) 
 *  • Provider type (key population-led or community-led organization, public sector provider, other entities such as private for-profit and not-for-profit organizations, including faith- based, international, nongovernmental) 
 *  • Setting: facility-based service (including hospitals, health clinics, general practice offices, etc.) or community-based service (including drop-in centres, community service delivery points, mobile clinics or vans, outreach teams, community support groups, etc.) 
 *  • Cities and other administrative regions of epidemiologic importance
 *
 * Disaggregation Elements: Gender | Age | Key population member type | PrEP product prescribed
 *
 * Numerator and Denominator Elements:
 * Medications prescribed 
 *  Number of days prescribed
 *
 * Reference: Consolidated guidelines on person-centred HIV strategic information: strengthening routine data for impact. Geneva: World Health Organization; 2022
 * 
 * Data Concepts:
 * HIV.A.DE17: Age | Calculated age (number of years) of the client based on date of birth
 * HIV.A.DE18: Gender* | Gender of the client*
 * HIV.A.DE19: Female | Client identifies as female
 * HIV.A.DE20: Male | Client identifies as male
 * HIV.A.DE21: Transgender male | Client identifies as transgender male
 * HIV.A.DE22: Transgender female | Client identifies as transgender female
 * HIV.A.DE23: Other | Additional category
 * HIV.B.DE50: Key population member type* | The type of key population that the client is included in
 * HIV.B.DE51: Sex worker | Client is a sex worker
 * HIV.B.DE52: Men who have sex with men | Client is a man who has sex with men
 * HIV.B.DE53: Trans and gender-diverse people | Client identifies as trans and gender-diverse
 * HIV.B.DE54: People who inject drugs | Client is a person who injects drugs
 * HIV.B.DE55: People living in prisons and other closed settings | Client lives in a prison or another closed setting
 * HIV.C.DE75: Medications prescribed | Medications the client was prescribed
 * HIV.C.DE76: PrEP for HIV prevention | Client was prescribed pre-exposure prophylaxis (PrEP) for HIV prevention
 * HIV.C.DE77: PEP for HIV prevention | Client was prescribed post-exposure prophylaxis (PEP) for HIV prevention
 * HIV.C.DE78: Other | Client was prescribed other medications
 * HIV.C.DE80: PrEP product prescribed | PrEP product that the client was prescribed
 * HIV.C.DE81: Oral PrEP | Client was prescribed oral PrEP
 * HIV.C.DE82: Dapivirine vaginal ring (DVR) | Client was prescribed dapivirine vaginal ring (DVR)
 * HIV.C.DE83: CAB-LA | Client was prescribed long-acting cabotegravir (CAB-LA)
 * HIV.C.DE84: Other | Client was prescribed other PrEP product
 * HIV.C.DE121: Number of days prescribed | Days of medication client has been prescribed
 * HIV.D.DE457: Medications prescribed | Name or regimen code of all other medications prescribed during the visit
 * HIV.E.DE114: Key population member type* | The type of key population that the infant's mother is included in
 * HIV.E.DE115: Sex worker | Infant's mother is a sex worker
 * HIV.E.DE116: People who inject drugs | Infant's mother is a person who injects drugs
 * HIV.E.DE117: Trans and gender-diverse people | Infant's mother identifies as trans and gender-diverse
 * HIV.E.DE118: People living in prisons and other closed setting | Infant's mother is in a prison or closed setting
 * HIV.PRV.DE28: Number of days prescribed | Days of medication client has been prescribed
 *
 * Additional Context
 * - what it measures: The total volume of PrEP product prescribed can be used to forecast future commodity needs.
 * - rationale: The total volume of PrEP product prescribed or dispensed can be used to calculate the total number of days (or months/years) available for product use, which can be used derive indicators examining the level of PrEP provided relative to need.
 * - method: Individual-level data obtained from programme records. Either the volume of PrEP prescribed or the volume of product dispensed can be used if this is available, for example from pharmacy data. |  | The total volume of PrEP product prescribed (or dispensed) can then be used to derive the total number of days (or months/years) of product use based on the duration of HIV prevention provided by each unit of product. Such an indicator could be described, for example, as | the number of person-years of PrEP protection provided. This measure can then be used to examine the level of PrEP availability to monitor trends and for modelling the impact of PrEP at the population level. It can also be used to derive the following additional indicators useful for understanding the quantity of PrEP product available relative to need: |  | a) numerator:total number of days available for product use; denominator: total number of PrEP recipients | b) numerator:total number of days available for product use; denominator: estimates of the total number of people who would benefit from PrEP
 * 
 * Suggested Scoring Method: continuous-variable | http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cv-measure-cqfm
 * 
 * Profiles:
 * - HivPrepTreatment
 * - HivPepTreatment (4 types)
 */

library HIVIND4Logic</a:s>
      </a:s>
   </annotation>
   <identifier id="HIVIND4Logic" system="http://smart.who.int/hiv"/>
   <schemaIdentifier id="urn:hl7-org:elm" version="r1"/>
   <usings>
      <def localId="1" localIdentifier="System" uri="urn:hl7-org:elm-types:r1"/>
      <def localId="206" locator="80:1-80:26" localIdentifier="FHIR" uri="http://hl7.org/fhir" version="4.0.1">
         <annotation xsi:type="a:Annotation">
            <a:s r="206">
               <a:s>// Included Libraries
using </a:s>
               <a:s>
                  <a:s>FHIR</a:s>
               </a:s>
               <a:s> version '4.0.1'</a:s>
            </a:s>
         </annotation>
      </def>
   </usings>
   <includes>
      <def localId="207" locator="82:1-82:44" localIdentifier="HIC" path="http://smart.who.int/hiv/HIVCommon" version="0.0.1">
         <annotation xsi:type="a:Annotation">
            <a:s r="207">
               <a:s>include </a:s>
               <a:s>
                  <a:s>HIVCommon</a:s>
               </a:s>
               <a:s> version '0.0.1' called HIC</a:s>
            </a:s>
         </annotation>
      </def>
      <def localId="208" locator="83:1-83:35" localIdentifier="FHIRHelpers" path="http://hl7.org/fhir/FHIRHelpers" version="4.0.1">
         <annotation xsi:type="a:Annotation">
            <a:s r="208">
               <a:s>include </a:s>
               <a:s>
                  <a:s>FHIRHelpers</a:s>
               </a:s>
               <a:s> version '4.0.1'</a:s>
            </a:s>
         </annotation>
      </def>
      <def localId="209" locator="85:1-85:29" localIdentifier="WCom" path="http://smart.who.int/hiv/WHOCommon">
         <annotation xsi:type="a:Annotation">
            <a:s r="209">
               <a:s>//
include </a:s>
               <a:s>
                  <a:s>WHOCommon</a:s>
               </a:s>
               <a:s> called WCom</a:s>
            </a:s>
         </annotation>
      </def>
      <def localId="210" locator="87:1-87:29" localIdentifier="HE" path="http://smart.who.int/hiv/HIVElements">
         <annotation xsi:type="a:Annotation">
            <a:s r="210">
               <a:s>include </a:s>
               <a:s>
                  <a:s>HIVElements</a:s>
               </a:s>
               <a:s> called HE</a:s>
            </a:s>
         </annotation>
      </def>
      <def localId="211" locator="88:1-88:39" localIdentifier="HIE" path="http://smart.who.int/hiv/HIVIndicatorElements">
         <annotation xsi:type="a:Annotation">
            <a:s r="211">
               <a:s>include </a:s>
               <a:s>
                  <a:s>HIVIndicatorElements</a:s>
               </a:s>
               <a:s> called HIE</a:s>
            </a:s>
         </annotation>
      </def>
   </includes>
   <parameters>
      <def localId="212" locator="91:1-91:88" name="Measurement Period" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="212">
               <a:s>// Indicator Definition
parameter &quot;Measurement Period&quot; </a:s>
               <a:s r="224">
                  <a:s>Interval&lt;</a:s>
                  <a:s r="225">
                     <a:s>Date</a:s>
                  </a:s>
                  <a:s>></a:s>
               </a:s>
               <a:s> default </a:s>
               <a:s r="223">
                  <a:s r="217">Interval[@2023-01-01, @2023-01-30]</a:s>
               </a:s>
            </a:s>
         </annotation>
         <default localId="223" locator="91:55-91:88" lowClosed="true" highClosed="true" xsi:type="Interval">
            <low localId="217" locator="91:64-91:74" xsi:type="Date">
               <year localId="214" valueType="t:Integer" value="2023" xsi:type="Literal"/>
               <month localId="215" valueType="t:Integer" value="1" xsi:type="Literal"/>
               <day localId="216" valueType="t:Integer" value="1" xsi:type="Literal"/>
            </low>
            <high localId="222" locator="91:77-91:87" xsi:type="Date">
               <year localId="219" valueType="t:Integer" value="2023" xsi:type="Literal"/>
               <month localId="220" valueType="t:Integer" value="1" xsi:type="Literal"/>
               <day localId="221" valueType="t:Integer" value="30" xsi:type="Literal"/>
            </high>
         </default>
         <parameterTypeSpecifier localId="224" locator="91:32-91:45" xsi:type="IntervalTypeSpecifier">
            <pointType localId="225" locator="91:41-91:44" name="t:Date" xsi:type="NamedTypeSpecifier"/>
         </parameterTypeSpecifier>
      </def>
   </parameters>
   <contexts>
      <def localId="229" locator="93:1-93:15" name="Patient"/>
   </contexts>
   <statements>
      <def localId="227" locator="93:1-93:15" name="Patient" context="Patient">
         <expression localId="228" xsi:type="SingletonFrom">
            <operand localId="226" locator="93:1-93:15" dataType="fhir:Patient" templateId="http://hl7.org/fhir/StructureDefinition/Patient" xsi:type="Retrieve"/>
         </expression>
      </def>
      <def localId="231" locator="94:1-102:3" name="Measure Population" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="231">
               <a:s>define &quot;Measure Population&quot;:
   </a:s>
               <a:s r="258">
                  <a:s>Sum(
    </a:s>
                  <a:s r="253">
                     <a:s>
                        <a:s r="232">
                           <a:s r="244">
                              <a:s>(
      </a:s>
                              <a:s r="244">
                                 <a:s>collapse </a:s>
                                 <a:s r="242">
                                    <a:s>(</a:s>
                                    <a:s r="242">
                                       <a:s>
                                          <a:s r="233">
                                             <a:s r="235">
                                                <a:s>
                                                   <a:s>HE.&quot;PREP Prescription&quot;</a:s>
                                                </a:s>
                                             </a:s>
                                             <a:s> MR</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s>
      </a:s>
                                       <a:s r="236">
                                          <a:s>return </a:s>
                                          <a:s r="241">
                                             <a:s r="239">
                                                <a:s r="237">
                                                   <a:s>HIC</a:s>
                                                </a:s>
                                                <a:s>.</a:s>
                                                <a:s r="239">
                                                   <a:s>&quot;Prescription Relevant Period&quot;( </a:s>
                                                   <a:s r="238">
                                                      <a:s>MR</a:s>
                                                   </a:s>
                                                   <a:s> )</a:s>
                                                </a:s>
                                             </a:s>
                                             <a:s> intersect </a:s>
                                             <a:s r="240">
                                                <a:s>&quot;Measurement Period&quot;</a:s>
                                             </a:s>
                                          </a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>
      )</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>
    )</a:s>
                           </a:s>
                           <a:s> PREPUseInterval</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
      </a:s>
                     <a:s r="245">
                        <a:s>return </a:s>
                        <a:s r="246">
                           <a:s>days between </a:s>
                           <a:s r="247">
                              <a:s>start of </a:s>
                              <a:s r="248">
                                 <a:s>PREPUseInterval</a:s>
                              </a:s>
                           </a:s>
                           <a:s> and </a:s>
                           <a:s r="249">
                              <a:s>end of </a:s>
                              <a:s r="250">
                                 <a:s>PREPUseInterval</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
                  <a:s>
  )</a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="258" locator="95:4-102:3" xsi:type="Sum">
            <signature localId="259" xsi:type="ListTypeSpecifier">
               <elementType localId="260" name="t:Integer" xsi:type="NamedTypeSpecifier"/>
            </signature>
            <source localId="253" locator="96:5-101:77" xsi:type="Query">
               <source localId="232" locator="96:5-100:21" alias="PREPUseInterval">
                  <expression localId="244" locator="96:5-100:5" xsi:type="Collapse">
                     <operand localId="242" locator="97:16-99:7" xsi:type="Query">
                        <source localId="233" locator="97:17-97:41" alias="MR">
                           <expression localId="235" locator="97:17-97:38" name="PREP Prescription" libraryName="HE" xsi:type="ExpressionRef"/>
                        </source>
                        <return localId="236" locator="98:7-98:84">
                           <expression localId="241" locator="98:14-98:84" xsi:type="Intersect">
                              <operand localId="239" locator="98:14-98:53" name="Prescription Relevant Period" libraryName="HIC" xsi:type="FunctionRef">
                                 <operand localId="238" locator="98:50-98:51" name="MR" xsi:type="AliasRef"/>
                              </operand>
                              <operand localId="240" locator="98:65-98:84" name="Measurement Period" xsi:type="ParameterRef"/>
                           </expression>
                        </return>
                     </operand>
                     <operand localId="243" xsi:type="Null"/>
                  </expression>
               </source>
               <return localId="245" locator="101:7-101:77">
                  <expression localId="246" locator="101:14-101:77" precision="Day" xsi:type="DurationBetween">
                     <signature localId="251" name="t:Date" xsi:type="NamedTypeSpecifier"/>
                     <signature localId="252" name="t:Date" xsi:type="NamedTypeSpecifier"/>
                     <operand localId="247" locator="101:27-101:50" xsi:type="Start">
                        <operand localId="248" locator="101:36-101:50" name="PREPUseInterval" xsi:type="AliasRef"/>
                     </operand>
                     <operand localId="249" locator="101:56-101:77" xsi:type="End">
                        <operand localId="250" locator="101:63-101:77" name="PREPUseInterval" xsi:type="AliasRef"/>
                     </operand>
                  </expression>
               </return>
            </source>
         </expression>
      </def>
      <def localId="262" locator="107:1-108:6" name="Initial Population" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="262">
               <a:s r="263">/*
 * As defined by Member States
 */
define &quot;Initial Population&quot;:
  true</a:s>
            </a:s>
         </annotation>
         <expression localId="263" locator="108:3-108:6" valueType="t:Boolean" value="true" xsi:type="Literal"/>
      </def>
      <def localId="264" locator="114:1-115:3" name="Measure Observation" context="Patient" accessLevel="Public" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="264">
               <a:s>/*
 * NOTE: Modeled as a Continuous Variable measure because this is an estimated denominator proportion measure
 */

define function &quot;Measure Observation&quot;(Patient &quot;Patient&quot;):
  </a:s>
               <a:s r="267">
                  <a:s r="267">1</a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="267" locator="115:3" valueType="t:Integer" value="1" xsi:type="Literal"/>
         <operand localId="266" name="Patient">
            <operandTypeSpecifier localId="265" locator="114:47-114:55" name="fhir:Patient" xsi:type="NamedTypeSpecifier"/>
         </operand>
      </def>
      <def localId="269" locator="121:1-122:42" name="Administrative Gender Stratifier" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="269">
               <a:s>/*
 * Disaggregators
 */

define &quot;Administrative Gender Stratifier&quot;:
	</a:s>
               <a:s r="271">
                  <a:s r="270">
                     <a:s>HIE</a:s>
                  </a:s>
                  <a:s>.</a:s>
                  <a:s r="271">
                     <a:s>&quot;By Administrative Gender Stratifier&quot;</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="271" locator="122:2-122:42" name="By Administrative Gender Stratifier" libraryName="HIE" xsi:type="ExpressionRef"/>
      </def>
      <def localId="273" locator="124:1-125:26" name="Age Stratifier" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="273">
               <a:s>define &quot;Age Stratifier&quot;:
	</a:s>
               <a:s r="275">
                  <a:s r="274">
                     <a:s>HIE</a:s>
                  </a:s>
                  <a:s>.</a:s>
                  <a:s r="275">
                     <a:s>&quot;By Age Stratifier 3&quot;</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="275" locator="125:2-125:26" name="By Age Stratifier 3" libraryName="HIE" xsi:type="ExpressionRef"/>
      </def>
      <def localId="277" locator="127:1-128:38" name="Geographic Region Stratifier" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="277">
               <a:s>define &quot;Geographic Region Stratifier&quot;:
	</a:s>
               <a:s r="279">
                  <a:s r="278">
                     <a:s>HIE</a:s>
                  </a:s>
                  <a:s>.</a:s>
                  <a:s r="279">
                     <a:s>&quot;By Geographic Region Stratifier&quot;</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="279" locator="128:2-128:38" name="By Geographic Region Stratifier" libraryName="HIE" xsi:type="ExpressionRef"/>
      </def>
      <def localId="281" locator="130:1-131:20" name="patientGroups Stratifier" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="281">
               <a:s>define &quot;patientGroups Stratifier&quot;:
	</a:s>
               <a:s r="283">
                  <a:s r="282">
                     <a:s>HIE</a:s>
                  </a:s>
                  <a:s>.</a:s>
                  <a:s r="283">
                     <a:s>&quot;patientGroups&quot;</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="283" locator="131:2-131:20" name="patientGroups" libraryName="HIE" xsi:type="ExpressionRef"/>
      </def>
      <def localId="285" locator="133:1-134:22" name="prep product" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="285">
               <a:s>define &quot;prep product&quot;:
    </a:s>
               <a:s r="287">
                  <a:s r="286">
                     <a:s>HIE</a:s>
                  </a:s>
                  <a:s>.</a:s>
                  <a:s r="287">
                     <a:s>&quot;prep_product&quot;</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="287" locator="134:5-134:22" name="prep_product" libraryName="HIE" xsi:type="ExpressionRef"/>
      </def>
      <def localId="289" locator="136:1-137:17" name="Setting" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="289">
               <a:s>define &quot;Setting&quot;:
    </a:s>
               <a:s r="291">
                  <a:s r="290">
                     <a:s>HIE</a:s>
                  </a:s>
                  <a:s>.</a:s>
                  <a:s r="291">
                     <a:s>&quot;setting&quot;</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="291" locator="137:5-137:17" name="setting" libraryName="HIE" xsi:type="ExpressionRef"/>
      </def>
      <def localId="293" locator="141:1-147:32" name="Stratification" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="293">
               <a:s>//provider type not provided?

define &quot;Stratification&quot;:
 </a:s>
               <a:s r="352">
                  <a:s r="343">
                     <a:s r="337">
                        <a:s r="333">
                           <a:s r="324">
                              <a:s r="317">
                                 <a:s r="313">
                                    <a:s r="308">
                                       <a:s r="304">
                                          <a:s r="303">
                                             <a:s r="302">
                                                <a:s>HIE</a:s>
                                             </a:s>
                                             <a:s>.</a:s>
                                             <a:s r="303">
                                                <a:s>&quot;By Administrative Gender Stratifier&quot;</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="304">
                                             <a:s>code</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s> 
  + </a:s>
                                       <a:s r="305">
                                          <a:s>':'</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> + </a:s>
                                    <a:s r="310">
                                       <a:s r="309">
                                          <a:s>HIE</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="310">
                                          <a:s>&quot;By Age Stratifier 3&quot;</a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>
+ </a:s>
                                 <a:s r="314">
                                    <a:s>':'</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> + </a:s>
                              <a:s r="319">
                                 <a:s r="318">
                                    <a:s>HIE</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="319">
                                    <a:s>&quot;By Geographic Region Stratifier&quot;</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                           <a:s>
+ </a:s>
                           <a:s r="330">
                              <a:s>Combine(</a:s>
                              <a:s r="326">
                                 <a:s r="325">
                                    <a:s>HIE</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="326">
                                    <a:s>patientGroups</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>, </a:s>
                              <a:s r="327">
                                 <a:s>':'</a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                        </a:s>
                        <a:s> 
 + </a:s>
                        <a:s r="334">
                           <a:s>':'</a:s>
                        </a:s>
                     </a:s>
                     <a:s> + </a:s>
                     <a:s r="340">
                        <a:s r="339">
                           <a:s r="338">
                              <a:s>HIE</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="339">
                              <a:s>&quot;setting&quot;</a:s>
                           </a:s>
                        </a:s>
                        <a:s>.</a:s>
                        <a:s r="340">
                           <a:s>code</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
                  <a:s>
+ </a:s>
                  <a:s r="349">
                     <a:s>Combine(</a:s>
                     <a:s r="345">
                        <a:s r="344">
                           <a:s>HIE</a:s>
                        </a:s>
                        <a:s>.</a:s>
                        <a:s r="345">
                           <a:s>prep_product</a:s>
                        </a:s>
                     </a:s>
                     <a:s>, </a:s>
                     <a:s r="346">
                        <a:s>':'</a:s>
                     </a:s>
                     <a:s>)</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="352" locator="142:2-147:32" xsi:type="Concatenate">
            <operand localId="343" locator="142:2-146:27" xsi:type="Concatenate">
               <operand localId="337" locator="142:2-146:6" xsi:type="Concatenate">
                  <operand localId="333" locator="142:2-145:33" xsi:type="Concatenate">
                     <operand localId="324" locator="142:2-144:45" xsi:type="Concatenate">
                        <operand localId="317" locator="142:2-144:5" xsi:type="Concatenate">
                           <operand localId="313" locator="142:2-143:35" xsi:type="Concatenate">
                              <operand localId="308" locator="142:2-143:7" xsi:type="Concatenate">
                                 <operand localId="304" locator="142:2-142:47" path="code" xsi:type="Property">
                                    <source localId="303" locator="142:2-142:42" name="By Administrative Gender Stratifier" libraryName="HIE" xsi:type="ExpressionRef"/>
                                 </operand>
                                 <operand localId="305" locator="143:5-143:7" valueType="t:String" value=":" xsi:type="Literal"/>
                              </operand>
                              <operand localId="310" locator="143:11-143:35" name="By Age Stratifier 3" libraryName="HIE" xsi:type="ExpressionRef"/>
                           </operand>
                           <operand localId="314" locator="144:3-144:5" valueType="t:String" value=":" xsi:type="Literal"/>
                        </operand>
                        <operand localId="320" name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <signature localId="321" name="fhir:string" xsi:type="NamedTypeSpecifier"/>
                           <operand localId="319" locator="144:9-144:45" name="By Geographic Region Stratifier" libraryName="HIE" xsi:type="ExpressionRef"/>
                        </operand>
                     </operand>
                     <operand localId="330" locator="145:3-145:33" xsi:type="Combine">
                        <source localId="326" locator="145:11-145:27" name="patientGroups" libraryName="HIE" xsi:type="ExpressionRef"/>
                        <separator localId="327" locator="145:30-145:32" valueType="t:String" value=":" xsi:type="Literal"/>
                     </operand>
                  </operand>
                  <operand localId="334" locator="146:4-146:6" valueType="t:String" value=":" xsi:type="Literal"/>
               </operand>
               <operand localId="340" locator="146:10-146:27" path="code" xsi:type="Property">
                  <source localId="339" locator="146:10-146:22" name="setting" libraryName="HIE" xsi:type="ExpressionRef"/>
               </operand>
            </operand>
            <operand localId="349" locator="147:3-147:32" xsi:type="Combine">
               <source localId="345" locator="147:11-147:26" name="prep_product" libraryName="HIE" xsi:type="ExpressionRef"/>
               <separator localId="346" locator="147:29-147:31" valueType="t:String" value=":" xsi:type="Literal"/>
            </operand>
         </expression>
      </def>
   </statements>
</library>
