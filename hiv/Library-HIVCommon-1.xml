<?xml version="1.0" encoding="UTF-8"?>
<library xmlns="urn:hl7-org:elm:r1" xmlns:t="urn:hl7-org:elm-types:r1" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:fhir="http://hl7.org/fhir" xmlns:qdm43="urn:healthit-gov:qdm:v4_3" xmlns:qdm53="urn:healthit-gov:qdm:v5_3" xmlns:a="urn:hl7-org:cql-annotations:r1" localId="0">
   <annotation translatorOptions="EnableAnnotations,EnableLocators,DisableListDemotion,DisableListPromotion" signatureLevel="Overloads" xsi:type="a:CqlToElmInfo"/>
   <annotation message="An operand identifier [reference] is hiding another identifier of the same name." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="An operand identifier [reference] is hiding another identifier of the same name." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="An operand identifier [reference] is hiding another identifier of the same name." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation xsi:type="a:Annotation">
      <a:s r="1610">
         <a:s>library HIVCommon version '0.0.1'</a:s>
      </a:s>
   </annotation>
   <identifier id="HIVCommon" system="http://smart.who.int/hiv" version="0.0.1"/>
   <schemaIdentifier id="urn:hl7-org:elm" version="r1"/>
   <usings>
      <def localId="1" localIdentifier="System" uri="urn:hl7-org:elm-types:r1"/>
      <def localId="206" locator="3:1-3:26" localIdentifier="FHIR" uri="http://hl7.org/fhir" version="4.0.1">
         <annotation xsi:type="a:Annotation">
            <a:s r="206">
               <a:s>using </a:s>
               <a:s>
                  <a:s>FHIR</a:s>
               </a:s>
               <a:s> version '4.0.1'</a:s>
            </a:s>
         </annotation>
      </def>
   </usings>
   <includes>
      <def localId="207" locator="5:1-5:35" localIdentifier="FHIRHelpers" path="http://hl7.org/fhir/FHIRHelpers" version="4.0.1">
         <annotation xsi:type="a:Annotation">
            <a:s r="207">
               <a:s>include </a:s>
               <a:s>
                  <a:s>FHIRHelpers</a:s>
               </a:s>
               <a:s> version '4.0.1'</a:s>
            </a:s>
         </annotation>
      </def>
      <def localId="208" locator="6:1-6:29" localIdentifier="WCom" path="http://smart.who.int/hiv/WHOCommon">
         <annotation xsi:type="a:Annotation">
            <a:s r="208">
               <a:s>include </a:s>
               <a:s>
                  <a:s>WHOCommon</a:s>
               </a:s>
               <a:s> called WCom</a:s>
            </a:s>
         </annotation>
      </def>
      <def localId="209" locator="8:1-8:35" localIdentifier="Concepts" path="http://smart.who.int/hiv/HIVConcepts">
         <annotation xsi:type="a:Annotation">
            <a:s r="209">
               <a:s>include </a:s>
               <a:s>
                  <a:s>HIVConcepts</a:s>
               </a:s>
               <a:s> called Concepts</a:s>
            </a:s>
         </annotation>
      </def>
      <def localId="210" locator="9:1-9:47" localIdentifier="CustomConcepts" path="http://smart.who.int/hiv/HIVConceptsCustom">
         <annotation xsi:type="a:Annotation">
            <a:s r="210">
               <a:s>include </a:s>
               <a:s>
                  <a:s>HIVConceptsCustom</a:s>
               </a:s>
               <a:s> called CustomConcepts</a:s>
            </a:s>
         </annotation>
      </def>
   </includes>
   <contexts>
      <def localId="214" locator="11:1-11:15" name="Patient"/>
   </contexts>
   <statements>
      <def localId="212" locator="11:1-11:15" name="Patient" context="Patient">
         <expression localId="213" xsi:type="SingletonFrom">
            <operand localId="211" locator="11:1-11:15" dataType="fhir:Patient" templateId="http://hl7.org/fhir/StructureDefinition/Patient" xsi:type="Retrieve"/>
         </expression>
      </def>
      <def localId="215" locator="93:1-104:7" name="GetDurationInDays" context="Patient" accessLevel="Public" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="215">
               <a:s>//VERIFIED


//DRAFT

//need to add Time to start ART (within 7, 30 or 90 days of diagnosis, as per country guidelines)
//need to add Disaggregation by time since diagnosis
  


/* 
* DAK has codes for HAART misspecified 
* ICD-10 Z92.2	Other prophylactic chemotherapy		
* LOINC &quot;54825-5	&quot;	On scheduled pain medication regimen in last 7 days
*
* Should discuss 
*/







/*
* Kenya EMR defined as HIV positive condition
* Will need to discuss if produce flags through conditions for concepts to use in indicator calculation such as HIV positive and On ART
* However, we have moved forward with a more prescriptive approach 
* Inevitably our approach requires that certain data elements be available
*/

/*
 * HIV Treatment during the measurement period
 * uses dosage and dispensation amount to estimate last day of medication
 * medication should be dispensed before end of measurement period
 * medication should last until after 28 days after the end of the measurement period
 * This takes into account lost to follow up
 */

/*
*define &quot;HIV Treatment during the measurement period&quot;:
*   [MedicationDispense] MD
*    where MD.status in { 'final', 'amended', 'corrected' }
*    and MD.medication ~ 'Antiretroviral'
*    and MD.whenHandedOver before end of &quot;Measurement Period&quot;
*    and (MD.whenHandedOver + MD.dosageInstruction[0].timing.repeat.duration.value * MedicationDispense.quantity.value) after (measurementPeriod.end - 28 days)
*/ 

/*
* Immunization defines HAART as
*  exists([MedicationAdministration] A where ExtractMedicationCode(A.medication) in IMMZc.&quot;ARV Drugs&quot; and A.status = 'in-progress')
* I believe this is the incorrect resource unless they mean to say that medication is given during a medical encounter
* would like to discuss 
*/ 

/** 
 * Patient Deceased During Measurement Period
 * Immunization defines this as true when is a boolean. This may have the effect of deleting a person from indicators in all calculations
 * Should intend to use when patient.deceased FHIR boolean was updated to TRUE if no other date is available
 * Kenya EMR example does not account for when deceased is just a boolean
 */


/*
define &quot;PREP Prescription Days&quot;:
  Sum(
    (
      collapse (
        [MedicationRequest] MR
          where MR.status = 'completed'
          and MR.intent = 'order'
          and MR.medication ~ Concepts.&quot;PrEP for HIV prevention&quot;
        return WComV2.&quot;Prescription Relevant Period&quot;( MR ) intersect &quot;Measurement Period&quot;
      )
    ) PREPUseInterval
      return days between start of PREPUseInterval and end of PREPUseInterval
  )
*/


define function GetDurationInDays(value FHIR.Duration): // returns Decimal:
    </a:s>
               <a:s r="218">
                  <a:s r="218">
                     <a:s>case </a:s>
                     <a:s r="221">
                        <a:s r="220">
                           <a:s r="219">
                              <a:s>value</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="220">
                              <a:s>code</a:s>
                           </a:s>
                        </a:s>
                        <a:s>.</a:s>
                        <a:s r="221">
                           <a:s>value</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
      </a:s>
                     <a:s r="222">
                        <a:s>when </a:s>
                        <a:s r="223">
                           <a:s>'a'</a:s>
                        </a:s>
                        <a:s> then </a:s>
                        <a:s r="224">
                           <a:s r="226">
                              <a:s r="225">
                                 <a:s>value</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="226">
                                 <a:s>value</a:s>
                              </a:s>
                           </a:s>
                           <a:s r="227"> * 365.0</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
      </a:s>
                     <a:s r="231">
                        <a:s>when </a:s>
                        <a:s r="232">
                           <a:s>'mo'</a:s>
                        </a:s>
                        <a:s> then </a:s>
                        <a:s r="233">
                           <a:s r="236">
                              <a:s r="235">
                                 <a:s r="234">
                                    <a:s>value</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="235">
                                    <a:s>value</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="236">
                                 <a:s>value</a:s>
                              </a:s>
                           </a:s>
                           <a:s r="237"> * 30.0</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
      </a:s>
                     <a:s r="240">
                        <a:s>when </a:s>
                        <a:s r="241">
                           <a:s>'wk'</a:s>
                        </a:s>
                        <a:s> then </a:s>
                        <a:s r="242">
                           <a:s r="245">
                              <a:s r="244">
                                 <a:s r="243">
                                    <a:s>value</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="244">
                                    <a:s>value</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="245">
                                 <a:s>value</a:s>
                              </a:s>
                           </a:s>
                           <a:s r="246"> * 7.0</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
      </a:s>
                     <a:s r="249">
                        <a:s>when </a:s>
                        <a:s r="250">
                           <a:s>'d'</a:s>
                        </a:s>
                        <a:s> then </a:s>
                        <a:s r="253">
                           <a:s r="252">
                              <a:s r="251">
                                 <a:s>value</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="252">
                                 <a:s>value</a:s>
                              </a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="253">
                              <a:s>value</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s>
      </a:s>
                     <a:s r="254">
                        <a:s>when </a:s>
                        <a:s r="255">
                           <a:s>'h'</a:s>
                        </a:s>
                        <a:s> then </a:s>
                        <a:s r="256">
                           <a:s r="259">
                              <a:s r="258">
                                 <a:s r="257">
                                    <a:s>value</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="258">
                                    <a:s>value</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="259">
                                 <a:s>value</a:s>
                              </a:s>
                           </a:s>
                           <a:s r="260"> / 24.0</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
      </a:s>
                     <a:s r="263">
                        <a:s>when </a:s>
                        <a:s r="264">
                           <a:s>'min'</a:s>
                        </a:s>
                        <a:s> then </a:s>
                        <a:s r="265">
                           <a:s r="266">
                              <a:s r="269">
                                 <a:s r="268">
                                    <a:s r="267">
                                       <a:s>value</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="268">
                                       <a:s>value</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="269">
                                    <a:s>value</a:s>
                                 </a:s>
                              </a:s>
                              <a:s r="270"> / 60.0</a:s>
                           </a:s>
                           <a:s r="273"> / 24.0</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
      </a:s>
                     <a:s r="276">
                        <a:s>when </a:s>
                        <a:s r="277">
                           <a:s>'s'</a:s>
                        </a:s>
                        <a:s> then </a:s>
                        <a:s r="278">
                           <a:s r="279">
                              <a:s r="280">
                                 <a:s r="283">
                                    <a:s r="282">
                                       <a:s r="281">
                                          <a:s>value</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="282">
                                          <a:s>value</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="283">
                                       <a:s>value</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s r="284"> / 60.0</a:s>
                              </a:s>
                              <a:s r="287"> / 60.0</a:s>
                           </a:s>
                           <a:s r="290"> / 24.0</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
      </a:s>
                     <a:s r="293">
                        <a:s>when </a:s>
                        <a:s r="294">
                           <a:s>'ms'</a:s>
                        </a:s>
                        <a:s> then </a:s>
                        <a:s r="295">
                           <a:s r="296">
                              <a:s r="297">
                                 <a:s r="298">
                                    <a:s r="301">
                                       <a:s r="300">
                                          <a:s r="299">
                                             <a:s>value</a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="300">
                                             <a:s>value</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="301">
                                          <a:s>value</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s r="302"> / 60.0</a:s>
                                 </a:s>
                                 <a:s r="305"> / 60.0</a:s>
                              </a:s>
                              <a:s r="308"> / 24.0</a:s>
                           </a:s>
                           <a:s r="311"> / 1000.0</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
      else </a:s>
                     <a:s r="328">
                        <a:s r="314">Message(1000, true, </a:s>
                        <a:s r="316">
                           <a:s>'Undefined'</a:s>
                        </a:s>
                        <a:s>, </a:s>
                        <a:s r="317">
                           <a:s>'Error'</a:s>
                        </a:s>
                        <a:s>, </a:s>
                        <a:s r="325">
                           <a:s r="319">
                              <a:s>'Unsupported duration unit '</a:s>
                           </a:s>
                           <a:s> + </a:s>
                           <a:s r="322">
                              <a:s r="321">
                                 <a:s r="320">
                                    <a:s>value</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="321">
                                    <a:s>code</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="322">
                                 <a:s>value</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>)</a:s>
                     </a:s>
                     <a:s>
    end</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="218" locator="94:5-104:7" xsi:type="Case">
            <comparand localId="221" locator="94:10-94:25" path="value" xsi:type="Property">
               <source localId="220" locator="94:10-94:19" path="code" xsi:type="Property">
                  <source localId="219" locator="94:10-94:14" name="value" xsi:type="OperandRef"/>
               </source>
            </comparand>
            <caseItem localId="222" locator="95:7-95:39">
               <when localId="223" locator="95:12-95:14" valueType="t:String" value="a" xsi:type="Literal"/>
               <then localId="224" locator="95:21-95:39" xsi:type="Multiply">
                  <signature localId="229" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                  <signature localId="230" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                  <operand localId="228" name="ToDecimal" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                     <operand localId="226" locator="95:21-95:31" path="value" xsi:type="Property">
                        <source localId="225" locator="95:21-95:25" name="value" xsi:type="OperandRef"/>
                     </operand>
                  </operand>
                  <operand localId="227" locator="95:35-95:39" valueType="t:Decimal" value="365.0" xsi:type="Literal"/>
               </then>
            </caseItem>
            <caseItem localId="231" locator="96:7-96:45">
               <when localId="232" locator="96:12-96:15" valueType="t:String" value="mo" xsi:type="Literal"/>
               <then localId="233" locator="96:22-96:45" xsi:type="Multiply">
                  <signature localId="238" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                  <signature localId="239" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                  <operand localId="236" locator="96:22-96:38" path="value" xsi:type="Property">
                     <source localId="235" locator="96:22-96:32" path="value" xsi:type="Property">
                        <source localId="234" locator="96:22-96:26" name="value" xsi:type="OperandRef"/>
                     </source>
                  </operand>
                  <operand localId="237" locator="96:42-96:45" valueType="t:Decimal" value="30.0" xsi:type="Literal"/>
               </then>
            </caseItem>
            <caseItem localId="240" locator="97:7-97:44">
               <when localId="241" locator="97:12-97:15" valueType="t:String" value="wk" xsi:type="Literal"/>
               <then localId="242" locator="97:22-97:44" xsi:type="Multiply">
                  <signature localId="247" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                  <signature localId="248" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                  <operand localId="245" locator="97:22-97:38" path="value" xsi:type="Property">
                     <source localId="244" locator="97:22-97:32" path="value" xsi:type="Property">
                        <source localId="243" locator="97:22-97:26" name="value" xsi:type="OperandRef"/>
                     </source>
                  </operand>
                  <operand localId="246" locator="97:42-97:44" valueType="t:Decimal" value="7.0" xsi:type="Literal"/>
               </then>
            </caseItem>
            <caseItem localId="249" locator="98:7-98:37">
               <when localId="250" locator="98:12-98:14" valueType="t:String" value="d" xsi:type="Literal"/>
               <then localId="253" locator="98:21-98:37" path="value" xsi:type="Property">
                  <source localId="252" locator="98:21-98:31" path="value" xsi:type="Property">
                     <source localId="251" locator="98:21-98:25" name="value" xsi:type="OperandRef"/>
                  </source>
               </then>
            </caseItem>
            <caseItem localId="254" locator="99:7-99:44">
               <when localId="255" locator="99:12-99:14" valueType="t:String" value="h" xsi:type="Literal"/>
               <then localId="256" locator="99:21-99:44" xsi:type="Divide">
                  <signature localId="261" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                  <signature localId="262" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                  <operand localId="259" locator="99:21-99:37" path="value" xsi:type="Property">
                     <source localId="258" locator="99:21-99:31" path="value" xsi:type="Property">
                        <source localId="257" locator="99:21-99:25" name="value" xsi:type="OperandRef"/>
                     </source>
                  </operand>
                  <operand localId="260" locator="99:41-99:44" valueType="t:Decimal" value="24.0" xsi:type="Literal"/>
               </then>
            </caseItem>
            <caseItem localId="263" locator="100:7-100:53">
               <when localId="264" locator="100:12-100:16" valueType="t:String" value="min" xsi:type="Literal"/>
               <then localId="265" locator="100:23-100:53" xsi:type="Divide">
                  <signature localId="274" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                  <signature localId="275" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                  <operand localId="266" locator="100:23-100:46" xsi:type="Divide">
                     <signature localId="271" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                     <signature localId="272" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                     <operand localId="269" locator="100:23-100:39" path="value" xsi:type="Property">
                        <source localId="268" locator="100:23-100:33" path="value" xsi:type="Property">
                           <source localId="267" locator="100:23-100:27" name="value" xsi:type="OperandRef"/>
                        </source>
                     </operand>
                     <operand localId="270" locator="100:43-100:46" valueType="t:Decimal" value="60.0" xsi:type="Literal"/>
                  </operand>
                  <operand localId="273" locator="100:50-100:53" valueType="t:Decimal" value="24.0" xsi:type="Literal"/>
               </then>
            </caseItem>
            <caseItem localId="276" locator="101:7-101:58">
               <when localId="277" locator="101:12-101:14" valueType="t:String" value="s" xsi:type="Literal"/>
               <then localId="278" locator="101:21-101:58" xsi:type="Divide">
                  <signature localId="291" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                  <signature localId="292" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                  <operand localId="279" locator="101:21-101:51" xsi:type="Divide">
                     <signature localId="288" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                     <signature localId="289" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                     <operand localId="280" locator="101:21-101:44" xsi:type="Divide">
                        <signature localId="285" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                        <signature localId="286" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                        <operand localId="283" locator="101:21-101:37" path="value" xsi:type="Property">
                           <source localId="282" locator="101:21-101:31" path="value" xsi:type="Property">
                              <source localId="281" locator="101:21-101:25" name="value" xsi:type="OperandRef"/>
                           </source>
                        </operand>
                        <operand localId="284" locator="101:41-101:44" valueType="t:Decimal" value="60.0" xsi:type="Literal"/>
                     </operand>
                     <operand localId="287" locator="101:48-101:51" valueType="t:Decimal" value="60.0" xsi:type="Literal"/>
                  </operand>
                  <operand localId="290" locator="101:55-101:58" valueType="t:Decimal" value="24.0" xsi:type="Literal"/>
               </then>
            </caseItem>
            <caseItem localId="293" locator="102:7-102:68">
               <when localId="294" locator="102:12-102:15" valueType="t:String" value="ms" xsi:type="Literal"/>
               <then localId="295" locator="102:22-102:68" xsi:type="Divide">
                  <signature localId="312" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                  <signature localId="313" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                  <operand localId="296" locator="102:22-102:59" xsi:type="Divide">
                     <signature localId="309" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                     <signature localId="310" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                     <operand localId="297" locator="102:22-102:52" xsi:type="Divide">
                        <signature localId="306" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                        <signature localId="307" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                        <operand localId="298" locator="102:22-102:45" xsi:type="Divide">
                           <signature localId="303" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                           <signature localId="304" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                           <operand localId="301" locator="102:22-102:38" path="value" xsi:type="Property">
                              <source localId="300" locator="102:22-102:32" path="value" xsi:type="Property">
                                 <source localId="299" locator="102:22-102:26" name="value" xsi:type="OperandRef"/>
                              </source>
                           </operand>
                           <operand localId="302" locator="102:42-102:45" valueType="t:Decimal" value="60.0" xsi:type="Literal"/>
                        </operand>
                        <operand localId="305" locator="102:49-102:52" valueType="t:Decimal" value="60.0" xsi:type="Literal"/>
                     </operand>
                     <operand localId="308" locator="102:56-102:59" valueType="t:Decimal" value="24.0" xsi:type="Literal"/>
                  </operand>
                  <operand localId="311" locator="102:63-102:68" valueType="t:Decimal" value="1000.0" xsi:type="Literal"/>
               </then>
            </caseItem>
            <else localId="330" xsi:type="ToDecimal">
               <signature localId="331" name="t:Integer" xsi:type="NamedTypeSpecifier"/>
               <operand localId="328" locator="103:12-103:101" xsi:type="Message">
                  <source localId="314" locator="103:20-103:23" valueType="t:Integer" value="1000" xsi:type="Literal"/>
                  <condition localId="315" locator="103:26-103:29" valueType="t:Boolean" value="true" xsi:type="Literal"/>
                  <code localId="316" locator="103:32-103:42" valueType="t:String" value="Undefined" xsi:type="Literal"/>
                  <severity localId="317" locator="103:45-103:51" valueType="t:String" value="Error" xsi:type="Literal"/>
                  <message localId="325" locator="103:54-103:100" xsi:type="Concatenate">
                     <operand localId="319" locator="103:54-103:81" valueType="t:String" value="Unsupported duration unit " xsi:type="Literal"/>
                     <operand localId="322" locator="103:85-103:100" path="value" xsi:type="Property">
                        <source localId="321" locator="103:85-103:94" path="code" xsi:type="Property">
                           <source localId="320" locator="103:85-103:89" name="value" xsi:type="OperandRef"/>
                        </source>
                     </operand>
                  </message>
               </operand>
            </else>
         </expression>
         <operand localId="217" name="value">
            <operandTypeSpecifier localId="216" locator="93:41-93:53" name="fhir:Duration" xsi:type="NamedTypeSpecifier"/>
         </operand>
      </def>
      <def localId="332" locator="106:1-115:11" name="Prescription Relevant Period" context="Patient" accessLevel="Public" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="332">
               <a:s>define function &quot;Prescription Relevant Period&quot;(prescription FHIR.MedicationRequest):
  </a:s>
               <a:s r="335">
                  <a:s r="335">
                     <a:s>if </a:s>
                     <a:s r="336">
                        <a:s>(
    </a:s>
                        <a:s r="336">
                           <a:s r="337">
                              <a:s r="341">
                                 <a:s r="339">
                                    <a:s r="338">
                                       <a:s>prescription</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="339">
                                       <a:s>authoredOn</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> is not null</a:s>
                              </a:s>
                              <a:s> and </a:s>
                              <a:s r="345">
                                 <a:s r="343">
                                    <a:s r="342">
                                       <a:s>prescription</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="343">
                                       <a:s>dispenseRequest</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> is not null</a:s>
                              </a:s>
                           </a:s>
                           <a:s>
      and </a:s>
                           <a:s r="350">
                              <a:s r="348">
                                 <a:s r="347">
                                    <a:s r="346">
                                       <a:s>prescription</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="347">
                                       <a:s>dispenseRequest</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="348">
                                    <a:s>expectedSupplyDuration</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> is not null</a:s>
                           </a:s>
                        </a:s>
                        <a:s>
  )</a:s>
                     </a:s>
                     <a:s>
  then </a:s>
                     <a:s r="371">
                        <a:s>Interval[
    </a:s>
                        <a:s r="351">
                           <a:s>date from </a:s>
                           <a:s r="353">
                              <a:s r="352">
                                 <a:s>prescription</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="353">
                                 <a:s>authoredOn</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
    </a:s>
                        <a:s r="356">
                           <a:s r="357">
                              <a:s>date from </a:s>
                              <a:s r="359">
                                 <a:s r="358">
                                    <a:s>prescription</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="359">
                                    <a:s>authoredOn</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                           <a:s> + </a:s>
                           <a:s r="362">
                              <a:s>System.Quantity{ </a:s>
                              <a:s>
                                 <a:s>value: </a:s>
                                 <a:s r="367">
                                    <a:s>GetDurationInDays(</a:s>
                                    <a:s r="366">
                                       <a:s r="365">
                                          <a:s r="364">
                                             <a:s>prescription</a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="365">
                                             <a:s>dispenseRequest</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="366">
                                          <a:s>expectedSupplyDuration</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>)</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>, </a:s>
                              <a:s>
                                 <a:s>unit: </a:s>
                                 <a:s r="368">
                                    <a:s>'days'</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> }</a:s>
                           </a:s>
                        </a:s>
                        <a:s>
  ]</a:s>
                     </a:s>
                     <a:s r="372">
  else null</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="335" locator="107:3-115:11" xsi:type="If">
            <condition localId="336" locator="107:6-110:3" xsi:type="And">
               <operand localId="337" locator="108:5-108:84" xsi:type="And">
                  <operand localId="341" locator="108:5-108:39" xsi:type="Not">
                     <operand localId="340" locator="108:5-108:39" xsi:type="IsNull">
                        <operand localId="339" locator="108:5-108:27" path="authoredOn" xsi:type="Property">
                           <source localId="338" locator="108:5-108:16" name="prescription" xsi:type="OperandRef"/>
                        </operand>
                     </operand>
                  </operand>
                  <operand localId="345" locator="108:45-108:84" xsi:type="Not">
                     <operand localId="344" locator="108:45-108:84" xsi:type="IsNull">
                        <operand localId="343" locator="108:45-108:72" path="dispenseRequest" xsi:type="Property">
                           <source localId="342" locator="108:45-108:56" name="prescription" xsi:type="OperandRef"/>
                        </operand>
                     </operand>
                  </operand>
               </operand>
               <operand localId="350" locator="109:11-109:73" xsi:type="Not">
                  <operand localId="349" locator="109:11-109:73" xsi:type="IsNull">
                     <operand localId="348" locator="109:11-109:61" path="expectedSupplyDuration" xsi:type="Property">
                        <source localId="347" locator="109:11-109:38" path="dispenseRequest" xsi:type="Property">
                           <source localId="346" locator="109:11-109:22" name="prescription" xsi:type="OperandRef"/>
                        </source>
                     </operand>
                  </operand>
               </operand>
            </condition>
            <then localId="371" locator="111:8-114:3" lowClosed="true" highClosed="true" xsi:type="Interval">
               <low localId="351" locator="112:5-112:37" xsi:type="DateFrom">
                  <operand localId="354" name="ToDateTime" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                     <signature localId="355" name="fhir:dateTime" xsi:type="NamedTypeSpecifier"/>
                     <operand localId="353" locator="112:15-112:37" path="authoredOn" xsi:type="Property">
                        <source localId="352" locator="112:15-112:26" name="prescription" xsi:type="OperandRef"/>
                     </operand>
                  </operand>
               </low>
               <high localId="356" locator="113:5-113:150" xsi:type="Add">
                  <signature localId="369" name="t:Date" xsi:type="NamedTypeSpecifier"/>
                  <signature localId="370" name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                  <operand localId="357" locator="113:5-113:37" xsi:type="DateFrom">
                     <operand localId="360" name="ToDateTime" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <signature localId="361" name="fhir:dateTime" xsi:type="NamedTypeSpecifier"/>
                        <operand localId="359" locator="113:15-113:37" path="authoredOn" xsi:type="Property">
                           <source localId="358" locator="113:15-113:26" name="prescription" xsi:type="OperandRef"/>
                        </operand>
                     </operand>
                  </operand>
                  <operand localId="362" locator="113:41-113:150" classType="t:Quantity" xsi:type="Instance">
                     <element name="value">
                        <value localId="367" locator="113:65-113:134" name="GetDurationInDays" xsi:type="FunctionRef">
                           <operand localId="366" locator="113:83-113:133" path="expectedSupplyDuration" xsi:type="Property">
                              <source localId="365" locator="113:83-113:110" path="dispenseRequest" xsi:type="Property">
                                 <source localId="364" locator="113:83-113:94" name="prescription" xsi:type="OperandRef"/>
                              </source>
                           </operand>
                        </value>
                     </element>
                     <element name="unit">
                        <value localId="368" locator="113:143-113:148" valueType="t:String" value="days" xsi:type="Literal"/>
                     </element>
                  </operand>
               </high>
            </then>
            <else localId="373" xsi:type="As">
               <operand localId="372" locator="115:8-115:11" xsi:type="Null"/>
               <asTypeSpecifier localId="374" xsi:type="IntervalTypeSpecifier">
                  <pointType localId="375" name="t:Date" xsi:type="NamedTypeSpecifier"/>
               </asTypeSpecifier>
            </else>
         </expression>
         <operand localId="334" name="prescription">
            <operandTypeSpecifier localId="333" locator="106:61-106:82" name="fhir:MedicationRequest" xsi:type="NamedTypeSpecifier"/>
         </operand>
      </def>
      <def localId="376" locator="118:1-142:5" name="ToDaily" context="Patient" accessLevel="Public" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="376">
               <a:s>//System.Integer
define function ToDaily(frequency System.Integer, period System.Quantity):
  </a:s>
               <a:s r="381">
                  <a:s r="381">
                     <a:s>case </a:s>
                     <a:s r="383">
                        <a:s r="382">
                           <a:s>period</a:s>
                        </a:s>
                        <a:s>.</a:s>
                        <a:s r="383">
                           <a:s>unit</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s r="384">
                        <a:s>when </a:s>
                        <a:s r="385">
                           <a:s>'h'</a:s>
                        </a:s>
                        <a:s> then </a:s>
                        <a:s r="386">
                           <a:s r="387">
                              <a:s>frequency</a:s>
                           </a:s>
                           <a:s> * </a:s>
                           <a:s r="388">
                              <a:s>(</a:s>
                              <a:s r="388">
                                 <a:s r="389">24.0 / </a:s>
                                 <a:s r="391">
                                    <a:s r="390">
                                       <a:s>period</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="391">
                                       <a:s>value</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s r="399">
                        <a:s>when </a:s>
                        <a:s r="400">
                           <a:s>'min'</a:s>
                        </a:s>
                        <a:s> then </a:s>
                        <a:s r="401">
                           <a:s r="402">
                              <a:s r="403">
                                 <a:s>frequency</a:s>
                              </a:s>
                              <a:s> * </a:s>
                              <a:s r="404">
                                 <a:s>(</a:s>
                                 <a:s r="404">
                                    <a:s r="405">24.0 / </a:s>
                                    <a:s r="407">
                                       <a:s r="406">
                                          <a:s>period</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="407">
                                          <a:s>value</a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                           </a:s>
                           <a:s r="415"> * 60</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s r="421">
                        <a:s>when </a:s>
                        <a:s r="422">
                           <a:s>'s'</a:s>
                        </a:s>
                        <a:s> then </a:s>
                        <a:s r="423">
                           <a:s r="424">
                              <a:s r="425">
                                 <a:s r="426">
                                    <a:s>frequency</a:s>
                                 </a:s>
                                 <a:s> * </a:s>
                                 <a:s r="427">
                                    <a:s>(</a:s>
                                    <a:s r="427">
                                       <a:s r="428">24.0 / </a:s>
                                       <a:s r="430">
                                          <a:s r="429">
                                             <a:s>period</a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="430">
                                             <a:s>value</a:s>
                                          </a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>)</a:s>
                                 </a:s>
                              </a:s>
                              <a:s r="438"> * 60</a:s>
                           </a:s>
                           <a:s r="444"> * 60</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s r="450">
                        <a:s>when </a:s>
                        <a:s r="451">
                           <a:s>'d'</a:s>
                        </a:s>
                        <a:s> then </a:s>
                        <a:s r="452">
                           <a:s r="453">
                              <a:s r="454">
                                 <a:s>frequency</a:s>
                              </a:s>
                              <a:s> * </a:s>
                              <a:s r="455">
                                 <a:s>(</a:s>
                                 <a:s r="455">
                                    <a:s r="456">24.0 / </a:s>
                                    <a:s r="458">
                                       <a:s r="457">
                                          <a:s>period</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="458">
                                          <a:s>value</a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                           </a:s>
                           <a:s r="466"> / 24</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s r="472">
                        <a:s>when </a:s>
                        <a:s r="473">
                           <a:s>'wk'</a:s>
                        </a:s>
                        <a:s> then </a:s>
                        <a:s r="474">
                           <a:s r="475">
                              <a:s r="476">
                                 <a:s>frequency</a:s>
                              </a:s>
                              <a:s> * </a:s>
                              <a:s r="477">
                                 <a:s>(</a:s>
                                 <a:s r="477">
                                    <a:s r="478">24.0 / </a:s>
                                    <a:s r="480">
                                       <a:s r="479">
                                          <a:s>period</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="480">
                                          <a:s>value</a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                           </a:s>
                           <a:s> / </a:s>
                           <a:s r="488">
                              <a:s>(</a:s>
                              <a:s r="488">
                                 <a:s r="489">24 * 7</a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s r="498">
                        <a:s>when </a:s>
                        <a:s r="499">
                           <a:s>'mo'</a:s>
                        </a:s>
                        <a:s> then </a:s>
                        <a:s r="500">
                           <a:s r="501">
                              <a:s r="502">
                                 <a:s>frequency</a:s>
                              </a:s>
                              <a:s> * </a:s>
                              <a:s r="503">
                                 <a:s>(</a:s>
                                 <a:s r="503">
                                    <a:s r="504">24.0 / </a:s>
                                    <a:s r="506">
                                       <a:s r="505">
                                          <a:s>period</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="506">
                                          <a:s>value</a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                           </a:s>
                           <a:s> / </a:s>
                           <a:s r="514">
                              <a:s>(</a:s>
                              <a:s r="514">
                                 <a:s r="515">24 * 30</a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s> /* assuming 30 days in month */
    </a:s>
                     <a:s r="524">
                        <a:s>when </a:s>
                        <a:s r="525">
                           <a:s>'a'</a:s>
                        </a:s>
                        <a:s> then </a:s>
                        <a:s r="526">
                           <a:s r="527">
                              <a:s r="528">
                                 <a:s>frequency</a:s>
                              </a:s>
                              <a:s> * </a:s>
                              <a:s r="529">
                                 <a:s>(</a:s>
                                 <a:s r="529">
                                    <a:s r="530">24.0 / </a:s>
                                    <a:s r="532">
                                       <a:s r="531">
                                          <a:s>period</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="532">
                                          <a:s>value</a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                           </a:s>
                           <a:s> / </a:s>
                           <a:s r="540">
                              <a:s>(</a:s>
                              <a:s r="540">
                                 <a:s r="541">24 * 365</a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s> /* assuming 365 days in year */
    </a:s>
                     <a:s r="550">
                        <a:s>when </a:s>
                        <a:s r="551">
                           <a:s>'hour'</a:s>
                        </a:s>
                        <a:s> then </a:s>
                        <a:s r="552">
                           <a:s r="553">
                              <a:s>frequency</a:s>
                           </a:s>
                           <a:s> * </a:s>
                           <a:s r="554">
                              <a:s>(</a:s>
                              <a:s r="554">
                                 <a:s r="555">24.0 / </a:s>
                                 <a:s r="557">
                                    <a:s r="556">
                                       <a:s>period</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="557">
                                       <a:s>value</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s r="565">
                        <a:s>when </a:s>
                        <a:s r="566">
                           <a:s>'minute'</a:s>
                        </a:s>
                        <a:s> then </a:s>
                        <a:s r="567">
                           <a:s r="568">
                              <a:s r="569">
                                 <a:s>frequency</a:s>
                              </a:s>
                              <a:s> * </a:s>
                              <a:s r="570">
                                 <a:s>(</a:s>
                                 <a:s r="570">
                                    <a:s r="571">24.0 / </a:s>
                                    <a:s r="573">
                                       <a:s r="572">
                                          <a:s>period</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="573">
                                          <a:s>value</a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                           </a:s>
                           <a:s r="581"> * 60</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s r="587">
                        <a:s>when </a:s>
                        <a:s r="588">
                           <a:s>'second'</a:s>
                        </a:s>
                        <a:s> then </a:s>
                        <a:s r="589">
                           <a:s r="590">
                              <a:s r="591">
                                 <a:s r="592">
                                    <a:s>frequency</a:s>
                                 </a:s>
                                 <a:s> * </a:s>
                                 <a:s r="593">
                                    <a:s>(</a:s>
                                    <a:s r="593">
                                       <a:s r="594">24.0 / </a:s>
                                       <a:s r="596">
                                          <a:s r="595">
                                             <a:s>period</a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="596">
                                             <a:s>value</a:s>
                                          </a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>)</a:s>
                                 </a:s>
                              </a:s>
                              <a:s r="604"> * 60</a:s>
                           </a:s>
                           <a:s r="610"> * 60</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s r="616">
                        <a:s>when </a:s>
                        <a:s r="617">
                           <a:s>'day'</a:s>
                        </a:s>
                        <a:s> then </a:s>
                        <a:s r="618">
                           <a:s r="619">
                              <a:s r="620">
                                 <a:s>frequency</a:s>
                              </a:s>
                              <a:s> * </a:s>
                              <a:s r="621">
                                 <a:s>(</a:s>
                                 <a:s r="621">
                                    <a:s r="622">24.0 / </a:s>
                                    <a:s r="624">
                                       <a:s r="623">
                                          <a:s>period</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="624">
                                          <a:s>value</a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                           </a:s>
                           <a:s r="632"> / 24</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s r="638">
                        <a:s>when </a:s>
                        <a:s r="639">
                           <a:s>'week'</a:s>
                        </a:s>
                        <a:s> then </a:s>
                        <a:s r="640">
                           <a:s r="641">
                              <a:s r="642">
                                 <a:s>frequency</a:s>
                              </a:s>
                              <a:s> * </a:s>
                              <a:s r="643">
                                 <a:s>(</a:s>
                                 <a:s r="643">
                                    <a:s r="644">24.0 / </a:s>
                                    <a:s r="646">
                                       <a:s r="645">
                                          <a:s>period</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="646">
                                          <a:s>value</a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                           </a:s>
                           <a:s> / </a:s>
                           <a:s r="654">
                              <a:s>(</a:s>
                              <a:s r="654">
                                 <a:s r="655">24 * 7</a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s r="664">
                        <a:s>when </a:s>
                        <a:s r="665">
                           <a:s>'month'</a:s>
                        </a:s>
                        <a:s> then </a:s>
                        <a:s r="666">
                           <a:s r="667">
                              <a:s r="668">
                                 <a:s>frequency</a:s>
                              </a:s>
                              <a:s> * </a:s>
                              <a:s r="669">
                                 <a:s>(</a:s>
                                 <a:s r="669">
                                    <a:s r="670">24.0 / </a:s>
                                    <a:s r="672">
                                       <a:s r="671">
                                          <a:s>period</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="672">
                                          <a:s>value</a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                           </a:s>
                           <a:s> / </a:s>
                           <a:s r="680">
                              <a:s>(</a:s>
                              <a:s r="680">
                                 <a:s r="681">24 * 30</a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s> /* assuming 30 days in month */
    </a:s>
                     <a:s r="690">
                        <a:s>when </a:s>
                        <a:s r="691">
                           <a:s>'year'</a:s>
                        </a:s>
                        <a:s> then </a:s>
                        <a:s r="692">
                           <a:s r="693">
                              <a:s r="694">
                                 <a:s>frequency</a:s>
                              </a:s>
                              <a:s> * </a:s>
                              <a:s r="695">
                                 <a:s>(</a:s>
                                 <a:s r="695">
                                    <a:s r="696">24.0 / </a:s>
                                    <a:s r="698">
                                       <a:s r="697">
                                          <a:s>period</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="698">
                                          <a:s>value</a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                           </a:s>
                           <a:s> / </a:s>
                           <a:s r="706">
                              <a:s>(</a:s>
                              <a:s r="706">
                                 <a:s r="707">24 * 365</a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s> /* assuming 365 days in year */
    </a:s>
                     <a:s r="716">
                        <a:s>when </a:s>
                        <a:s r="717">
                           <a:s>'hours'</a:s>
                        </a:s>
                        <a:s> then </a:s>
                        <a:s r="718">
                           <a:s r="719">
                              <a:s>frequency</a:s>
                           </a:s>
                           <a:s> * </a:s>
                           <a:s r="720">
                              <a:s>(</a:s>
                              <a:s r="720">
                                 <a:s r="721">24.0 / </a:s>
                                 <a:s r="723">
                                    <a:s r="722">
                                       <a:s>period</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="723">
                                       <a:s>value</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s r="731">
                        <a:s>when </a:s>
                        <a:s r="732">
                           <a:s>'minutes'</a:s>
                        </a:s>
                        <a:s> then </a:s>
                        <a:s r="733">
                           <a:s r="734">
                              <a:s r="735">
                                 <a:s>frequency</a:s>
                              </a:s>
                              <a:s> * </a:s>
                              <a:s r="736">
                                 <a:s>(</a:s>
                                 <a:s r="736">
                                    <a:s r="737">24.0 / </a:s>
                                    <a:s r="739">
                                       <a:s r="738">
                                          <a:s>period</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="739">
                                          <a:s>value</a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                           </a:s>
                           <a:s r="747"> * 60</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s r="753">
                        <a:s>when </a:s>
                        <a:s r="754">
                           <a:s>'seconds'</a:s>
                        </a:s>
                        <a:s> then </a:s>
                        <a:s r="755">
                           <a:s r="756">
                              <a:s r="757">
                                 <a:s r="758">
                                    <a:s>frequency</a:s>
                                 </a:s>
                                 <a:s> * </a:s>
                                 <a:s r="759">
                                    <a:s>(</a:s>
                                    <a:s r="759">
                                       <a:s r="760">24.0 / </a:s>
                                       <a:s r="762">
                                          <a:s r="761">
                                             <a:s>period</a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="762">
                                             <a:s>value</a:s>
                                          </a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>)</a:s>
                                 </a:s>
                              </a:s>
                              <a:s r="770"> * 60</a:s>
                           </a:s>
                           <a:s r="776"> * 60</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s r="782">
                        <a:s>when </a:s>
                        <a:s r="783">
                           <a:s>'days'</a:s>
                        </a:s>
                        <a:s> then </a:s>
                        <a:s r="784">
                           <a:s r="785">
                              <a:s r="786">
                                 <a:s>frequency</a:s>
                              </a:s>
                              <a:s> * </a:s>
                              <a:s r="787">
                                 <a:s>(</a:s>
                                 <a:s r="787">
                                    <a:s r="788">24.0 / </a:s>
                                    <a:s r="790">
                                       <a:s r="789">
                                          <a:s>period</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="790">
                                          <a:s>value</a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                           </a:s>
                           <a:s r="798"> / 24</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s r="804">
                        <a:s>when </a:s>
                        <a:s r="805">
                           <a:s>'weeks'</a:s>
                        </a:s>
                        <a:s> then </a:s>
                        <a:s r="806">
                           <a:s r="807">
                              <a:s r="808">
                                 <a:s>frequency</a:s>
                              </a:s>
                              <a:s> * </a:s>
                              <a:s r="809">
                                 <a:s>(</a:s>
                                 <a:s r="809">
                                    <a:s r="810">24.0 / </a:s>
                                    <a:s r="812">
                                       <a:s r="811">
                                          <a:s>period</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="812">
                                          <a:s>value</a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                           </a:s>
                           <a:s> / </a:s>
                           <a:s r="820">
                              <a:s>(</a:s>
                              <a:s r="820">
                                 <a:s r="821">24 * 7</a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s r="830">
                        <a:s>when </a:s>
                        <a:s r="831">
                           <a:s>'months'</a:s>
                        </a:s>
                        <a:s> then </a:s>
                        <a:s r="832">
                           <a:s r="833">
                              <a:s r="834">
                                 <a:s>frequency</a:s>
                              </a:s>
                              <a:s> * </a:s>
                              <a:s r="835">
                                 <a:s>(</a:s>
                                 <a:s r="835">
                                    <a:s r="836">24.0 / </a:s>
                                    <a:s r="838">
                                       <a:s r="837">
                                          <a:s>period</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="838">
                                          <a:s>value</a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                           </a:s>
                           <a:s> / </a:s>
                           <a:s r="846">
                              <a:s>(</a:s>
                              <a:s r="846">
                                 <a:s r="847">24 * 30</a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s> /* assuming 30 days in month */
    </a:s>
                     <a:s r="856">
                        <a:s>when </a:s>
                        <a:s r="857">
                           <a:s>'years'</a:s>
                        </a:s>
                        <a:s> then </a:s>
                        <a:s r="858">
                           <a:s r="859">
                              <a:s r="860">
                                 <a:s>frequency</a:s>
                              </a:s>
                              <a:s> * </a:s>
                              <a:s r="861">
                                 <a:s>(</a:s>
                                 <a:s r="861">
                                    <a:s r="862">24.0 / </a:s>
                                    <a:s r="864">
                                       <a:s r="863">
                                          <a:s>period</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="864">
                                          <a:s>value</a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                           </a:s>
                           <a:s> / </a:s>
                           <a:s r="872">
                              <a:s>(</a:s>
                              <a:s r="872">
                                 <a:s r="873">24 * 365</a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s r="882"> /* assuming 365 days in year */
    else null
  end</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="381" locator="119:3-142:5" xsi:type="Case">
            <comparand localId="383" locator="119:8-119:18" path="unit" xsi:type="Property">
               <source localId="382" locator="119:8-119:13" name="period" xsi:type="OperandRef"/>
            </comparand>
            <caseItem localId="384" locator="120:5-120:51">
               <when localId="385" locator="120:10-120:12" valueType="t:String" value="h" xsi:type="Literal"/>
               <then localId="386" locator="120:19-120:51" xsi:type="Multiply">
                  <signature localId="397" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                  <signature localId="398" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                  <operand localId="395" xsi:type="ToDecimal">
                     <signature localId="396" name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                     <operand localId="387" locator="120:19-120:27" name="frequency" xsi:type="OperandRef"/>
                  </operand>
                  <operand localId="388" locator="120:31-120:51" xsi:type="Divide">
                     <signature localId="392" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                     <signature localId="393" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                     <operand localId="389" locator="120:32-120:35" valueType="t:Decimal" value="24.0" xsi:type="Literal"/>
                     <operand localId="391" locator="120:39-120:50" path="value" xsi:type="Property">
                        <source localId="390" locator="120:39-120:44" name="period" xsi:type="OperandRef"/>
                     </operand>
                  </operand>
               </then>
            </caseItem>
            <caseItem localId="399" locator="121:5-121:58">
               <when localId="400" locator="121:10-121:14" valueType="t:String" value="min" xsi:type="Literal"/>
               <then localId="401" locator="121:21-121:58" xsi:type="Multiply">
                  <signature localId="419" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                  <signature localId="420" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                  <operand localId="402" locator="121:21-121:53" xsi:type="Multiply">
                     <signature localId="413" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                     <signature localId="414" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                     <operand localId="411" xsi:type="ToDecimal">
                        <signature localId="412" name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                        <operand localId="403" locator="121:21-121:29" name="frequency" xsi:type="OperandRef"/>
                     </operand>
                     <operand localId="404" locator="121:33-121:53" xsi:type="Divide">
                        <signature localId="408" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                        <signature localId="409" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                        <operand localId="405" locator="121:34-121:37" valueType="t:Decimal" value="24.0" xsi:type="Literal"/>
                        <operand localId="407" locator="121:41-121:52" path="value" xsi:type="Property">
                           <source localId="406" locator="121:41-121:46" name="period" xsi:type="OperandRef"/>
                        </operand>
                     </operand>
                  </operand>
                  <operand localId="417" xsi:type="ToDecimal">
                     <signature localId="418" name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                     <operand localId="415" locator="121:57-121:58" valueType="t:Integer" value="60" xsi:type="Literal"/>
                  </operand>
               </then>
            </caseItem>
            <caseItem localId="421" locator="122:5-122:61">
               <when localId="422" locator="122:10-122:12" valueType="t:String" value="s" xsi:type="Literal"/>
               <then localId="423" locator="122:19-122:61" xsi:type="Multiply">
                  <signature localId="448" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                  <signature localId="449" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                  <operand localId="424" locator="122:19-122:56" xsi:type="Multiply">
                     <signature localId="442" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                     <signature localId="443" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                     <operand localId="425" locator="122:19-122:51" xsi:type="Multiply">
                        <signature localId="436" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                        <signature localId="437" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                        <operand localId="434" xsi:type="ToDecimal">
                           <signature localId="435" name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                           <operand localId="426" locator="122:19-122:27" name="frequency" xsi:type="OperandRef"/>
                        </operand>
                        <operand localId="427" locator="122:31-122:51" xsi:type="Divide">
                           <signature localId="431" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                           <signature localId="432" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                           <operand localId="428" locator="122:32-122:35" valueType="t:Decimal" value="24.0" xsi:type="Literal"/>
                           <operand localId="430" locator="122:39-122:50" path="value" xsi:type="Property">
                              <source localId="429" locator="122:39-122:44" name="period" xsi:type="OperandRef"/>
                           </operand>
                        </operand>
                     </operand>
                     <operand localId="440" xsi:type="ToDecimal">
                        <signature localId="441" name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                        <operand localId="438" locator="122:55-122:56" valueType="t:Integer" value="60" xsi:type="Literal"/>
                     </operand>
                  </operand>
                  <operand localId="446" xsi:type="ToDecimal">
                     <signature localId="447" name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                     <operand localId="444" locator="122:60-122:61" valueType="t:Integer" value="60" xsi:type="Literal"/>
                  </operand>
               </then>
            </caseItem>
            <caseItem localId="450" locator="123:5-123:56">
               <when localId="451" locator="123:10-123:12" valueType="t:String" value="d" xsi:type="Literal"/>
               <then localId="452" locator="123:19-123:56" xsi:type="Divide">
                  <signature localId="470" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                  <signature localId="471" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                  <operand localId="453" locator="123:19-123:51" xsi:type="Multiply">
                     <signature localId="464" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                     <signature localId="465" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                     <operand localId="462" xsi:type="ToDecimal">
                        <signature localId="463" name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                        <operand localId="454" locator="123:19-123:27" name="frequency" xsi:type="OperandRef"/>
                     </operand>
                     <operand localId="455" locator="123:31-123:51" xsi:type="Divide">
                        <signature localId="459" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                        <signature localId="460" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                        <operand localId="456" locator="123:32-123:35" valueType="t:Decimal" value="24.0" xsi:type="Literal"/>
                        <operand localId="458" locator="123:39-123:50" path="value" xsi:type="Property">
                           <source localId="457" locator="123:39-123:44" name="period" xsi:type="OperandRef"/>
                        </operand>
                     </operand>
                  </operand>
                  <operand localId="468" xsi:type="ToDecimal">
                     <signature localId="469" name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                     <operand localId="466" locator="123:55-123:56" valueType="t:Integer" value="24" xsi:type="Literal"/>
                  </operand>
               </then>
            </caseItem>
            <caseItem localId="472" locator="124:5-124:63">
               <when localId="473" locator="124:10-124:13" valueType="t:String" value="wk" xsi:type="Literal"/>
               <then localId="474" locator="124:20-124:63" xsi:type="Divide">
                  <signature localId="496" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                  <signature localId="497" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                  <operand localId="475" locator="124:20-124:52" xsi:type="Multiply">
                     <signature localId="486" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                     <signature localId="487" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                     <operand localId="484" xsi:type="ToDecimal">
                        <signature localId="485" name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                        <operand localId="476" locator="124:20-124:28" name="frequency" xsi:type="OperandRef"/>
                     </operand>
                     <operand localId="477" locator="124:32-124:52" xsi:type="Divide">
                        <signature localId="481" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                        <signature localId="482" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                        <operand localId="478" locator="124:33-124:36" valueType="t:Decimal" value="24.0" xsi:type="Literal"/>
                        <operand localId="480" locator="124:40-124:51" path="value" xsi:type="Property">
                           <source localId="479" locator="124:40-124:45" name="period" xsi:type="OperandRef"/>
                        </operand>
                     </operand>
                  </operand>
                  <operand localId="494" xsi:type="ToDecimal">
                     <signature localId="495" name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                     <operand localId="488" locator="124:56-124:63" xsi:type="Multiply">
                        <signature localId="491" name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                        <signature localId="492" name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                        <operand localId="489" locator="124:57-124:58" valueType="t:Integer" value="24" xsi:type="Literal"/>
                        <operand localId="490" locator="124:62" valueType="t:Integer" value="7" xsi:type="Literal"/>
                     </operand>
                  </operand>
               </then>
            </caseItem>
            <caseItem localId="498" locator="125:5-125:64">
               <when localId="499" locator="125:10-125:13" valueType="t:String" value="mo" xsi:type="Literal"/>
               <then localId="500" locator="125:20-125:64" xsi:type="Divide">
                  <signature localId="522" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                  <signature localId="523" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                  <operand localId="501" locator="125:20-125:52" xsi:type="Multiply">
                     <signature localId="512" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                     <signature localId="513" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                     <operand localId="510" xsi:type="ToDecimal">
                        <signature localId="511" name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                        <operand localId="502" locator="125:20-125:28" name="frequency" xsi:type="OperandRef"/>
                     </operand>
                     <operand localId="503" locator="125:32-125:52" xsi:type="Divide">
                        <signature localId="507" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                        <signature localId="508" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                        <operand localId="504" locator="125:33-125:36" valueType="t:Decimal" value="24.0" xsi:type="Literal"/>
                        <operand localId="506" locator="125:40-125:51" path="value" xsi:type="Property">
                           <source localId="505" locator="125:40-125:45" name="period" xsi:type="OperandRef"/>
                        </operand>
                     </operand>
                  </operand>
                  <operand localId="520" xsi:type="ToDecimal">
                     <signature localId="521" name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                     <operand localId="514" locator="125:56-125:64" xsi:type="Multiply">
                        <signature localId="517" name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                        <signature localId="518" name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                        <operand localId="515" locator="125:57-125:58" valueType="t:Integer" value="24" xsi:type="Literal"/>
                        <operand localId="516" locator="125:62-125:63" valueType="t:Integer" value="30" xsi:type="Literal"/>
                     </operand>
                  </operand>
               </then>
            </caseItem>
            <caseItem localId="524" locator="126:5-126:64">
               <when localId="525" locator="126:10-126:12" valueType="t:String" value="a" xsi:type="Literal"/>
               <then localId="526" locator="126:19-126:64" xsi:type="Divide">
                  <signature localId="548" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                  <signature localId="549" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                  <operand localId="527" locator="126:19-126:51" xsi:type="Multiply">
                     <signature localId="538" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                     <signature localId="539" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                     <operand localId="536" xsi:type="ToDecimal">
                        <signature localId="537" name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                        <operand localId="528" locator="126:19-126:27" name="frequency" xsi:type="OperandRef"/>
                     </operand>
                     <operand localId="529" locator="126:31-126:51" xsi:type="Divide">
                        <signature localId="533" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                        <signature localId="534" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                        <operand localId="530" locator="126:32-126:35" valueType="t:Decimal" value="24.0" xsi:type="Literal"/>
                        <operand localId="532" locator="126:39-126:50" path="value" xsi:type="Property">
                           <source localId="531" locator="126:39-126:44" name="period" xsi:type="OperandRef"/>
                        </operand>
                     </operand>
                  </operand>
                  <operand localId="546" xsi:type="ToDecimal">
                     <signature localId="547" name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                     <operand localId="540" locator="126:55-126:64" xsi:type="Multiply">
                        <signature localId="543" name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                        <signature localId="544" name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                        <operand localId="541" locator="126:56-126:57" valueType="t:Integer" value="24" xsi:type="Literal"/>
                        <operand localId="542" locator="126:61-126:63" valueType="t:Integer" value="365" xsi:type="Literal"/>
                     </operand>
                  </operand>
               </then>
            </caseItem>
            <caseItem localId="550" locator="127:5-127:54">
               <when localId="551" locator="127:10-127:15" valueType="t:String" value="hour" xsi:type="Literal"/>
               <then localId="552" locator="127:22-127:54" xsi:type="Multiply">
                  <signature localId="563" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                  <signature localId="564" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                  <operand localId="561" xsi:type="ToDecimal">
                     <signature localId="562" name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                     <operand localId="553" locator="127:22-127:30" name="frequency" xsi:type="OperandRef"/>
                  </operand>
                  <operand localId="554" locator="127:34-127:54" xsi:type="Divide">
                     <signature localId="558" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                     <signature localId="559" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                     <operand localId="555" locator="127:35-127:38" valueType="t:Decimal" value="24.0" xsi:type="Literal"/>
                     <operand localId="557" locator="127:42-127:53" path="value" xsi:type="Property">
                        <source localId="556" locator="127:42-127:47" name="period" xsi:type="OperandRef"/>
                     </operand>
                  </operand>
               </then>
            </caseItem>
            <caseItem localId="565" locator="128:5-128:61">
               <when localId="566" locator="128:10-128:17" valueType="t:String" value="minute" xsi:type="Literal"/>
               <then localId="567" locator="128:24-128:61" xsi:type="Multiply">
                  <signature localId="585" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                  <signature localId="586" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                  <operand localId="568" locator="128:24-128:56" xsi:type="Multiply">
                     <signature localId="579" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                     <signature localId="580" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                     <operand localId="577" xsi:type="ToDecimal">
                        <signature localId="578" name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                        <operand localId="569" locator="128:24-128:32" name="frequency" xsi:type="OperandRef"/>
                     </operand>
                     <operand localId="570" locator="128:36-128:56" xsi:type="Divide">
                        <signature localId="574" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                        <signature localId="575" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                        <operand localId="571" locator="128:37-128:40" valueType="t:Decimal" value="24.0" xsi:type="Literal"/>
                        <operand localId="573" locator="128:44-128:55" path="value" xsi:type="Property">
                           <source localId="572" locator="128:44-128:49" name="period" xsi:type="OperandRef"/>
                        </operand>
                     </operand>
                  </operand>
                  <operand localId="583" xsi:type="ToDecimal">
                     <signature localId="584" name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                     <operand localId="581" locator="128:60-128:61" valueType="t:Integer" value="60" xsi:type="Literal"/>
                  </operand>
               </then>
            </caseItem>
            <caseItem localId="587" locator="129:5-129:66">
               <when localId="588" locator="129:10-129:17" valueType="t:String" value="second" xsi:type="Literal"/>
               <then localId="589" locator="129:24-129:66" xsi:type="Multiply">
                  <signature localId="614" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                  <signature localId="615" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                  <operand localId="590" locator="129:24-129:61" xsi:type="Multiply">
                     <signature localId="608" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                     <signature localId="609" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                     <operand localId="591" locator="129:24-129:56" xsi:type="Multiply">
                        <signature localId="602" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                        <signature localId="603" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                        <operand localId="600" xsi:type="ToDecimal">
                           <signature localId="601" name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                           <operand localId="592" locator="129:24-129:32" name="frequency" xsi:type="OperandRef"/>
                        </operand>
                        <operand localId="593" locator="129:36-129:56" xsi:type="Divide">
                           <signature localId="597" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                           <signature localId="598" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                           <operand localId="594" locator="129:37-129:40" valueType="t:Decimal" value="24.0" xsi:type="Literal"/>
                           <operand localId="596" locator="129:44-129:55" path="value" xsi:type="Property">
                              <source localId="595" locator="129:44-129:49" name="period" xsi:type="OperandRef"/>
                           </operand>
                        </operand>
                     </operand>
                     <operand localId="606" xsi:type="ToDecimal">
                        <signature localId="607" name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                        <operand localId="604" locator="129:60-129:61" valueType="t:Integer" value="60" xsi:type="Literal"/>
                     </operand>
                  </operand>
                  <operand localId="612" xsi:type="ToDecimal">
                     <signature localId="613" name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                     <operand localId="610" locator="129:65-129:66" valueType="t:Integer" value="60" xsi:type="Literal"/>
                  </operand>
               </then>
            </caseItem>
            <caseItem localId="616" locator="130:5-130:58">
               <when localId="617" locator="130:10-130:14" valueType="t:String" value="day" xsi:type="Literal"/>
               <then localId="618" locator="130:21-130:58" xsi:type="Divide">
                  <signature localId="636" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                  <signature localId="637" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                  <operand localId="619" locator="130:21-130:53" xsi:type="Multiply">
                     <signature localId="630" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                     <signature localId="631" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                     <operand localId="628" xsi:type="ToDecimal">
                        <signature localId="629" name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                        <operand localId="620" locator="130:21-130:29" name="frequency" xsi:type="OperandRef"/>
                     </operand>
                     <operand localId="621" locator="130:33-130:53" xsi:type="Divide">
                        <signature localId="625" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                        <signature localId="626" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                        <operand localId="622" locator="130:34-130:37" valueType="t:Decimal" value="24.0" xsi:type="Literal"/>
                        <operand localId="624" locator="130:41-130:52" path="value" xsi:type="Property">
                           <source localId="623" locator="130:41-130:46" name="period" xsi:type="OperandRef"/>
                        </operand>
                     </operand>
                  </operand>
                  <operand localId="634" xsi:type="ToDecimal">
                     <signature localId="635" name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                     <operand localId="632" locator="130:57-130:58" valueType="t:Integer" value="24" xsi:type="Literal"/>
                  </operand>
               </then>
            </caseItem>
            <caseItem localId="638" locator="131:5-131:65">
               <when localId="639" locator="131:10-131:15" valueType="t:String" value="week" xsi:type="Literal"/>
               <then localId="640" locator="131:22-131:65" xsi:type="Divide">
                  <signature localId="662" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                  <signature localId="663" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                  <operand localId="641" locator="131:22-131:54" xsi:type="Multiply">
                     <signature localId="652" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                     <signature localId="653" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                     <operand localId="650" xsi:type="ToDecimal">
                        <signature localId="651" name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                        <operand localId="642" locator="131:22-131:30" name="frequency" xsi:type="OperandRef"/>
                     </operand>
                     <operand localId="643" locator="131:34-131:54" xsi:type="Divide">
                        <signature localId="647" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                        <signature localId="648" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                        <operand localId="644" locator="131:35-131:38" valueType="t:Decimal" value="24.0" xsi:type="Literal"/>
                        <operand localId="646" locator="131:42-131:53" path="value" xsi:type="Property">
                           <source localId="645" locator="131:42-131:47" name="period" xsi:type="OperandRef"/>
                        </operand>
                     </operand>
                  </operand>
                  <operand localId="660" xsi:type="ToDecimal">
                     <signature localId="661" name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                     <operand localId="654" locator="131:58-131:65" xsi:type="Multiply">
                        <signature localId="657" name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                        <signature localId="658" name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                        <operand localId="655" locator="131:59-131:60" valueType="t:Integer" value="24" xsi:type="Literal"/>
                        <operand localId="656" locator="131:64" valueType="t:Integer" value="7" xsi:type="Literal"/>
                     </operand>
                  </operand>
               </then>
            </caseItem>
            <caseItem localId="664" locator="132:5-132:67">
               <when localId="665" locator="132:10-132:16" valueType="t:String" value="month" xsi:type="Literal"/>
               <then localId="666" locator="132:23-132:67" xsi:type="Divide">
                  <signature localId="688" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                  <signature localId="689" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                  <operand localId="667" locator="132:23-132:55" xsi:type="Multiply">
                     <signature localId="678" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                     <signature localId="679" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                     <operand localId="676" xsi:type="ToDecimal">
                        <signature localId="677" name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                        <operand localId="668" locator="132:23-132:31" name="frequency" xsi:type="OperandRef"/>
                     </operand>
                     <operand localId="669" locator="132:35-132:55" xsi:type="Divide">
                        <signature localId="673" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                        <signature localId="674" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                        <operand localId="670" locator="132:36-132:39" valueType="t:Decimal" value="24.0" xsi:type="Literal"/>
                        <operand localId="672" locator="132:43-132:54" path="value" xsi:type="Property">
                           <source localId="671" locator="132:43-132:48" name="period" xsi:type="OperandRef"/>
                        </operand>
                     </operand>
                  </operand>
                  <operand localId="686" xsi:type="ToDecimal">
                     <signature localId="687" name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                     <operand localId="680" locator="132:59-132:67" xsi:type="Multiply">
                        <signature localId="683" name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                        <signature localId="684" name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                        <operand localId="681" locator="132:60-132:61" valueType="t:Integer" value="24" xsi:type="Literal"/>
                        <operand localId="682" locator="132:65-132:66" valueType="t:Integer" value="30" xsi:type="Literal"/>
                     </operand>
                  </operand>
               </then>
            </caseItem>
            <caseItem localId="690" locator="133:5-133:67">
               <when localId="691" locator="133:10-133:15" valueType="t:String" value="year" xsi:type="Literal"/>
               <then localId="692" locator="133:22-133:67" xsi:type="Divide">
                  <signature localId="714" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                  <signature localId="715" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                  <operand localId="693" locator="133:22-133:54" xsi:type="Multiply">
                     <signature localId="704" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                     <signature localId="705" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                     <operand localId="702" xsi:type="ToDecimal">
                        <signature localId="703" name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                        <operand localId="694" locator="133:22-133:30" name="frequency" xsi:type="OperandRef"/>
                     </operand>
                     <operand localId="695" locator="133:34-133:54" xsi:type="Divide">
                        <signature localId="699" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                        <signature localId="700" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                        <operand localId="696" locator="133:35-133:38" valueType="t:Decimal" value="24.0" xsi:type="Literal"/>
                        <operand localId="698" locator="133:42-133:53" path="value" xsi:type="Property">
                           <source localId="697" locator="133:42-133:47" name="period" xsi:type="OperandRef"/>
                        </operand>
                     </operand>
                  </operand>
                  <operand localId="712" xsi:type="ToDecimal">
                     <signature localId="713" name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                     <operand localId="706" locator="133:58-133:67" xsi:type="Multiply">
                        <signature localId="709" name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                        <signature localId="710" name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                        <operand localId="707" locator="133:59-133:60" valueType="t:Integer" value="24" xsi:type="Literal"/>
                        <operand localId="708" locator="133:64-133:66" valueType="t:Integer" value="365" xsi:type="Literal"/>
                     </operand>
                  </operand>
               </then>
            </caseItem>
            <caseItem localId="716" locator="134:5-134:55">
               <when localId="717" locator="134:10-134:16" valueType="t:String" value="hours" xsi:type="Literal"/>
               <then localId="718" locator="134:23-134:55" xsi:type="Multiply">
                  <signature localId="729" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                  <signature localId="730" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                  <operand localId="727" xsi:type="ToDecimal">
                     <signature localId="728" name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                     <operand localId="719" locator="134:23-134:31" name="frequency" xsi:type="OperandRef"/>
                  </operand>
                  <operand localId="720" locator="134:35-134:55" xsi:type="Divide">
                     <signature localId="724" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                     <signature localId="725" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                     <operand localId="721" locator="134:36-134:39" valueType="t:Decimal" value="24.0" xsi:type="Literal"/>
                     <operand localId="723" locator="134:43-134:54" path="value" xsi:type="Property">
                        <source localId="722" locator="134:43-134:48" name="period" xsi:type="OperandRef"/>
                     </operand>
                  </operand>
               </then>
            </caseItem>
            <caseItem localId="731" locator="135:5-135:62">
               <when localId="732" locator="135:10-135:18" valueType="t:String" value="minutes" xsi:type="Literal"/>
               <then localId="733" locator="135:25-135:62" xsi:type="Multiply">
                  <signature localId="751" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                  <signature localId="752" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                  <operand localId="734" locator="135:25-135:57" xsi:type="Multiply">
                     <signature localId="745" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                     <signature localId="746" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                     <operand localId="743" xsi:type="ToDecimal">
                        <signature localId="744" name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                        <operand localId="735" locator="135:25-135:33" name="frequency" xsi:type="OperandRef"/>
                     </operand>
                     <operand localId="736" locator="135:37-135:57" xsi:type="Divide">
                        <signature localId="740" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                        <signature localId="741" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                        <operand localId="737" locator="135:38-135:41" valueType="t:Decimal" value="24.0" xsi:type="Literal"/>
                        <operand localId="739" locator="135:45-135:56" path="value" xsi:type="Property">
                           <source localId="738" locator="135:45-135:50" name="period" xsi:type="OperandRef"/>
                        </operand>
                     </operand>
                  </operand>
                  <operand localId="749" xsi:type="ToDecimal">
                     <signature localId="750" name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                     <operand localId="747" locator="135:61-135:62" valueType="t:Integer" value="60" xsi:type="Literal"/>
                  </operand>
               </then>
            </caseItem>
            <caseItem localId="753" locator="136:5-136:67">
               <when localId="754" locator="136:10-136:18" valueType="t:String" value="seconds" xsi:type="Literal"/>
               <then localId="755" locator="136:25-136:67" xsi:type="Multiply">
                  <signature localId="780" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                  <signature localId="781" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                  <operand localId="756" locator="136:25-136:62" xsi:type="Multiply">
                     <signature localId="774" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                     <signature localId="775" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                     <operand localId="757" locator="136:25-136:57" xsi:type="Multiply">
                        <signature localId="768" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                        <signature localId="769" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                        <operand localId="766" xsi:type="ToDecimal">
                           <signature localId="767" name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                           <operand localId="758" locator="136:25-136:33" name="frequency" xsi:type="OperandRef"/>
                        </operand>
                        <operand localId="759" locator="136:37-136:57" xsi:type="Divide">
                           <signature localId="763" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                           <signature localId="764" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                           <operand localId="760" locator="136:38-136:41" valueType="t:Decimal" value="24.0" xsi:type="Literal"/>
                           <operand localId="762" locator="136:45-136:56" path="value" xsi:type="Property">
                              <source localId="761" locator="136:45-136:50" name="period" xsi:type="OperandRef"/>
                           </operand>
                        </operand>
                     </operand>
                     <operand localId="772" xsi:type="ToDecimal">
                        <signature localId="773" name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                        <operand localId="770" locator="136:61-136:62" valueType="t:Integer" value="60" xsi:type="Literal"/>
                     </operand>
                  </operand>
                  <operand localId="778" xsi:type="ToDecimal">
                     <signature localId="779" name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                     <operand localId="776" locator="136:66-136:67" valueType="t:Integer" value="60" xsi:type="Literal"/>
                  </operand>
               </then>
            </caseItem>
            <caseItem localId="782" locator="137:5-137:59">
               <when localId="783" locator="137:10-137:15" valueType="t:String" value="days" xsi:type="Literal"/>
               <then localId="784" locator="137:22-137:59" xsi:type="Divide">
                  <signature localId="802" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                  <signature localId="803" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                  <operand localId="785" locator="137:22-137:54" xsi:type="Multiply">
                     <signature localId="796" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                     <signature localId="797" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                     <operand localId="794" xsi:type="ToDecimal">
                        <signature localId="795" name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                        <operand localId="786" locator="137:22-137:30" name="frequency" xsi:type="OperandRef"/>
                     </operand>
                     <operand localId="787" locator="137:34-137:54" xsi:type="Divide">
                        <signature localId="791" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                        <signature localId="792" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                        <operand localId="788" locator="137:35-137:38" valueType="t:Decimal" value="24.0" xsi:type="Literal"/>
                        <operand localId="790" locator="137:42-137:53" path="value" xsi:type="Property">
                           <source localId="789" locator="137:42-137:47" name="period" xsi:type="OperandRef"/>
                        </operand>
                     </operand>
                  </operand>
                  <operand localId="800" xsi:type="ToDecimal">
                     <signature localId="801" name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                     <operand localId="798" locator="137:58-137:59" valueType="t:Integer" value="24" xsi:type="Literal"/>
                  </operand>
               </then>
            </caseItem>
            <caseItem localId="804" locator="138:5-138:66">
               <when localId="805" locator="138:10-138:16" valueType="t:String" value="weeks" xsi:type="Literal"/>
               <then localId="806" locator="138:23-138:66" xsi:type="Divide">
                  <signature localId="828" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                  <signature localId="829" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                  <operand localId="807" locator="138:23-138:55" xsi:type="Multiply">
                     <signature localId="818" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                     <signature localId="819" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                     <operand localId="816" xsi:type="ToDecimal">
                        <signature localId="817" name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                        <operand localId="808" locator="138:23-138:31" name="frequency" xsi:type="OperandRef"/>
                     </operand>
                     <operand localId="809" locator="138:35-138:55" xsi:type="Divide">
                        <signature localId="813" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                        <signature localId="814" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                        <operand localId="810" locator="138:36-138:39" valueType="t:Decimal" value="24.0" xsi:type="Literal"/>
                        <operand localId="812" locator="138:43-138:54" path="value" xsi:type="Property">
                           <source localId="811" locator="138:43-138:48" name="period" xsi:type="OperandRef"/>
                        </operand>
                     </operand>
                  </operand>
                  <operand localId="826" xsi:type="ToDecimal">
                     <signature localId="827" name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                     <operand localId="820" locator="138:59-138:66" xsi:type="Multiply">
                        <signature localId="823" name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                        <signature localId="824" name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                        <operand localId="821" locator="138:60-138:61" valueType="t:Integer" value="24" xsi:type="Literal"/>
                        <operand localId="822" locator="138:65" valueType="t:Integer" value="7" xsi:type="Literal"/>
                     </operand>
                  </operand>
               </then>
            </caseItem>
            <caseItem localId="830" locator="139:5-139:68">
               <when localId="831" locator="139:10-139:17" valueType="t:String" value="months" xsi:type="Literal"/>
               <then localId="832" locator="139:24-139:68" xsi:type="Divide">
                  <signature localId="854" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                  <signature localId="855" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                  <operand localId="833" locator="139:24-139:56" xsi:type="Multiply">
                     <signature localId="844" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                     <signature localId="845" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                     <operand localId="842" xsi:type="ToDecimal">
                        <signature localId="843" name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                        <operand localId="834" locator="139:24-139:32" name="frequency" xsi:type="OperandRef"/>
                     </operand>
                     <operand localId="835" locator="139:36-139:56" xsi:type="Divide">
                        <signature localId="839" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                        <signature localId="840" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                        <operand localId="836" locator="139:37-139:40" valueType="t:Decimal" value="24.0" xsi:type="Literal"/>
                        <operand localId="838" locator="139:44-139:55" path="value" xsi:type="Property">
                           <source localId="837" locator="139:44-139:49" name="period" xsi:type="OperandRef"/>
                        </operand>
                     </operand>
                  </operand>
                  <operand localId="852" xsi:type="ToDecimal">
                     <signature localId="853" name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                     <operand localId="846" locator="139:60-139:68" xsi:type="Multiply">
                        <signature localId="849" name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                        <signature localId="850" name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                        <operand localId="847" locator="139:61-139:62" valueType="t:Integer" value="24" xsi:type="Literal"/>
                        <operand localId="848" locator="139:66-139:67" valueType="t:Integer" value="30" xsi:type="Literal"/>
                     </operand>
                  </operand>
               </then>
            </caseItem>
            <caseItem localId="856" locator="140:5-140:68">
               <when localId="857" locator="140:10-140:16" valueType="t:String" value="years" xsi:type="Literal"/>
               <then localId="858" locator="140:23-140:68" xsi:type="Divide">
                  <signature localId="880" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                  <signature localId="881" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                  <operand localId="859" locator="140:23-140:55" xsi:type="Multiply">
                     <signature localId="870" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                     <signature localId="871" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                     <operand localId="868" xsi:type="ToDecimal">
                        <signature localId="869" name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                        <operand localId="860" locator="140:23-140:31" name="frequency" xsi:type="OperandRef"/>
                     </operand>
                     <operand localId="861" locator="140:35-140:55" xsi:type="Divide">
                        <signature localId="865" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                        <signature localId="866" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                        <operand localId="862" locator="140:36-140:39" valueType="t:Decimal" value="24.0" xsi:type="Literal"/>
                        <operand localId="864" locator="140:43-140:54" path="value" xsi:type="Property">
                           <source localId="863" locator="140:43-140:48" name="period" xsi:type="OperandRef"/>
                        </operand>
                     </operand>
                  </operand>
                  <operand localId="878" xsi:type="ToDecimal">
                     <signature localId="879" name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                     <operand localId="872" locator="140:59-140:68" xsi:type="Multiply">
                        <signature localId="875" name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                        <signature localId="876" name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                        <operand localId="873" locator="140:60-140:61" valueType="t:Integer" value="24" xsi:type="Literal"/>
                        <operand localId="874" locator="140:65-140:67" valueType="t:Integer" value="365" xsi:type="Literal"/>
                     </operand>
                  </operand>
               </then>
            </caseItem>
            <else localId="883" asType="t:Decimal" xsi:type="As">
               <operand localId="882" locator="141:10-141:13" xsi:type="Null"/>
            </else>
         </expression>
         <operand localId="378" name="frequency">
            <operandTypeSpecifier localId="377" locator="118:35-118:48" name="t:Integer" xsi:type="NamedTypeSpecifier"/>
         </operand>
         <operand localId="380" name="period">
            <operandTypeSpecifier localId="379" locator="118:58-118:72" name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
         </operand>
      </def>
      <def localId="884" locator="144:3-147:1" name="HasEnd" context="Patient" accessLevel="Public" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="884">
               <a:s>define function &quot;HasEnd&quot;(period Interval&lt;DateTime> ):
  </a:s>
               <a:s r="888">
                  <a:s r="888">
                     <a:s>not </a:s>
                     <a:s r="889">
                        <a:s>(</a:s>
                        <a:s r="889">
                           <a:s r="892">
                              <a:s r="890">
                                 <a:s>end of </a:s>
                                 <a:s r="891">
                                    <a:s>period</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> is null</a:s>
                           </a:s>
                           <a:s>
    or </a:s>
                           <a:s r="893">
                              <a:s r="894">
                                 <a:s>end of </a:s>
                                 <a:s r="895">
                                    <a:s>period</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> = </a:s>
                              <a:s r="897">
                                 <a:s>maximum </a:s>
                                 <a:s r="896">
                                    <a:s>DateTime</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>
)</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="888" locator="145:3-147:1" xsi:type="Not">
            <operand localId="889" locator="145:7-147:1" xsi:type="Or">
               <operand localId="892" locator="145:8-145:28" xsi:type="IsNull">
                  <operand localId="890" locator="145:8-145:20" xsi:type="End">
                     <operand localId="891" locator="145:15-145:20" name="period" xsi:type="OperandRef"/>
                  </operand>
               </operand>
               <operand localId="893" locator="146:8-146:39" xsi:type="Equal">
                  <signature localId="898" name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                  <signature localId="899" name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                  <operand localId="894" locator="146:8-146:20" xsi:type="End">
                     <operand localId="895" locator="146:15-146:20" name="period" xsi:type="OperandRef"/>
                  </operand>
                  <operand localId="897" locator="146:24-146:39" valueType="t:DateTime" xsi:type="MaxValue"/>
               </operand>
            </operand>
         </expression>
         <operand localId="887" name="period">
            <operandTypeSpecifier localId="885" locator="144:35-144:52" xsi:type="IntervalTypeSpecifier">
               <pointType localId="886" locator="144:44-144:51" name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
            </operandTypeSpecifier>
         </operand>
      </def>
      <def localId="900" locator="149:3-179:64" name="MedicationRequestPeriod" context="Patient" accessLevel="Public" fluent="true" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="900">
               <a:s>define fluent function MedicationRequestPeriod(Request MedicationRequest):
  </a:s>
               <a:s r="1100">
                  <a:s r="1100">
                     <a:s>
                        <a:s r="903">
                           <a:s r="904">
                              <a:s>
                                 <a:s>Request</a:s>
                              </a:s>
                           </a:s>
                           <a:s> R</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s>
                        <a:s>let
      </a:s>
                        <a:s r="905">
                           <a:s>dosage: </a:s>
                           <a:s r="906">
                              <a:s>singleton from </a:s>
                              <a:s r="908">
                                 <a:s r="907">
                                    <a:s>R</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="908">
                                    <a:s>dosageInstruction</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
      </a:s>
                        <a:s r="909">
                           <a:s>doseAndRate: </a:s>
                           <a:s r="910">
                              <a:s>singleton from </a:s>
                              <a:s r="912">
                                 <a:s r="911">
                                    <a:s>dosage</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="912">
                                    <a:s>doseAndRate</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
      </a:s>
                        <a:s r="915">
                           <a:s>doseRange: </a:s>
                           <a:s r="916">
                              <a:s r="918">
                                 <a:s r="917">
                                    <a:s>doseAndRate</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="918">
                                    <a:s>dose</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> as </a:s>
                              <a:s r="919">
                                 <a:s>Range</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
      </a:s>
                        <a:s r="920">
                           <a:s>doseQuantity: </a:s>
                           <a:s r="921">
                              <a:s r="923">
                                 <a:s r="922">
                                    <a:s>doseAndRate</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="923">
                                    <a:s>dose</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> as </a:s>
                              <a:s r="924">
                                 <a:s>SimpleQuantity</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
      </a:s>
                        <a:s r="925">
                           <a:s>dose: </a:s>
                           <a:s r="936">
                              <a:s>Coalesce(</a:s>
                              <a:s r="926">
                                 <a:s>end of </a:s>
                                 <a:s r="927">
                                    <a:s>doseRange</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>, </a:s>
                              <a:s r="932">
                                 <a:s>doseQuantity</a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
      </a:s>
                        <a:s r="938">
                           <a:s>timing: </a:s>
                           <a:s r="940">
                              <a:s r="939">
                                 <a:s>dosage</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="940">
                                 <a:s>timing</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
      </a:s>
                        <a:s r="941">
                           <a:s>frequency: </a:s>
                           <a:s r="952">
                              <a:s>Coalesce(</a:s>
                              <a:s r="944">
                                 <a:s r="943">
                                    <a:s r="942">
                                       <a:s>timing</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="943">
                                       <a:s>repeat</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="944">
                                    <a:s>frequencyMax</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>, </a:s>
                              <a:s r="947">
                                 <a:s r="946">
                                    <a:s r="945">
                                       <a:s>timing</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="946">
                                       <a:s>repeat</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="947">
                                    <a:s>frequency</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
      </a:s>
                        <a:s r="955">
                           <a:s>period: </a:s>
                           <a:s r="956">
                              <a:s>System.Quantity { </a:s>
                              <a:s>
                                 <a:s>value: </a:s>
                                 <a:s r="960">
                                    <a:s r="959">
                                       <a:s r="958">
                                          <a:s>timing</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="959">
                                          <a:s>repeat</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="960">
                                       <a:s>period</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                              <a:s>, </a:s>
                              <a:s>
                                 <a:s>unit: </a:s>
                                 <a:s r="965">
                                    <a:s r="964">
                                       <a:s r="963">
                                          <a:s r="962">
                                             <a:s>timing</a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="963">
                                             <a:s>repeat</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="964">
                                          <a:s>periodUnit</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="965">
                                       <a:s>value</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                              <a:s> }</a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
      </a:s>
                        <a:s r="966">
                           <a:s>dosesPerDay: </a:s>
                           <a:s r="984">
                              <a:s>Coalesce(</a:s>
                              <a:s r="971">
                                 <a:s>ToDaily(</a:s>
                                 <a:s r="969">
                                    <a:s r="967">
                                       <a:s>FHIRHelpers</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="969">
                                       <a:s>ToInteger(</a:s>
                                       <a:s r="968">
                                          <a:s>frequency</a:s>
                                       </a:s>
                                       <a:s>)</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>, </a:s>
                                 <a:s r="970">
                                    <a:s>period</a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                              <a:s>, </a:s>
                              <a:s r="977">
                                 <a:s>Count(</a:s>
                                 <a:s r="974">
                                    <a:s r="973">
                                       <a:s r="972">
                                          <a:s>timing</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="973">
                                          <a:s>repeat</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="974">
                                       <a:s>timeOfDay</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                              <a:s r="978">, 1.0)</a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
      </a:s>
                        <a:s r="988">
                           <a:s>boundsPeriod: </a:s>
                           <a:s r="989">
                              <a:s r="992">
                                 <a:s r="991">
                                    <a:s r="990">
                                       <a:s>timing</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="991">
                                       <a:s>repeat</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="992">
                                    <a:s>bounds</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> as </a:s>
                              <a:s r="993">
                                 <a:s>Period</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
      </a:s>
                        <a:s r="994">
                           <a:s>daysSupply: </a:s>
                           <a:s r="997">
                              <a:s r="996">
                                 <a:s r="995">
                                    <a:s>R</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="996">
                                    <a:s>dispenseRequest</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="997">
                                 <a:s>expectedSupplyDuration</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
      </a:s>
                        <a:s r="998">
                           <a:s>quantity: </a:s>
                           <a:s r="1001">
                              <a:s r="1000">
                                 <a:s r="999">
                                    <a:s>R</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="1000">
                                    <a:s>dispenseRequest</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="1001">
                                 <a:s>quantity</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
      </a:s>
                        <a:s r="1002">
                           <a:s>refills: </a:s>
                           <a:s r="1012">
                              <a:s>Coalesce(</a:s>
                              <a:s r="1005">
                                 <a:s r="1004">
                                    <a:s r="1003">
                                       <a:s>R</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="1004">
                                       <a:s>dispenseRequest</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="1005">
                                    <a:s>numberOfRepeatsAllowed</a:s>
                                 </a:s>
                              </a:s>
                              <a:s r="1006">, 0)</a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
      </a:s>
                        <a:s r="1016">
                           <a:s>startDate:
        </a:s>
                           <a:s r="1036">
                              <a:s>Coalesce(
          </a:s>
                              <a:s r="1017">
                                 <a:s>start of </a:s>
                                 <a:s r="1018">
                                    <a:s>boundsPeriod</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>,
          </a:s>
                              <a:s r="1021">
                                 <a:s>start of </a:s>
                                 <a:s r="1024">
                                    <a:s r="1023">
                                       <a:s r="1022">
                                          <a:s>R</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="1023">
                                          <a:s>dispenseRequest</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="1024">
                                       <a:s>validityPeriod</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                              <a:s>,
          </a:s>
                              <a:s r="1028">
                                 <a:s r="1027">
                                    <a:s>R</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="1028">
                                    <a:s>authoredOn</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>
        )</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s r="1042">
                        <a:s>return
      </a:s>
                        <a:s r="1043">
                           <a:s>if </a:s>
                           <a:s r="1045">
                              <a:s>HasEnd(</a:s>
                              <a:s r="1044">
                                 <a:s>boundsPeriod</a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                           <a:s> then
        </a:s>
                           <a:s r="1055">
                              <a:s>Interval[</a:s>
                              <a:s r="1048">
                                 <a:s>startDate</a:s>
                              </a:s>
                              <a:s>, </a:s>
                              <a:s r="1049">
                                 <a:s>end of </a:s>
                                 <a:s r="1050">
                                    <a:s>boundsPeriod</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>]</a:s>
                           </a:s>
                           <a:s>
      else
        </a:s>
                           <a:s r="1099">
                              <a:s>
                                 <a:s r="1056">
                                    <a:s r="1057">
                                       <a:s>(
          </a:s>
                                       <a:s r="1057">
                                          <a:s r="1077">
                                             <a:s>Coalesce(</a:s>
                                             <a:s r="1058">
                                                <a:s>daysSupply</a:s>
                                             </a:s>
                                             <a:s>, </a:s>
                                             <a:s r="1059">
                                                <a:s r="1060">
                                                   <a:s>quantity</a:s>
                                                </a:s>
                                                <a:s> / </a:s>
                                                <a:s r="1061">
                                                   <a:s>(</a:s>
                                                   <a:s r="1061">
                                                      <a:s r="1062">
                                                         <a:s>dose</a:s>
                                                      </a:s>
                                                      <a:s> * </a:s>
                                                      <a:s r="1063">
                                                         <a:s>dosesPerDay</a:s>
                                                      </a:s>
                                                   </a:s>
                                                   <a:s>)</a:s>
                                                </a:s>
                                             </a:s>
                                             <a:s>)</a:s>
                                          </a:s>
                                          <a:s>
            * </a:s>
                                          <a:s r="1081">
                                             <a:s>(</a:s>
                                             <a:s r="1081">
                                                <a:s r="1082">1 + </a:s>
                                                <a:s r="1083">
                                                   <a:s>refills</a:s>
                                                </a:s>
                                             </a:s>
                                             <a:s>)</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s>
        )</a:s>
                                    </a:s>
                                    <a:s> durationInDays</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>
          </a:s>
                              <a:s r="1091">
                                 <a:s>return </a:s>
                                 <a:s r="1098">
                                    <a:s>Interval[</a:s>
                                    <a:s r="1092">
                                       <a:s>startDate</a:s>
                                    </a:s>
                                    <a:s>, </a:s>
                                    <a:s r="1093">
                                       <a:s r="1094">
                                          <a:s>startDate</a:s>
                                       </a:s>
                                       <a:s> + </a:s>
                                       <a:s r="1095">
                                          <a:s>durationInDays</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>]</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1100" locator="150:3-179:64" xsi:type="Query">
            <source localId="903" locator="150:3-150:11" alias="R">
               <expression localId="904" locator="150:3-150:9" name="Request" xsi:type="OperandRef"/>
            </source>
            <let localId="905" locator="152:7-152:48" identifier="dosage">
               <expression localId="906" locator="152:15-152:48" xsi:type="SingletonFrom">
                  <operand localId="908" locator="152:30-152:48" path="dosageInstruction" scope="R" xsi:type="Property"/>
               </expression>
            </let>
            <let localId="909" locator="153:7-153:52" identifier="doseAndRate">
               <expression localId="910" locator="153:20-153:52" xsi:type="SingletonFrom">
                  <signature localId="913" xsi:type="ListTypeSpecifier">
                     <elementType localId="914" name="fhir:Dosage.DoseAndRate" xsi:type="NamedTypeSpecifier"/>
                  </signature>
                  <operand localId="912" locator="153:35-153:52" path="doseAndRate" xsi:type="Property">
                     <source localId="911" locator="153:35-153:40" name="dosage" xsi:type="QueryLetRef"/>
                  </operand>
               </expression>
            </let>
            <let localId="915" locator="154:7-154:42" identifier="doseRange">
               <expression localId="916" locator="154:18-154:42" strict="false" xsi:type="As">
                  <operand localId="918" locator="154:18-154:33" path="dose" xsi:type="Property">
                     <source localId="917" locator="154:18-154:28" name="doseAndRate" xsi:type="QueryLetRef"/>
                  </operand>
                  <asTypeSpecifier localId="919" locator="154:38-154:42" name="fhir:Range" xsi:type="NamedTypeSpecifier"/>
               </expression>
            </let>
            <let localId="920" locator="155:7-155:54" identifier="doseQuantity">
               <expression localId="921" locator="155:21-155:54" strict="false" xsi:type="As">
                  <operand localId="923" locator="155:21-155:36" path="dose" xsi:type="Property">
                     <source localId="922" locator="155:21-155:31" name="doseAndRate" xsi:type="QueryLetRef"/>
                  </operand>
                  <asTypeSpecifier localId="924" locator="155:41-155:54" name="fhir:SimpleQuantity" xsi:type="NamedTypeSpecifier"/>
               </expression>
            </let>
            <let localId="925" locator="156:7-156:52" identifier="dose">
               <expression localId="936" locator="156:13-156:52" xsi:type="Coalesce">
                  <operand localId="926" locator="156:22-156:37" xsi:type="End">
                     <signature localId="930" xsi:type="IntervalTypeSpecifier">
                        <pointType localId="931" name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                     </signature>
                     <operand localId="928" name="ToInterval" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <signature localId="929" name="fhir:Range" xsi:type="NamedTypeSpecifier"/>
                        <operand localId="927" locator="156:29-156:37" name="doseRange" xsi:type="QueryLetRef"/>
                     </operand>
                  </operand>
                  <operand localId="937" name="ToQuantity" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                     <operand localId="932" locator="156:40-156:51" name="doseQuantity" xsi:type="QueryLetRef"/>
                  </operand>
               </expression>
            </let>
            <let localId="938" locator="157:7-157:27" identifier="timing">
               <expression localId="940" locator="157:15-157:27" path="timing" xsi:type="Property">
                  <source localId="939" locator="157:15-157:20" name="dosage" xsi:type="QueryLetRef"/>
               </expression>
            </let>
            <let localId="941" locator="158:7-158:78" identifier="frequency">
               <expression localId="952" locator="158:18-158:78" xsi:type="Coalesce">
                  <signature localId="953" name="fhir:positiveInt" xsi:type="NamedTypeSpecifier"/>
                  <signature localId="954" name="fhir:positiveInt" xsi:type="NamedTypeSpecifier"/>
                  <operand localId="944" locator="158:27-158:52" path="frequencyMax" xsi:type="Property">
                     <source localId="943" locator="158:27-158:39" path="repeat" xsi:type="Property">
                        <source localId="942" locator="158:27-158:32" name="timing" xsi:type="QueryLetRef"/>
                     </source>
                  </operand>
                  <operand localId="947" locator="158:55-158:77" path="frequency" xsi:type="Property">
                     <source localId="946" locator="158:55-158:67" path="repeat" xsi:type="Property">
                        <source localId="945" locator="158:55-158:60" name="timing" xsi:type="QueryLetRef"/>
                     </source>
                  </operand>
               </expression>
            </let>
            <let localId="955" locator="159:7-159:99" identifier="period">
               <expression localId="956" locator="159:15-159:99" classType="t:Quantity" xsi:type="Instance">
                  <element name="value">
                     <value localId="961" name="ToDecimal" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand localId="960" locator="159:40-159:59" path="period" xsi:type="Property">
                           <source localId="959" locator="159:40-159:52" path="repeat" xsi:type="Property">
                              <source localId="958" locator="159:40-159:45" name="timing" xsi:type="QueryLetRef"/>
                           </source>
                        </operand>
                     </value>
                  </element>
                  <element name="unit">
                     <value localId="965" locator="159:68-159:97" path="value" xsi:type="Property">
                        <source localId="964" locator="159:68-159:91" path="periodUnit" xsi:type="Property">
                           <source localId="963" locator="159:68-159:80" path="repeat" xsi:type="Property">
                              <source localId="962" locator="159:68-159:73" name="timing" xsi:type="QueryLetRef"/>
                           </source>
                        </source>
                     </value>
                  </element>
               </expression>
            </let>
            <let localId="966" locator="160:7-160:115" identifier="dosesPerDay">
               <expression localId="984" locator="160:20-160:115" xsi:type="Coalesce">
                  <operand localId="971" locator="160:29-160:77" name="ToDaily" xsi:type="FunctionRef">
                     <operand localId="969" locator="160:37-160:68" name="ToInteger" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand localId="968" locator="160:59-160:67" name="frequency" xsi:type="QueryLetRef"/>
                     </operand>
                     <operand localId="970" locator="160:71-160:76" name="period" xsi:type="QueryLetRef"/>
                  </operand>
                  <operand localId="986" xsi:type="ToDecimal">
                     <signature localId="987" name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                     <operand localId="977" locator="160:80-160:109" xsi:type="Count">
                        <source localId="974" locator="160:86-160:108" path="timeOfDay" xsi:type="Property">
                           <source localId="973" locator="160:86-160:98" path="repeat" xsi:type="Property">
                              <source localId="972" locator="160:86-160:91" name="timing" xsi:type="QueryLetRef"/>
                           </source>
                        </source>
                     </operand>
                  </operand>
                  <operand localId="978" locator="160:112-160:114" valueType="t:Decimal" value="1.0" xsi:type="Literal"/>
               </expression>
            </let>
            <let localId="988" locator="161:7-161:50" identifier="boundsPeriod">
               <expression localId="989" locator="161:21-161:50" strict="false" xsi:type="As">
                  <operand localId="992" locator="161:21-161:40" path="bounds" xsi:type="Property">
                     <source localId="991" locator="161:21-161:33" path="repeat" xsi:type="Property">
                        <source localId="990" locator="161:21-161:26" name="timing" xsi:type="QueryLetRef"/>
                     </source>
                  </operand>
                  <asTypeSpecifier localId="993" locator="161:45-161:50" name="fhir:Period" xsi:type="NamedTypeSpecifier"/>
               </expression>
            </let>
            <let localId="994" locator="162:7-162:58" identifier="daysSupply">
               <expression localId="997" locator="162:19-162:58" path="expectedSupplyDuration" xsi:type="Property">
                  <source localId="996" locator="162:19-162:35" path="dispenseRequest" scope="R" xsi:type="Property"/>
               </expression>
            </let>
            <let localId="998" locator="163:7-163:42" identifier="quantity">
               <expression localId="1001" locator="163:17-163:42" path="quantity" xsi:type="Property">
                  <source localId="1000" locator="163:17-163:33" path="dispenseRequest" scope="R" xsi:type="Property"/>
               </expression>
            </let>
            <let localId="1002" locator="164:7-164:68" identifier="refills">
               <expression localId="1012" locator="164:16-164:68" xsi:type="Coalesce">
                  <signature localId="1014" name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                  <signature localId="1015" name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                  <operand localId="1013" name="ToInteger" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                     <operand localId="1005" locator="164:25-164:64" path="numberOfRepeatsAllowed" xsi:type="Property">
                        <source localId="1004" locator="164:25-164:41" path="dispenseRequest" scope="R" xsi:type="Property"/>
                     </operand>
                  </operand>
                  <operand localId="1006" locator="164:67" valueType="t:Integer" value="0" xsi:type="Literal"/>
               </expression>
            </let>
            <let localId="1016" locator="165:7-170:9" identifier="startDate">
               <expression localId="1036" locator="166:9-170:9" xsi:type="Coalesce">
                  <signature localId="1039" name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                  <signature localId="1040" name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                  <signature localId="1041" name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                  <operand localId="1017" locator="167:11-167:31" xsi:type="Start">
                     <operand localId="1019" name="ToInterval" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <signature localId="1020" name="fhir:Period" xsi:type="NamedTypeSpecifier"/>
                        <operand localId="1018" locator="167:20-167:31" name="boundsPeriod" xsi:type="QueryLetRef"/>
                     </operand>
                  </operand>
                  <operand localId="1021" locator="168:11-168:51" xsi:type="Start">
                     <operand localId="1025" name="ToInterval" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <signature localId="1026" name="fhir:Period" xsi:type="NamedTypeSpecifier"/>
                        <operand localId="1024" locator="168:20-168:51" path="validityPeriod" xsi:type="Property">
                           <source localId="1023" locator="168:20-168:36" path="dispenseRequest" scope="R" xsi:type="Property"/>
                        </operand>
                     </operand>
                  </operand>
                  <operand localId="1037" name="ToDateTime" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                     <signature localId="1038" name="fhir:dateTime" xsi:type="NamedTypeSpecifier"/>
                     <operand localId="1028" locator="169:11-169:22" path="authoredOn" scope="R" xsi:type="Property"/>
                  </operand>
               </expression>
            </let>
            <return localId="1042" locator="171:5-179:64">
               <expression localId="1043" locator="172:7-179:64" xsi:type="If">
                  <condition localId="1045" locator="172:10-172:29" name="HasEnd" xsi:type="FunctionRef">
                     <operand localId="1046" name="ToInterval" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <signature localId="1047" name="fhir:Period" xsi:type="NamedTypeSpecifier"/>
                        <operand localId="1044" locator="172:17-172:28" name="boundsPeriod" xsi:type="QueryLetRef"/>
                     </operand>
                  </condition>
                  <then localId="1055" locator="173:9-173:48" lowClosed="true" highClosed="true" xsi:type="Interval">
                     <low localId="1048" locator="173:18-173:26" name="startDate" xsi:type="QueryLetRef"/>
                     <high localId="1049" locator="173:29-173:47" xsi:type="End">
                        <signature localId="1053" xsi:type="IntervalTypeSpecifier">
                           <pointType localId="1054" name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                        </signature>
                        <operand localId="1051" name="ToInterval" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <signature localId="1052" name="fhir:Period" xsi:type="NamedTypeSpecifier"/>
                           <operand localId="1050" locator="173:36-173:47" name="boundsPeriod" xsi:type="QueryLetRef"/>
                        </operand>
                     </high>
                  </then>
                  <else localId="1099" locator="175:9-179:64" xsi:type="Query">
                     <source localId="1056" locator="175:9-178:24" alias="durationInDays">
                        <expression localId="1057" locator="175:9-178:9" xsi:type="Multiply">
                           <signature localId="1089" name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                           <signature localId="1090" name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                           <operand localId="1077" locator="176:11-176:63" xsi:type="Coalesce">
                              <signature localId="1079" name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                              <signature localId="1080" name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                              <operand localId="1078" name="ToQuantity" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                 <operand localId="1058" locator="176:20-176:29" name="daysSupply" xsi:type="QueryLetRef"/>
                              </operand>
                              <operand localId="1059" locator="176:32-176:62" xsi:type="Divide">
                                 <signature localId="1070" name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                 <signature localId="1071" name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                 <operand localId="1069" name="ToQuantity" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                    <operand localId="1060" locator="176:32-176:39" name="quantity" xsi:type="QueryLetRef"/>
                                 </operand>
                                 <operand localId="1061" locator="176:43-176:62" xsi:type="Multiply">
                                    <signature localId="1067" name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                    <signature localId="1068" name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                    <operand localId="1062" locator="176:44-176:47" name="dose" xsi:type="QueryLetRef"/>
                                    <operand localId="1065" xsi:type="ToQuantity">
                                       <signature localId="1066" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                                       <operand localId="1063" locator="176:51-176:61" name="dosesPerDay" xsi:type="QueryLetRef"/>
                                    </operand>
                                 </operand>
                              </operand>
                           </operand>
                           <operand localId="1087" xsi:type="ToQuantity">
                              <signature localId="1088" name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                              <operand localId="1081" locator="177:15-177:27" xsi:type="Add">
                                 <signature localId="1084" name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                                 <signature localId="1085" name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                                 <operand localId="1082" locator="177:16" valueType="t:Integer" value="1" xsi:type="Literal"/>
                                 <operand localId="1083" locator="177:20-177:26" name="refills" xsi:type="QueryLetRef"/>
                              </operand>
                           </operand>
                        </expression>
                     </source>
                     <return localId="1091" locator="179:11-179:64">
                        <expression localId="1098" locator="179:18-179:64" lowClosed="true" highClosed="true" xsi:type="Interval">
                           <low localId="1092" locator="179:27-179:35" name="startDate" xsi:type="QueryLetRef"/>
                           <high localId="1093" locator="179:38-179:63" xsi:type="Add">
                              <signature localId="1096" name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                              <signature localId="1097" name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                              <operand localId="1094" locator="179:38-179:46" name="startDate" xsi:type="QueryLetRef"/>
                              <operand localId="1095" locator="179:50-179:63" name="durationInDays" xsi:type="AliasRef"/>
                           </high>
                        </expression>
                     </return>
                  </else>
               </expression>
            </return>
         </expression>
         <operand localId="902" name="Request">
            <operandTypeSpecifier localId="901" locator="149:58-149:74" name="fhir:MedicationRequest" xsi:type="NamedTypeSpecifier"/>
         </operand>
      </def>
      <def localId="1101" locator="182:1-206:4" name="DosesPerDay" context="Patient" accessLevel="Public" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="1101">
               <a:s>define function &quot;DosesPerDay&quot;(frequency Code):
	/*Calculates the cumulative dose per day for each prescription*/
	</a:s>
               <a:s r="1104">
                  <a:s r="1104">
                     <a:s>case
		</a:s>
                     <a:s r="1105">
                        <a:s>when </a:s>
                        <a:s r="1106">
                           <a:s r="1107">
                              <a:s>frequency</a:s>
                           </a:s>
                           <a:s> ~ </a:s>
                           <a:s r="1109">
                              <a:s r="1108">
                                 <a:s>CustomConcepts</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="1109">
                                 <a:s>&quot;Once daily (qualifier value)&quot;</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s r="1112"> then 1.0</a:s>
                     </a:s>
                     <a:s>
		</a:s>
                     <a:s r="1113">
                        <a:s>when </a:s>
                        <a:s r="1114">
                           <a:s r="1115">
                              <a:s>frequency</a:s>
                           </a:s>
                           <a:s> ~ </a:s>
                           <a:s r="1117">
                              <a:s r="1116">
                                 <a:s>CustomConcepts</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="1117">
                                 <a:s>&quot;Twice a day (qualifier value)&quot;</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s r="1120"> then 2.0</a:s>
                     </a:s>
                     <a:s>
		</a:s>
                     <a:s r="1121">
                        <a:s>when </a:s>
                        <a:s r="1122">
                           <a:s r="1123">
                              <a:s>frequency</a:s>
                           </a:s>
                           <a:s> ~ </a:s>
                           <a:s r="1125">
                              <a:s r="1124">
                                 <a:s>CustomConcepts</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="1125">
                                 <a:s>&quot;Three times daily (qualifier value)&quot;</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s r="1128"> then 3.0</a:s>
                     </a:s>
                     <a:s>
		</a:s>
                     <a:s r="1129">
                        <a:s>when </a:s>
                        <a:s r="1130">
                           <a:s r="1131">
                              <a:s>frequency</a:s>
                           </a:s>
                           <a:s> ~ </a:s>
                           <a:s r="1133">
                              <a:s r="1132">
                                 <a:s>CustomConcepts</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="1133">
                                 <a:s>&quot;Four times daily (qualifier value)&quot;</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s r="1136"> then 4.0</a:s>
                     </a:s>
                     <a:s>
		</a:s>
                     <a:s r="1137">
                        <a:s>when </a:s>
                        <a:s r="1138">
                           <a:s r="1139">
                              <a:s>frequency</a:s>
                           </a:s>
                           <a:s> ~ </a:s>
                           <a:s r="1141">
                              <a:s r="1140">
                                 <a:s>CustomConcepts</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="1141">
                                 <a:s>&quot;Every twenty four hours (qualifier value)&quot;</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s r="1144"> then 1.0</a:s>
                     </a:s>
                     <a:s>
		</a:s>
                     <a:s r="1145">
                        <a:s>when </a:s>
                        <a:s r="1146">
                           <a:s r="1147">
                              <a:s>frequency</a:s>
                           </a:s>
                           <a:s> ~ </a:s>
                           <a:s r="1149">
                              <a:s r="1148">
                                 <a:s>CustomConcepts</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="1149">
                                 <a:s>&quot;Every twelve hours (qualifier value)&quot;</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s r="1152"> then 2.0</a:s>
                     </a:s>
                     <a:s>
		</a:s>
                     <a:s r="1153">
                        <a:s>when </a:s>
                        <a:s r="1154">
                           <a:s r="1155">
                              <a:s>frequency</a:s>
                           </a:s>
                           <a:s> ~ </a:s>
                           <a:s r="1157">
                              <a:s r="1156">
                                 <a:s>CustomConcepts</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="1157">
                                 <a:s>&quot;Every thirty six hours (qualifier value)&quot;</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s r="1160"> then 0.67</a:s>
                     </a:s>
                     <a:s>
		</a:s>
                     <a:s r="1161">
                        <a:s>when </a:s>
                        <a:s r="1162">
                           <a:s r="1163">
                              <a:s>frequency</a:s>
                           </a:s>
                           <a:s> ~ </a:s>
                           <a:s r="1165">
                              <a:s r="1164">
                                 <a:s>CustomConcepts</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="1165">
                                 <a:s>&quot;Every eight hours (qualifier value)&quot;</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s r="1168"> then 3.0</a:s>
                     </a:s>
                     <a:s>
		</a:s>
                     <a:s r="1169">
                        <a:s>when </a:s>
                        <a:s r="1170">
                           <a:s r="1171">
                              <a:s>frequency</a:s>
                           </a:s>
                           <a:s> ~ </a:s>
                           <a:s r="1173">
                              <a:s r="1172">
                                 <a:s>CustomConcepts</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="1173">
                                 <a:s>&quot;Every four hours (qualifier value)&quot;</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s r="1176"> then 6.0</a:s>
                     </a:s>
                     <a:s>
		</a:s>
                     <a:s r="1177">
                        <a:s>when </a:s>
                        <a:s r="1178">
                           <a:s r="1179">
                              <a:s>frequency</a:s>
                           </a:s>
                           <a:s> ~ </a:s>
                           <a:s r="1181">
                              <a:s r="1180">
                                 <a:s>CustomConcepts</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="1181">
                                 <a:s>&quot;Every six hours (qualifier value)&quot;</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s r="1184"> then 4.0</a:s>
                     </a:s>
                     <a:s>
		</a:s>
                     <a:s r="1185">
                        <a:s>when </a:s>
                        <a:s r="1186">
                           <a:s r="1187">
                              <a:s>frequency</a:s>
                           </a:s>
                           <a:s> ~ </a:s>
                           <a:s r="1189">
                              <a:s r="1188">
                                 <a:s>CustomConcepts</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="1189">
                                 <a:s>&quot;Every seventy two hours (qualifier value)&quot;</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s r="1192"> then 0.34</a:s>
                     </a:s>
                     <a:s>
		</a:s>
                     <a:s r="1193">
                        <a:s>when </a:s>
                        <a:s r="1194">
                           <a:s r="1195">
                              <a:s>frequency</a:s>
                           </a:s>
                           <a:s> ~ </a:s>
                           <a:s r="1197">
                              <a:s r="1196">
                                 <a:s>CustomConcepts</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="1197">
                                 <a:s>&quot;Every forty eight hours (qualifier value)&quot;</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s r="1200"> then 0.5</a:s>
                     </a:s>
                     <a:s>
		</a:s>
                     <a:s r="1201">
                        <a:s>when </a:s>
                        <a:s r="1202">
                           <a:s r="1203">
                              <a:s>frequency</a:s>
                           </a:s>
                           <a:s> ~ </a:s>
                           <a:s r="1205">
                              <a:s r="1204">
                                 <a:s>CustomConcepts</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="1205">
                                 <a:s>&quot;Every eight to twelve hours (qualifier value)&quot;</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s r="1208"> then 2.0</a:s>
                     </a:s>
                     <a:s>
		</a:s>
                     <a:s r="1209">
                        <a:s>when </a:s>
                        <a:s r="1210">
                           <a:s r="1211">
                              <a:s>frequency</a:s>
                           </a:s>
                           <a:s> ~ </a:s>
                           <a:s r="1213">
                              <a:s r="1212">
                                 <a:s>CustomConcepts</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="1213">
                                 <a:s>&quot;Every six to eight hours (qualifier value)&quot;</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s r="1216"> then 3.0</a:s>
                     </a:s>
                     <a:s>
		</a:s>
                     <a:s r="1217">
                        <a:s>when </a:s>
                        <a:s r="1218">
                           <a:s r="1219">
                              <a:s>frequency</a:s>
                           </a:s>
                           <a:s> ~ </a:s>
                           <a:s r="1221">
                              <a:s r="1220">
                                 <a:s>CustomConcepts</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="1221">
                                 <a:s>&quot;Every three to four hours (qualifier value)&quot;</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s r="1224"> then 6.0</a:s>
                     </a:s>
                     <a:s>
		</a:s>
                     <a:s r="1225">
                        <a:s>when </a:s>
                        <a:s r="1226">
                           <a:s r="1227">
                              <a:s>frequency</a:s>
                           </a:s>
                           <a:s> ~ </a:s>
                           <a:s r="1229">
                              <a:s r="1228">
                                 <a:s>CustomConcepts</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="1229">
                                 <a:s>&quot;Every three to six hours (qualifier value)&quot;</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s r="1232"> then 4.0</a:s>
                     </a:s>
                     <a:s>
		</a:s>
                     <a:s r="1233">
                        <a:s>when </a:s>
                        <a:s r="1234">
                           <a:s r="1235">
                              <a:s>frequency</a:s>
                           </a:s>
                           <a:s> ~ </a:s>
                           <a:s r="1237">
                              <a:s r="1236">
                                 <a:s>CustomConcepts</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="1237">
                                 <a:s>&quot;Every two to four hours (qualifier value)&quot;</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s r="1240"> then 6.0</a:s>
                     </a:s>
                     <a:s>
		</a:s>
                     <a:s r="1241">
                        <a:s>when </a:s>
                        <a:s r="1242">
                           <a:s r="1243">
                              <a:s>frequency</a:s>
                           </a:s>
                           <a:s> ~ </a:s>
                           <a:s r="1245">
                              <a:s r="1244">
                                 <a:s>CustomConcepts</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="1245">
                                 <a:s>&quot;One to four times a day (qualifier value)&quot;</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s r="1248"> then 4.0</a:s>
                     </a:s>
                     <a:s>
		</a:s>
                     <a:s r="1249">
                        <a:s>when </a:s>
                        <a:s r="1250">
                           <a:s r="1251">
                              <a:s>frequency</a:s>
                           </a:s>
                           <a:s> ~ </a:s>
                           <a:s r="1253">
                              <a:s r="1252">
                                 <a:s>CustomConcepts</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="1253">
                                 <a:s>&quot;One to three times a day (qualifier value)&quot;</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s r="1256"> then 3.0</a:s>
                     </a:s>
                     <a:s>
		</a:s>
                     <a:s r="1257">
                        <a:s>when </a:s>
                        <a:s r="1258">
                           <a:s r="1259">
                              <a:s>frequency</a:s>
                           </a:s>
                           <a:s> ~ </a:s>
                           <a:s r="1261">
                              <a:s r="1260">
                                 <a:s>CustomConcepts</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="1261">
                                 <a:s>&quot;One to two times a day (qualifier value)&quot;</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s r="1264"> then 2.0</a:s>
                     </a:s>
                     <a:s r="1265">
		else null 
	end</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1104" locator="184:2-206:4" xsi:type="Case">
            <caseItem localId="1105" locator="185:3-185:73">
               <when localId="1106" locator="185:8-185:64" xsi:type="Equivalent">
                  <signature localId="1110" name="t:Code" xsi:type="NamedTypeSpecifier"/>
                  <signature localId="1111" name="t:Code" xsi:type="NamedTypeSpecifier"/>
                  <operand localId="1107" locator="185:8-185:16" name="frequency" xsi:type="OperandRef"/>
                  <operand localId="1109" locator="185:20-185:64" name="Once daily (qualifier value)" libraryName="CustomConcepts" xsi:type="CodeRef"/>
               </when>
               <then localId="1112" locator="185:71-185:73" valueType="t:Decimal" value="1.0" xsi:type="Literal"/>
            </caseItem>
            <caseItem localId="1113" locator="186:3-186:74">
               <when localId="1114" locator="186:8-186:65" xsi:type="Equivalent">
                  <signature localId="1118" name="t:Code" xsi:type="NamedTypeSpecifier"/>
                  <signature localId="1119" name="t:Code" xsi:type="NamedTypeSpecifier"/>
                  <operand localId="1115" locator="186:8-186:16" name="frequency" xsi:type="OperandRef"/>
                  <operand localId="1117" locator="186:20-186:65" name="Twice a day (qualifier value)" libraryName="CustomConcepts" xsi:type="CodeRef"/>
               </when>
               <then localId="1120" locator="186:72-186:74" valueType="t:Decimal" value="2.0" xsi:type="Literal"/>
            </caseItem>
            <caseItem localId="1121" locator="187:3-187:80">
               <when localId="1122" locator="187:8-187:71" xsi:type="Equivalent">
                  <signature localId="1126" name="t:Code" xsi:type="NamedTypeSpecifier"/>
                  <signature localId="1127" name="t:Code" xsi:type="NamedTypeSpecifier"/>
                  <operand localId="1123" locator="187:8-187:16" name="frequency" xsi:type="OperandRef"/>
                  <operand localId="1125" locator="187:20-187:71" name="Three times daily (qualifier value)" libraryName="CustomConcepts" xsi:type="CodeRef"/>
               </when>
               <then localId="1128" locator="187:78-187:80" valueType="t:Decimal" value="3.0" xsi:type="Literal"/>
            </caseItem>
            <caseItem localId="1129" locator="188:3-188:79">
               <when localId="1130" locator="188:8-188:70" xsi:type="Equivalent">
                  <signature localId="1134" name="t:Code" xsi:type="NamedTypeSpecifier"/>
                  <signature localId="1135" name="t:Code" xsi:type="NamedTypeSpecifier"/>
                  <operand localId="1131" locator="188:8-188:16" name="frequency" xsi:type="OperandRef"/>
                  <operand localId="1133" locator="188:20-188:70" name="Four times daily (qualifier value)" libraryName="CustomConcepts" xsi:type="CodeRef"/>
               </when>
               <then localId="1136" locator="188:77-188:79" valueType="t:Decimal" value="4.0" xsi:type="Literal"/>
            </caseItem>
            <caseItem localId="1137" locator="189:3-189:86">
               <when localId="1138" locator="189:8-189:77" xsi:type="Equivalent">
                  <signature localId="1142" name="t:Code" xsi:type="NamedTypeSpecifier"/>
                  <signature localId="1143" name="t:Code" xsi:type="NamedTypeSpecifier"/>
                  <operand localId="1139" locator="189:8-189:16" name="frequency" xsi:type="OperandRef"/>
                  <operand localId="1141" locator="189:20-189:77" name="Every twenty four hours (qualifier value)" libraryName="CustomConcepts" xsi:type="CodeRef"/>
               </when>
               <then localId="1144" locator="189:84-189:86" valueType="t:Decimal" value="1.0" xsi:type="Literal"/>
            </caseItem>
            <caseItem localId="1145" locator="190:3-190:81">
               <when localId="1146" locator="190:8-190:72" xsi:type="Equivalent">
                  <signature localId="1150" name="t:Code" xsi:type="NamedTypeSpecifier"/>
                  <signature localId="1151" name="t:Code" xsi:type="NamedTypeSpecifier"/>
                  <operand localId="1147" locator="190:8-190:16" name="frequency" xsi:type="OperandRef"/>
                  <operand localId="1149" locator="190:20-190:72" name="Every twelve hours (qualifier value)" libraryName="CustomConcepts" xsi:type="CodeRef"/>
               </when>
               <then localId="1152" locator="190:79-190:81" valueType="t:Decimal" value="2.0" xsi:type="Literal"/>
            </caseItem>
            <caseItem localId="1153" locator="191:3-191:86">
               <when localId="1154" locator="191:8-191:76" xsi:type="Equivalent">
                  <signature localId="1158" name="t:Code" xsi:type="NamedTypeSpecifier"/>
                  <signature localId="1159" name="t:Code" xsi:type="NamedTypeSpecifier"/>
                  <operand localId="1155" locator="191:8-191:16" name="frequency" xsi:type="OperandRef"/>
                  <operand localId="1157" locator="191:20-191:76" name="Every thirty six hours (qualifier value)" libraryName="CustomConcepts" xsi:type="CodeRef"/>
               </when>
               <then localId="1160" locator="191:83-191:86" valueType="t:Decimal" value="0.67" xsi:type="Literal"/>
            </caseItem>
            <caseItem localId="1161" locator="192:3-192:80">
               <when localId="1162" locator="192:8-192:71" xsi:type="Equivalent">
                  <signature localId="1166" name="t:Code" xsi:type="NamedTypeSpecifier"/>
                  <signature localId="1167" name="t:Code" xsi:type="NamedTypeSpecifier"/>
                  <operand localId="1163" locator="192:8-192:16" name="frequency" xsi:type="OperandRef"/>
                  <operand localId="1165" locator="192:20-192:71" name="Every eight hours (qualifier value)" libraryName="CustomConcepts" xsi:type="CodeRef"/>
               </when>
               <then localId="1168" locator="192:78-192:80" valueType="t:Decimal" value="3.0" xsi:type="Literal"/>
            </caseItem>
            <caseItem localId="1169" locator="193:3-193:79">
               <when localId="1170" locator="193:8-193:70" xsi:type="Equivalent">
                  <signature localId="1174" name="t:Code" xsi:type="NamedTypeSpecifier"/>
                  <signature localId="1175" name="t:Code" xsi:type="NamedTypeSpecifier"/>
                  <operand localId="1171" locator="193:8-193:16" name="frequency" xsi:type="OperandRef"/>
                  <operand localId="1173" locator="193:20-193:70" name="Every four hours (qualifier value)" libraryName="CustomConcepts" xsi:type="CodeRef"/>
               </when>
               <then localId="1176" locator="193:77-193:79" valueType="t:Decimal" value="6.0" xsi:type="Literal"/>
            </caseItem>
            <caseItem localId="1177" locator="194:3-194:78">
               <when localId="1178" locator="194:8-194:69" xsi:type="Equivalent">
                  <signature localId="1182" name="t:Code" xsi:type="NamedTypeSpecifier"/>
                  <signature localId="1183" name="t:Code" xsi:type="NamedTypeSpecifier"/>
                  <operand localId="1179" locator="194:8-194:16" name="frequency" xsi:type="OperandRef"/>
                  <operand localId="1181" locator="194:20-194:69" name="Every six hours (qualifier value)" libraryName="CustomConcepts" xsi:type="CodeRef"/>
               </when>
               <then localId="1184" locator="194:76-194:78" valueType="t:Decimal" value="4.0" xsi:type="Literal"/>
            </caseItem>
            <caseItem localId="1185" locator="195:3-195:87">
               <when localId="1186" locator="195:8-195:77" xsi:type="Equivalent">
                  <signature localId="1190" name="t:Code" xsi:type="NamedTypeSpecifier"/>
                  <signature localId="1191" name="t:Code" xsi:type="NamedTypeSpecifier"/>
                  <operand localId="1187" locator="195:8-195:16" name="frequency" xsi:type="OperandRef"/>
                  <operand localId="1189" locator="195:20-195:77" name="Every seventy two hours (qualifier value)" libraryName="CustomConcepts" xsi:type="CodeRef"/>
               </when>
               <then localId="1192" locator="195:84-195:87" valueType="t:Decimal" value="0.34" xsi:type="Literal"/>
            </caseItem>
            <caseItem localId="1193" locator="196:3-196:86">
               <when localId="1194" locator="196:8-196:77" xsi:type="Equivalent">
                  <signature localId="1198" name="t:Code" xsi:type="NamedTypeSpecifier"/>
                  <signature localId="1199" name="t:Code" xsi:type="NamedTypeSpecifier"/>
                  <operand localId="1195" locator="196:8-196:16" name="frequency" xsi:type="OperandRef"/>
                  <operand localId="1197" locator="196:20-196:77" name="Every forty eight hours (qualifier value)" libraryName="CustomConcepts" xsi:type="CodeRef"/>
               </when>
               <then localId="1200" locator="196:84-196:86" valueType="t:Decimal" value="0.5" xsi:type="Literal"/>
            </caseItem>
            <caseItem localId="1201" locator="197:3-197:90">
               <when localId="1202" locator="197:8-197:81" xsi:type="Equivalent">
                  <signature localId="1206" name="t:Code" xsi:type="NamedTypeSpecifier"/>
                  <signature localId="1207" name="t:Code" xsi:type="NamedTypeSpecifier"/>
                  <operand localId="1203" locator="197:8-197:16" name="frequency" xsi:type="OperandRef"/>
                  <operand localId="1205" locator="197:20-197:81" name="Every eight to twelve hours (qualifier value)" libraryName="CustomConcepts" xsi:type="CodeRef"/>
               </when>
               <then localId="1208" locator="197:88-197:90" valueType="t:Decimal" value="2.0" xsi:type="Literal"/>
            </caseItem>
            <caseItem localId="1209" locator="198:3-198:87">
               <when localId="1210" locator="198:8-198:78" xsi:type="Equivalent">
                  <signature localId="1214" name="t:Code" xsi:type="NamedTypeSpecifier"/>
                  <signature localId="1215" name="t:Code" xsi:type="NamedTypeSpecifier"/>
                  <operand localId="1211" locator="198:8-198:16" name="frequency" xsi:type="OperandRef"/>
                  <operand localId="1213" locator="198:20-198:78" name="Every six to eight hours (qualifier value)" libraryName="CustomConcepts" xsi:type="CodeRef"/>
               </when>
               <then localId="1216" locator="198:85-198:87" valueType="t:Decimal" value="3.0" xsi:type="Literal"/>
            </caseItem>
            <caseItem localId="1217" locator="199:3-199:88">
               <when localId="1218" locator="199:8-199:79" xsi:type="Equivalent">
                  <signature localId="1222" name="t:Code" xsi:type="NamedTypeSpecifier"/>
                  <signature localId="1223" name="t:Code" xsi:type="NamedTypeSpecifier"/>
                  <operand localId="1219" locator="199:8-199:16" name="frequency" xsi:type="OperandRef"/>
                  <operand localId="1221" locator="199:20-199:79" name="Every three to four hours (qualifier value)" libraryName="CustomConcepts" xsi:type="CodeRef"/>
               </when>
               <then localId="1224" locator="199:86-199:88" valueType="t:Decimal" value="6.0" xsi:type="Literal"/>
            </caseItem>
            <caseItem localId="1225" locator="200:3-200:87">
               <when localId="1226" locator="200:8-200:78" xsi:type="Equivalent">
                  <signature localId="1230" name="t:Code" xsi:type="NamedTypeSpecifier"/>
                  <signature localId="1231" name="t:Code" xsi:type="NamedTypeSpecifier"/>
                  <operand localId="1227" locator="200:8-200:16" name="frequency" xsi:type="OperandRef"/>
                  <operand localId="1229" locator="200:20-200:78" name="Every three to six hours (qualifier value)" libraryName="CustomConcepts" xsi:type="CodeRef"/>
               </when>
               <then localId="1232" locator="200:85-200:87" valueType="t:Decimal" value="4.0" xsi:type="Literal"/>
            </caseItem>
            <caseItem localId="1233" locator="201:3-201:86">
               <when localId="1234" locator="201:8-201:77" xsi:type="Equivalent">
                  <signature localId="1238" name="t:Code" xsi:type="NamedTypeSpecifier"/>
                  <signature localId="1239" name="t:Code" xsi:type="NamedTypeSpecifier"/>
                  <operand localId="1235" locator="201:8-201:16" name="frequency" xsi:type="OperandRef"/>
                  <operand localId="1237" locator="201:20-201:77" name="Every two to four hours (qualifier value)" libraryName="CustomConcepts" xsi:type="CodeRef"/>
               </when>
               <then localId="1240" locator="201:84-201:86" valueType="t:Decimal" value="6.0" xsi:type="Literal"/>
            </caseItem>
            <caseItem localId="1241" locator="202:3-202:86">
               <when localId="1242" locator="202:8-202:77" xsi:type="Equivalent">
                  <signature localId="1246" name="t:Code" xsi:type="NamedTypeSpecifier"/>
                  <signature localId="1247" name="t:Code" xsi:type="NamedTypeSpecifier"/>
                  <operand localId="1243" locator="202:8-202:16" name="frequency" xsi:type="OperandRef"/>
                  <operand localId="1245" locator="202:20-202:77" name="One to four times a day (qualifier value)" libraryName="CustomConcepts" xsi:type="CodeRef"/>
               </when>
               <then localId="1248" locator="202:84-202:86" valueType="t:Decimal" value="4.0" xsi:type="Literal"/>
            </caseItem>
            <caseItem localId="1249" locator="203:3-203:87">
               <when localId="1250" locator="203:8-203:78" xsi:type="Equivalent">
                  <signature localId="1254" name="t:Code" xsi:type="NamedTypeSpecifier"/>
                  <signature localId="1255" name="t:Code" xsi:type="NamedTypeSpecifier"/>
                  <operand localId="1251" locator="203:8-203:16" name="frequency" xsi:type="OperandRef"/>
                  <operand localId="1253" locator="203:20-203:78" name="One to three times a day (qualifier value)" libraryName="CustomConcepts" xsi:type="CodeRef"/>
               </when>
               <then localId="1256" locator="203:85-203:87" valueType="t:Decimal" value="3.0" xsi:type="Literal"/>
            </caseItem>
            <caseItem localId="1257" locator="204:3-204:85">
               <when localId="1258" locator="204:8-204:76" xsi:type="Equivalent">
                  <signature localId="1262" name="t:Code" xsi:type="NamedTypeSpecifier"/>
                  <signature localId="1263" name="t:Code" xsi:type="NamedTypeSpecifier"/>
                  <operand localId="1259" locator="204:8-204:16" name="frequency" xsi:type="OperandRef"/>
                  <operand localId="1261" locator="204:20-204:76" name="One to two times a day (qualifier value)" libraryName="CustomConcepts" xsi:type="CodeRef"/>
               </when>
               <then localId="1264" locator="204:83-204:85" valueType="t:Decimal" value="2.0" xsi:type="Literal"/>
            </caseItem>
            <else localId="1266" asType="t:Decimal" xsi:type="As">
               <operand localId="1265" locator="205:8-205:11" xsi:type="Null"/>
            </else>
         </expression>
         <operand localId="1103" name="frequency">
            <operandTypeSpecifier localId="1102" locator="182:41-182:44" name="t:Code" xsi:type="NamedTypeSpecifier"/>
         </operand>
      </def>
      <def localId="1267" locator="212:1-226:37" name="dailyDose" context="Patient" accessLevel="Public" fluent="true" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="1267">
               <a:s>//define function &quot;GetMedicationDailyDose&quot;(dosage Quantity, dosesPerDay Decimal):
  //dosage * Quantity { value: dosesPerDay, unit: '/d' }


define fluent function dailyDose(Request &quot;MedicationRequest&quot;):
  </a:s>
               <a:s r="1379">
                  <a:s r="1379">
                     <a:s>
                        <a:s r="1270">
                           <a:s r="1271">
                              <a:s>
                                 <a:s>Request</a:s>
                              </a:s>
                           </a:s>
                           <a:s> R</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s>
                        <a:s>let
      </a:s>
                        <a:s r="1272">
                           <a:s>dosage: </a:s>
                           <a:s r="1273">
                              <a:s>singleton from </a:s>
                              <a:s r="1275">
                                 <a:s r="1274">
                                    <a:s>R</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="1275">
                                    <a:s>dosageInstruction</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
      </a:s>
                        <a:s r="1278">
                           <a:s>doseAndRate: </a:s>
                           <a:s r="1279">
                              <a:s>singleton from </a:s>
                              <a:s r="1281">
                                 <a:s r="1280">
                                    <a:s>dosage</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="1281">
                                    <a:s>doseAndRate</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
      </a:s>
                        <a:s r="1284">
                           <a:s>timing: </a:s>
                           <a:s r="1286">
                              <a:s r="1285">
                                 <a:s>dosage</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="1286">
                                 <a:s>timing</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
      </a:s>
                        <a:s r="1287">
                           <a:s>frequency: </a:s>
                           <a:s r="1298">
                              <a:s>Coalesce(</a:s>
                              <a:s r="1290">
                                 <a:s r="1289">
                                    <a:s r="1288">
                                       <a:s>timing</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="1289">
                                       <a:s>repeat</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="1290">
                                    <a:s>frequencyMax</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>, </a:s>
                              <a:s r="1293">
                                 <a:s r="1292">
                                    <a:s r="1291">
                                       <a:s>timing</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="1292">
                                       <a:s>repeat</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="1293">
                                    <a:s>frequency</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
      </a:s>
                        <a:s r="1301">
                           <a:s>period: </a:s>
                           <a:s r="1302">
                              <a:s>System.Quantity { </a:s>
                              <a:s>
                                 <a:s>value: </a:s>
                                 <a:s r="1306">
                                    <a:s r="1305">
                                       <a:s r="1304">
                                          <a:s>timing</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="1305">
                                          <a:s>repeat</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="1306">
                                       <a:s>period</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                              <a:s>, </a:s>
                              <a:s>
                                 <a:s>unit: </a:s>
                                 <a:s r="1311">
                                    <a:s r="1310">
                                       <a:s r="1309">
                                          <a:s r="1308">
                                             <a:s>timing</a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="1309">
                                             <a:s>repeat</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="1310">
                                          <a:s>periodUnit</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="1311">
                                       <a:s>value</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                              <a:s> }</a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
      </a:s>
                        <a:s r="1312">
                           <a:s>doseRange: </a:s>
                           <a:s r="1313">
                              <a:s r="1315">
                                 <a:s r="1314">
                                    <a:s>doseAndRate</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="1315">
                                    <a:s>dose</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> as </a:s>
                              <a:s r="1316">
                                 <a:s>Range</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
      </a:s>
                        <a:s r="1317">
                           <a:s>doseQuantity: </a:s>
                           <a:s r="1318">
                              <a:s r="1320">
                                 <a:s r="1319">
                                    <a:s>doseAndRate</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="1320">
                                    <a:s>dose</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> as </a:s>
                              <a:s r="1321">
                                 <a:s>SimpleQuantity</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
      </a:s>
                        <a:s r="1322">
                           <a:s>dose: </a:s>
                           <a:s r="1330">
                              <a:s>Coalesce(</a:s>
                              <a:s r="1324">
                                 <a:s r="1323">
                                    <a:s>doseRange</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="1324">
                                    <a:s>high</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>, </a:s>
                              <a:s r="1325">
                                 <a:s>doseQuantity</a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
      </a:s>
                        <a:s r="1333">
                           <a:s>dosesPerDay: </a:s>
                           <a:s r="1353">
                              <a:s>Coalesce(</a:s>
                              <a:s r="1336">
                                 <a:s>ToDaily(</a:s>
                                 <a:s r="1334">
                                    <a:s>frequency</a:s>
                                 </a:s>
                                 <a:s>, </a:s>
                                 <a:s r="1335">
                                    <a:s>period</a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                              <a:s>, </a:s>
                              <a:s r="1343">
                                 <a:s>Count(</a:s>
                                 <a:s r="1340">
                                    <a:s r="1339">
                                       <a:s r="1338">
                                          <a:s>timing</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="1339">
                                          <a:s>repeat</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="1340">
                                       <a:s>timeOfDay</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                              <a:s r="1344">, 1.0)</a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
      </a:s>
                        <a:s r="1360">
                           <a:s>quantity: </a:s>
                           <a:s r="1363">
                              <a:s r="1362">
                                 <a:s r="1361">
                                    <a:s>R</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="1362">
                                    <a:s>dispenseRequest</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="1363">
                                 <a:s>quantity</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s r="1364">
                        <a:s>return
      </a:s>
                        <a:s r="1365">
                           <a:s r="1366">
                              <a:s>quantity</a:s>
                           </a:s>
                           <a:s> / </a:s>
                           <a:s r="1367">
                              <a:s>(</a:s>
                              <a:s r="1367">
                                 <a:s r="1368">
                                    <a:s>dose</a:s>
                                 </a:s>
                                 <a:s> * </a:s>
                                 <a:s r="1369">
                                    <a:s>dosesPerDay</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1379" locator="213:3-226:37" xsi:type="Query">
            <source localId="1270" locator="213:3-213:11" alias="R">
               <expression localId="1271" locator="213:3-213:9" name="Request" xsi:type="OperandRef"/>
            </source>
            <let localId="1272" locator="215:7-215:48" identifier="dosage">
               <expression localId="1273" locator="215:15-215:48" xsi:type="SingletonFrom">
                  <signature localId="1276" xsi:type="ListTypeSpecifier">
                     <elementType localId="1277" name="fhir:Dosage" xsi:type="NamedTypeSpecifier"/>
                  </signature>
                  <operand localId="1275" locator="215:30-215:48" path="dosageInstruction" scope="R" xsi:type="Property"/>
               </expression>
            </let>
            <let localId="1278" locator="216:7-216:52" identifier="doseAndRate">
               <expression localId="1279" locator="216:20-216:52" xsi:type="SingletonFrom">
                  <signature localId="1282" xsi:type="ListTypeSpecifier">
                     <elementType localId="1283" name="fhir:Dosage.DoseAndRate" xsi:type="NamedTypeSpecifier"/>
                  </signature>
                  <operand localId="1281" locator="216:35-216:52" path="doseAndRate" xsi:type="Property">
                     <source localId="1280" locator="216:35-216:40" name="dosage" xsi:type="QueryLetRef"/>
                  </operand>
               </expression>
            </let>
            <let localId="1284" locator="217:7-217:27" identifier="timing">
               <expression localId="1286" locator="217:15-217:27" path="timing" xsi:type="Property">
                  <source localId="1285" locator="217:15-217:20" name="dosage" xsi:type="QueryLetRef"/>
               </expression>
            </let>
            <let localId="1287" locator="218:7-218:78" identifier="frequency">
               <expression localId="1298" locator="218:18-218:78" xsi:type="Coalesce">
                  <signature localId="1299" name="fhir:positiveInt" xsi:type="NamedTypeSpecifier"/>
                  <signature localId="1300" name="fhir:positiveInt" xsi:type="NamedTypeSpecifier"/>
                  <operand localId="1290" locator="218:27-218:52" path="frequencyMax" xsi:type="Property">
                     <source localId="1289" locator="218:27-218:39" path="repeat" xsi:type="Property">
                        <source localId="1288" locator="218:27-218:32" name="timing" xsi:type="QueryLetRef"/>
                     </source>
                  </operand>
                  <operand localId="1293" locator="218:55-218:77" path="frequency" xsi:type="Property">
                     <source localId="1292" locator="218:55-218:67" path="repeat" xsi:type="Property">
                        <source localId="1291" locator="218:55-218:60" name="timing" xsi:type="QueryLetRef"/>
                     </source>
                  </operand>
               </expression>
            </let>
            <let localId="1301" locator="219:7-219:99" identifier="period">
               <expression localId="1302" locator="219:15-219:99" classType="t:Quantity" xsi:type="Instance">
                  <element name="value">
                     <value localId="1307" name="ToDecimal" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand localId="1306" locator="219:40-219:59" path="period" xsi:type="Property">
                           <source localId="1305" locator="219:40-219:52" path="repeat" xsi:type="Property">
                              <source localId="1304" locator="219:40-219:45" name="timing" xsi:type="QueryLetRef"/>
                           </source>
                        </operand>
                     </value>
                  </element>
                  <element name="unit">
                     <value localId="1311" locator="219:68-219:97" path="value" xsi:type="Property">
                        <source localId="1310" locator="219:68-219:91" path="periodUnit" xsi:type="Property">
                           <source localId="1309" locator="219:68-219:80" path="repeat" xsi:type="Property">
                              <source localId="1308" locator="219:68-219:73" name="timing" xsi:type="QueryLetRef"/>
                           </source>
                        </source>
                     </value>
                  </element>
               </expression>
            </let>
            <let localId="1312" locator="220:7-220:42" identifier="doseRange">
               <expression localId="1313" locator="220:18-220:42" strict="false" xsi:type="As">
                  <operand localId="1315" locator="220:18-220:33" path="dose" xsi:type="Property">
                     <source localId="1314" locator="220:18-220:28" name="doseAndRate" xsi:type="QueryLetRef"/>
                  </operand>
                  <asTypeSpecifier localId="1316" locator="220:38-220:42" name="fhir:Range" xsi:type="NamedTypeSpecifier"/>
               </expression>
            </let>
            <let localId="1317" locator="221:7-221:54" identifier="doseQuantity">
               <expression localId="1318" locator="221:21-221:54" strict="false" xsi:type="As">
                  <operand localId="1320" locator="221:21-221:36" path="dose" xsi:type="Property">
                     <source localId="1319" locator="221:21-221:31" name="doseAndRate" xsi:type="QueryLetRef"/>
                  </operand>
                  <asTypeSpecifier localId="1321" locator="221:41-221:54" name="fhir:SimpleQuantity" xsi:type="NamedTypeSpecifier"/>
               </expression>
            </let>
            <let localId="1322" locator="222:7-222:50" identifier="dose">
               <expression localId="1330" locator="222:13-222:50" xsi:type="Coalesce">
                  <signature localId="1331" name="fhir:SimpleQuantity" xsi:type="NamedTypeSpecifier"/>
                  <signature localId="1332" name="fhir:SimpleQuantity" xsi:type="NamedTypeSpecifier"/>
                  <operand localId="1324" locator="222:22-222:35" path="high" xsi:type="Property">
                     <source localId="1323" locator="222:22-222:30" name="doseRange" xsi:type="QueryLetRef"/>
                  </operand>
                  <operand localId="1325" locator="222:38-222:49" name="doseQuantity" xsi:type="QueryLetRef"/>
               </expression>
            </let>
            <let localId="1333" locator="223:7-223:92" identifier="dosesPerDay">
               <expression localId="1353" locator="223:20-223:92" xsi:type="Coalesce">
                  <signature localId="1357" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                  <signature localId="1358" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                  <signature localId="1359" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                  <operand localId="1336" locator="223:29-223:54" name="ToDaily" xsi:type="FunctionRef">
                     <operand localId="1337" name="ToInteger" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand localId="1334" locator="223:37-223:45" name="frequency" xsi:type="QueryLetRef"/>
                     </operand>
                     <operand localId="1335" locator="223:48-223:53" name="period" xsi:type="QueryLetRef"/>
                  </operand>
                  <operand localId="1355" xsi:type="ToDecimal">
                     <signature localId="1356" name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                     <operand localId="1343" locator="223:57-223:86" xsi:type="Count">
                        <source localId="1340" locator="223:63-223:85" path="timeOfDay" xsi:type="Property">
                           <source localId="1339" locator="223:63-223:75" path="repeat" xsi:type="Property">
                              <source localId="1338" locator="223:63-223:68" name="timing" xsi:type="QueryLetRef"/>
                           </source>
                        </source>
                     </operand>
                  </operand>
                  <operand localId="1344" locator="223:89-223:91" valueType="t:Decimal" value="1.0" xsi:type="Literal"/>
               </expression>
            </let>
            <let localId="1360" locator="224:7-224:42" identifier="quantity">
               <expression localId="1363" locator="224:17-224:42" path="quantity" xsi:type="Property">
                  <source localId="1362" locator="224:17-224:33" path="dispenseRequest" scope="R" xsi:type="Property"/>
               </expression>
            </let>
            <return localId="1364" locator="225:5-226:37">
               <expression localId="1365" locator="226:7-226:37" xsi:type="Divide">
                  <signature localId="1377" name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                  <signature localId="1378" name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                  <operand localId="1376" name="ToQuantity" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                     <operand localId="1366" locator="226:7-226:14" name="quantity" xsi:type="QueryLetRef"/>
                  </operand>
                  <operand localId="1367" locator="226:18-226:37" xsi:type="Multiply">
                     <signature localId="1374" name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                     <signature localId="1375" name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                     <operand localId="1370" name="ToQuantity" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand localId="1368" locator="226:19-226:22" name="dose" xsi:type="QueryLetRef"/>
                     </operand>
                     <operand localId="1372" xsi:type="ToQuantity">
                        <signature localId="1373" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                        <operand localId="1369" locator="226:26-226:36" name="dosesPerDay" xsi:type="QueryLetRef"/>
                     </operand>
                  </operand>
               </expression>
            </return>
         </expression>
         <operand localId="1269" name="Request">
            <operandTypeSpecifier localId="1268" locator="212:42-212:60" name="fhir:MedicationRequest" xsi:type="NamedTypeSpecifier"/>
         </operand>
      </def>
      <def localId="1380" locator="228:1-241:39" name="dailyDose" context="Patient" accessLevel="Public" fluent="true" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="1380">
               <a:s>define fluent function dailyDose(Dispense &quot;MedicationDispense&quot;):
  </a:s>
               <a:s r="1489">
                  <a:s r="1489">
                     <a:s>
                        <a:s r="1383">
                           <a:s r="1384">
                              <a:s>
                                 <a:s>Dispense</a:s>
                              </a:s>
                           </a:s>
                           <a:s> D</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s>
                        <a:s>let
      </a:s>
                        <a:s r="1385">
                           <a:s>dosage: </a:s>
                           <a:s r="1386">
                              <a:s>singleton from </a:s>
                              <a:s r="1388">
                                 <a:s r="1387">
                                    <a:s>D</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="1388">
                                    <a:s>dosageInstruction</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
      </a:s>
                        <a:s r="1391">
                           <a:s>doseAndRate: </a:s>
                           <a:s r="1392">
                              <a:s>singleton from </a:s>
                              <a:s r="1394">
                                 <a:s r="1393">
                                    <a:s>dosage</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="1394">
                                    <a:s>doseAndRate</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
      </a:s>
                        <a:s r="1397">
                           <a:s>timing: </a:s>
                           <a:s r="1399">
                              <a:s r="1398">
                                 <a:s>dosage</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="1399">
                                 <a:s>timing</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
      </a:s>
                        <a:s r="1400">
                           <a:s>frequency: </a:s>
                           <a:s r="1411">
                              <a:s>Coalesce(</a:s>
                              <a:s r="1403">
                                 <a:s r="1402">
                                    <a:s r="1401">
                                       <a:s>timing</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="1402">
                                       <a:s>repeat</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="1403">
                                    <a:s>frequencyMax</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>, </a:s>
                              <a:s r="1406">
                                 <a:s r="1405">
                                    <a:s r="1404">
                                       <a:s>timing</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="1405">
                                       <a:s>repeat</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="1406">
                                    <a:s>frequency</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
      </a:s>
                        <a:s r="1414">
                           <a:s>period: </a:s>
                           <a:s r="1415">
                              <a:s>System.Quantity { </a:s>
                              <a:s>
                                 <a:s>value: </a:s>
                                 <a:s r="1419">
                                    <a:s r="1418">
                                       <a:s r="1417">
                                          <a:s>timing</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="1418">
                                          <a:s>repeat</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="1419">
                                       <a:s>period</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                              <a:s>, </a:s>
                              <a:s>
                                 <a:s>unit: </a:s>
                                 <a:s r="1424">
                                    <a:s r="1423">
                                       <a:s r="1422">
                                          <a:s r="1421">
                                             <a:s>timing</a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="1422">
                                             <a:s>repeat</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="1423">
                                          <a:s>periodUnit</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="1424">
                                       <a:s>value</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                              <a:s> }</a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
      </a:s>
                        <a:s r="1425">
                           <a:s>doseRange: </a:s>
                           <a:s r="1426">
                              <a:s r="1428">
                                 <a:s r="1427">
                                    <a:s>doseAndRate</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="1428">
                                    <a:s>dose</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> as </a:s>
                              <a:s r="1429">
                                 <a:s>Range</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
      </a:s>
                        <a:s r="1430">
                           <a:s>doseQuantity: </a:s>
                           <a:s r="1431">
                              <a:s r="1433">
                                 <a:s r="1432">
                                    <a:s>doseAndRate</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="1433">
                                    <a:s>dose</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> as </a:s>
                              <a:s r="1434">
                                 <a:s>SimpleQuantity</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
      </a:s>
                        <a:s r="1435">
                           <a:s>dose: </a:s>
                           <a:s r="1443">
                              <a:s>Coalesce(</a:s>
                              <a:s r="1437">
                                 <a:s r="1436">
                                    <a:s>doseRange</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="1437">
                                    <a:s>high</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>, </a:s>
                              <a:s r="1438">
                                 <a:s>doseQuantity</a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
      </a:s>
                        <a:s r="1446">
                           <a:s>dosesPerDay: </a:s>
                           <a:s r="1466">
                              <a:s>Coalesce(</a:s>
                              <a:s r="1449">
                                 <a:s>ToDaily(</a:s>
                                 <a:s r="1447">
                                    <a:s>frequency</a:s>
                                 </a:s>
                                 <a:s>, </a:s>
                                 <a:s r="1448">
                                    <a:s>period</a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                              <a:s>, </a:s>
                              <a:s r="1456">
                                 <a:s>Count(</a:s>
                                 <a:s r="1453">
                                    <a:s r="1452">
                                       <a:s r="1451">
                                          <a:s>timing</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="1452">
                                          <a:s>repeat</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="1453">
                                       <a:s>timeOfDay</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                              <a:s r="1457">, 1.0)</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s r="1473">
                        <a:s>return
      </a:s>
                        <a:s r="1474">
                           <a:s r="1476">
                              <a:s r="1475">
                                 <a:s>D</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="1476">
                                 <a:s>quantity</a:s>
                              </a:s>
                           </a:s>
                           <a:s> / </a:s>
                           <a:s r="1477">
                              <a:s>(</a:s>
                              <a:s r="1477">
                                 <a:s r="1478">
                                    <a:s>dose</a:s>
                                 </a:s>
                                 <a:s> * </a:s>
                                 <a:s r="1479">
                                    <a:s>dosesPerDay</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1489" locator="229:3-241:39" xsi:type="Query">
            <source localId="1383" locator="229:3-229:12" alias="D">
               <expression localId="1384" locator="229:3-229:10" name="Dispense" xsi:type="OperandRef"/>
            </source>
            <let localId="1385" locator="231:7-231:48" identifier="dosage">
               <expression localId="1386" locator="231:15-231:48" xsi:type="SingletonFrom">
                  <signature localId="1389" xsi:type="ListTypeSpecifier">
                     <elementType localId="1390" name="fhir:Dosage" xsi:type="NamedTypeSpecifier"/>
                  </signature>
                  <operand localId="1388" locator="231:30-231:48" path="dosageInstruction" scope="D" xsi:type="Property"/>
               </expression>
            </let>
            <let localId="1391" locator="232:7-232:52" identifier="doseAndRate">
               <expression localId="1392" locator="232:20-232:52" xsi:type="SingletonFrom">
                  <signature localId="1395" xsi:type="ListTypeSpecifier">
                     <elementType localId="1396" name="fhir:Dosage.DoseAndRate" xsi:type="NamedTypeSpecifier"/>
                  </signature>
                  <operand localId="1394" locator="232:35-232:52" path="doseAndRate" xsi:type="Property">
                     <source localId="1393" locator="232:35-232:40" name="dosage" xsi:type="QueryLetRef"/>
                  </operand>
               </expression>
            </let>
            <let localId="1397" locator="233:7-233:27" identifier="timing">
               <expression localId="1399" locator="233:15-233:27" path="timing" xsi:type="Property">
                  <source localId="1398" locator="233:15-233:20" name="dosage" xsi:type="QueryLetRef"/>
               </expression>
            </let>
            <let localId="1400" locator="234:7-234:78" identifier="frequency">
               <expression localId="1411" locator="234:18-234:78" xsi:type="Coalesce">
                  <signature localId="1412" name="fhir:positiveInt" xsi:type="NamedTypeSpecifier"/>
                  <signature localId="1413" name="fhir:positiveInt" xsi:type="NamedTypeSpecifier"/>
                  <operand localId="1403" locator="234:27-234:52" path="frequencyMax" xsi:type="Property">
                     <source localId="1402" locator="234:27-234:39" path="repeat" xsi:type="Property">
                        <source localId="1401" locator="234:27-234:32" name="timing" xsi:type="QueryLetRef"/>
                     </source>
                  </operand>
                  <operand localId="1406" locator="234:55-234:77" path="frequency" xsi:type="Property">
                     <source localId="1405" locator="234:55-234:67" path="repeat" xsi:type="Property">
                        <source localId="1404" locator="234:55-234:60" name="timing" xsi:type="QueryLetRef"/>
                     </source>
                  </operand>
               </expression>
            </let>
            <let localId="1414" locator="235:7-235:99" identifier="period">
               <expression localId="1415" locator="235:15-235:99" classType="t:Quantity" xsi:type="Instance">
                  <element name="value">
                     <value localId="1420" name="ToDecimal" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand localId="1419" locator="235:40-235:59" path="period" xsi:type="Property">
                           <source localId="1418" locator="235:40-235:52" path="repeat" xsi:type="Property">
                              <source localId="1417" locator="235:40-235:45" name="timing" xsi:type="QueryLetRef"/>
                           </source>
                        </operand>
                     </value>
                  </element>
                  <element name="unit">
                     <value localId="1424" locator="235:68-235:97" path="value" xsi:type="Property">
                        <source localId="1423" locator="235:68-235:91" path="periodUnit" xsi:type="Property">
                           <source localId="1422" locator="235:68-235:80" path="repeat" xsi:type="Property">
                              <source localId="1421" locator="235:68-235:73" name="timing" xsi:type="QueryLetRef"/>
                           </source>
                        </source>
                     </value>
                  </element>
               </expression>
            </let>
            <let localId="1425" locator="236:7-236:42" identifier="doseRange">
               <expression localId="1426" locator="236:18-236:42" strict="false" xsi:type="As">
                  <operand localId="1428" locator="236:18-236:33" path="dose" xsi:type="Property">
                     <source localId="1427" locator="236:18-236:28" name="doseAndRate" xsi:type="QueryLetRef"/>
                  </operand>
                  <asTypeSpecifier localId="1429" locator="236:38-236:42" name="fhir:Range" xsi:type="NamedTypeSpecifier"/>
               </expression>
            </let>
            <let localId="1430" locator="237:7-237:54" identifier="doseQuantity">
               <expression localId="1431" locator="237:21-237:54" strict="false" xsi:type="As">
                  <operand localId="1433" locator="237:21-237:36" path="dose" xsi:type="Property">
                     <source localId="1432" locator="237:21-237:31" name="doseAndRate" xsi:type="QueryLetRef"/>
                  </operand>
                  <asTypeSpecifier localId="1434" locator="237:41-237:54" name="fhir:SimpleQuantity" xsi:type="NamedTypeSpecifier"/>
               </expression>
            </let>
            <let localId="1435" locator="238:7-238:50" identifier="dose">
               <expression localId="1443" locator="238:13-238:50" xsi:type="Coalesce">
                  <signature localId="1444" name="fhir:SimpleQuantity" xsi:type="NamedTypeSpecifier"/>
                  <signature localId="1445" name="fhir:SimpleQuantity" xsi:type="NamedTypeSpecifier"/>
                  <operand localId="1437" locator="238:22-238:35" path="high" xsi:type="Property">
                     <source localId="1436" locator="238:22-238:30" name="doseRange" xsi:type="QueryLetRef"/>
                  </operand>
                  <operand localId="1438" locator="238:38-238:49" name="doseQuantity" xsi:type="QueryLetRef"/>
               </expression>
            </let>
            <let localId="1446" locator="239:7-239:92" identifier="dosesPerDay">
               <expression localId="1466" locator="239:20-239:92" xsi:type="Coalesce">
                  <signature localId="1470" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                  <signature localId="1471" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                  <signature localId="1472" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                  <operand localId="1449" locator="239:29-239:54" name="ToDaily" xsi:type="FunctionRef">
                     <operand localId="1450" name="ToInteger" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand localId="1447" locator="239:37-239:45" name="frequency" xsi:type="QueryLetRef"/>
                     </operand>
                     <operand localId="1448" locator="239:48-239:53" name="period" xsi:type="QueryLetRef"/>
                  </operand>
                  <operand localId="1468" xsi:type="ToDecimal">
                     <signature localId="1469" name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                     <operand localId="1456" locator="239:57-239:86" xsi:type="Count">
                        <source localId="1453" locator="239:63-239:85" path="timeOfDay" xsi:type="Property">
                           <source localId="1452" locator="239:63-239:75" path="repeat" xsi:type="Property">
                              <source localId="1451" locator="239:63-239:68" name="timing" xsi:type="QueryLetRef"/>
                           </source>
                        </source>
                     </operand>
                  </operand>
                  <operand localId="1457" locator="239:89-239:91" valueType="t:Decimal" value="1.0" xsi:type="Literal"/>
               </expression>
            </let>
            <return localId="1473" locator="240:5-241:39">
               <expression localId="1474" locator="241:7-241:39" xsi:type="Divide">
                  <signature localId="1487" name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                  <signature localId="1488" name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                  <operand localId="1486" name="ToQuantity" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                     <operand localId="1476" locator="241:7-241:16" path="quantity" scope="D" xsi:type="Property"/>
                  </operand>
                  <operand localId="1477" locator="241:20-241:39" xsi:type="Multiply">
                     <signature localId="1484" name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                     <signature localId="1485" name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                     <operand localId="1480" name="ToQuantity" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand localId="1478" locator="241:21-241:24" name="dose" xsi:type="QueryLetRef"/>
                     </operand>
                     <operand localId="1482" xsi:type="ToQuantity">
                        <signature localId="1483" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                        <operand localId="1479" locator="241:28-241:38" name="dosesPerDay" xsi:type="QueryLetRef"/>
                     </operand>
                  </operand>
               </expression>
            </return>
         </expression>
         <operand localId="1382" name="Dispense">
            <operandTypeSpecifier localId="1381" locator="228:43-228:62" name="fhir:MedicationDispense" xsi:type="NamedTypeSpecifier"/>
         </operand>
      </def>
      <def localId="1491" locator="254:3-257:60" name="STI_testing" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="1491">
               <a:s>//need to define
  define STI_testing:
    </a:s>
               <a:s r="1514">
                  <a:s>
                     <a:s r="1492">
                        <a:s r="1493">
                           <a:s r="1493">
                              <a:s>[Procedure]</a:s>
                           </a:s>
                        </a:s>
                        <a:s> P</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
  </a:s>
                  <a:s r="1494">
                     <a:s>where </a:s>
                     <a:s r="1494">
                        <a:s r="1495">
                           <a:s r="1497">
                              <a:s r="1496">
                                 <a:s>P</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="1497">
                                 <a:s>status</a:s>
                              </a:s>
                           </a:s>
                           <a:s> = </a:s>
                           <a:s r="1498">
                              <a:s>'completed'</a:s>
                           </a:s>
                        </a:s>
                        <a:s>
  and </a:s>
                        <a:s r="1503">
                           <a:s r="1505">
                              <a:s r="1504">
                                 <a:s>P</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="1505">
                                 <a:s>code</a:s>
                              </a:s>
                           </a:s>
                           <a:s> ~ </a:s>
                           <a:s r="1507">
                              <a:s r="1506">
                                 <a:s>Concepts</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="1507">
                                 <a:s>&quot;STI testing and treatment services&quot;</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1514" locator="255:5-257:60" xsi:type="Query">
            <source localId="1492" locator="255:5-255:17" alias="P">
               <expression localId="1493" locator="255:5-255:15" dataType="fhir:Procedure" templateId="http://hl7.org/fhir/StructureDefinition/Procedure" xsi:type="Retrieve"/>
            </source>
            <where localId="1494" locator="256:3-257:60" xsi:type="And">
               <operand localId="1495" locator="256:9-256:30" xsi:type="Equal">
                  <signature localId="1501" name="t:String" xsi:type="NamedTypeSpecifier"/>
                  <signature localId="1502" name="t:String" xsi:type="NamedTypeSpecifier"/>
                  <operand localId="1499" name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                     <signature localId="1500" name="fhir:ProcedureStatus" xsi:type="NamedTypeSpecifier"/>
                     <operand localId="1497" locator="256:9-256:16" path="status" scope="P" xsi:type="Property"/>
                  </operand>
                  <operand localId="1498" locator="256:20-256:30" valueType="t:String" value="completed" xsi:type="Literal"/>
               </operand>
               <operand localId="1503" locator="257:7-257:60" xsi:type="Equivalent">
                  <signature localId="1512" name="t:Concept" xsi:type="NamedTypeSpecifier"/>
                  <signature localId="1513" name="t:Concept" xsi:type="NamedTypeSpecifier"/>
                  <operand localId="1508" name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                     <operand localId="1505" locator="257:7-257:12" path="code" scope="P" xsi:type="Property"/>
                  </operand>
                  <operand localId="1510" xsi:type="ToConcept">
                     <signature localId="1511" name="t:Code" xsi:type="NamedTypeSpecifier"/>
                     <operand localId="1507" locator="257:16-257:60" name="STI testing and treatment services" libraryName="Concepts" xsi:type="CodeRef"/>
                  </operand>
               </operand>
            </where>
         </expression>
      </def>
      <def localId="1515" locator="263:1-273:5" name="ExtractMedicationCode" context="Patient" accessLevel="Public" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="1515">
               <a:s>/**
 * @description Takes a choice between a Medication and a CodeableConcept and returns just the code of the medication
 */
define function ExtractMedicationCode(choice Choice&lt;FHIR.CodeableConcept, FHIR.Reference>):
  </a:s>
               <a:s r="1520">
                  <a:s r="1520">
                     <a:s>case
	  </a:s>
                     <a:s r="1521">
                        <a:s>when </a:s>
                        <a:s r="1522">
                           <a:s r="1523">
                              <a:s>choice</a:s>
                           </a:s>
                           <a:s> is </a:s>
                           <a:s r="1524">
                              <a:s>FHIR.CodeableConcept</a:s>
                           </a:s>
                        </a:s>
                        <a:s> then
    	</a:s>
                        <a:s r="1525">
                           <a:s r="1526">
                              <a:s>choice</a:s>
                           </a:s>
                           <a:s> as </a:s>
                           <a:s r="1527">
                              <a:s>FHIR.CodeableConcept</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s r="1528">
                        <a:s>when </a:s>
                        <a:s r="1529">
                           <a:s r="1530">
                              <a:s>choice</a:s>
                           </a:s>
                           <a:s> is </a:s>
                           <a:s r="1531">
                              <a:s>FHIR.Reference</a:s>
                           </a:s>
                        </a:s>
                        <a:s> then
      </a:s>
                        <a:s r="1562">
                           <a:s>First(</a:s>
                           <a:s r="1559">
                              <a:s>
                                 <a:s r="1532">
                                    <a:s r="1533">
                                       <a:s r="1533">
                                          <a:s>[Medication]</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> M</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> 
        </a:s>
                              <a:s r="1534">
                                 <a:s>where </a:s>
                                 <a:s r="1534">
                                    <a:s r="1536">
                                       <a:s r="1535">
                                          <a:s>M</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="1536">
                                          <a:s>id</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> = </a:s>
                                    <a:s r="1549">
                                       <a:s>Last(</a:s>
                                       <a:s r="1544">
                                          <a:s>Split(</a:s>
                                          <a:s r="1538">
                                             <a:s r="1537">
                                                <a:s>choice</a:s>
                                             </a:s>
                                             <a:s>.</a:s>
                                             <a:s r="1538">
                                                <a:s>reference</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s>, </a:s>
                                          <a:s r="1539">
                                             <a:s>'/'</a:s>
                                          </a:s>
                                          <a:s>)</a:s>
                                       </a:s>
                                       <a:s>)</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                              <a:s>
        </a:s>
                              <a:s r="1554">
                                 <a:s>return </a:s>
                                 <a:s r="1555">
                                    <a:s r="1557">
                                       <a:s r="1556">
                                          <a:s>M</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="1557">
                                          <a:s>code</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> as </a:s>
                                    <a:s r="1558">
                                       <a:s>FHIR.CodeableConcept</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                           <a:s>)</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
    else
      </a:s>
                     <a:s r="1577">
                        <a:s>Message(</a:s>
                        <a:s r="1563">
                           <a:s r="1564">null as </a:s>
                           <a:s r="1565">
                              <a:s>FHIR.CodeableConcept</a:s>
                           </a:s>
                        </a:s>
                        <a:s r="1566">, true, </a:s>
                        <a:s r="1567">
                           <a:s>'1'</a:s>
                        </a:s>
                        <a:s>, </a:s>
                        <a:s r="1568">
                           <a:s>'Error'</a:s>
                        </a:s>
                        <a:s>, </a:s>
                        <a:s r="1569">
                           <a:s>'Cannot compute a medication code'</a:s>
                        </a:s>
                        <a:s>)</a:s>
                     </a:s>
                     <a:s> // TODO: I'm sure that this is supported somehow?
  end</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1520" locator="264:3-273:5" xsi:type="Case">
            <caseItem localId="1521" locator="265:4-266:35">
               <when localId="1522" locator="265:9-265:38" xsi:type="Is">
                  <operand localId="1523" locator="265:9-265:14" name="choice" xsi:type="OperandRef"/>
                  <isTypeSpecifier localId="1524" locator="265:19-265:38" name="fhir:CodeableConcept" xsi:type="NamedTypeSpecifier"/>
               </when>
               <then localId="1525" locator="266:6-266:35" strict="false" xsi:type="As">
                  <operand localId="1526" locator="266:6-266:11" name="choice" xsi:type="OperandRef"/>
                  <asTypeSpecifier localId="1527" locator="266:16-266:35" name="fhir:CodeableConcept" xsi:type="NamedTypeSpecifier"/>
               </then>
            </caseItem>
            <caseItem localId="1528" locator="267:5-270:46">
               <when localId="1529" locator="267:10-267:33" xsi:type="Is">
                  <operand localId="1530" locator="267:10-267:15" name="choice" xsi:type="OperandRef"/>
                  <isTypeSpecifier localId="1531" locator="267:20-267:33" name="fhir:Reference" xsi:type="NamedTypeSpecifier"/>
               </when>
               <then localId="1562" locator="268:7-270:46" xsi:type="First">
                  <source localId="1559" locator="268:13-270:45" xsi:type="Query">
                     <source localId="1532" locator="268:13-268:26" alias="M">
                        <expression localId="1533" locator="268:13-268:24" dataType="fhir:Medication" templateId="http://hl7.org/fhir/StructureDefinition/Medication" xsi:type="Retrieve"/>
                     </source>
                     <where localId="1534" locator="269:9-269:55" xsi:type="Equal">
                        <signature localId="1552" name="t:String" xsi:type="NamedTypeSpecifier"/>
                        <signature localId="1553" name="t:String" xsi:type="NamedTypeSpecifier"/>
                        <operand localId="1550" name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <signature localId="1551" name="fhir:string" xsi:type="NamedTypeSpecifier"/>
                           <operand localId="1536" locator="269:15-269:18" path="id" scope="M" xsi:type="Property"/>
                        </operand>
                        <operand localId="1549" locator="269:22-269:55" xsi:type="Last">
                           <source localId="1544" locator="269:27-269:54" xsi:type="Split">
                              <stringToSplit localId="1545" name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                 <signature localId="1546" name="fhir:string" xsi:type="NamedTypeSpecifier"/>
                                 <operand localId="1538" locator="269:33-269:48" path="reference" xsi:type="Property">
                                    <source localId="1537" locator="269:33-269:38" name="choice" xsi:type="OperandRef"/>
                                 </operand>
                              </stringToSplit>
                              <separator localId="1539" locator="269:51-269:53" valueType="t:String" value="/" xsi:type="Literal"/>
                           </source>
                        </operand>
                     </where>
                     <return localId="1554" locator="270:9-270:45">
                        <expression localId="1555" locator="270:16-270:45" strict="false" xsi:type="As">
                           <operand localId="1557" locator="270:16-270:21" path="code" scope="M" xsi:type="Property"/>
                           <asTypeSpecifier localId="1558" locator="270:26-270:45" name="fhir:CodeableConcept" xsi:type="NamedTypeSpecifier"/>
                        </expression>
                     </return>
                  </source>
               </then>
            </caseItem>
            <else localId="1577" locator="272:7-272:99" xsi:type="Message">
               <signature localId="1578" name="fhir:CodeableConcept" xsi:type="NamedTypeSpecifier"/>
               <signature localId="1579" name="t:Boolean" xsi:type="NamedTypeSpecifier"/>
               <signature localId="1580" name="t:String" xsi:type="NamedTypeSpecifier"/>
               <signature localId="1581" name="t:String" xsi:type="NamedTypeSpecifier"/>
               <signature localId="1582" name="t:String" xsi:type="NamedTypeSpecifier"/>
               <source localId="1563" locator="272:15-272:42" strict="false" xsi:type="As">
                  <operand localId="1564" locator="272:15-272:18" xsi:type="Null"/>
                  <asTypeSpecifier localId="1565" locator="272:23-272:42" name="fhir:CodeableConcept" xsi:type="NamedTypeSpecifier"/>
               </source>
               <condition localId="1566" locator="272:45-272:48" valueType="t:Boolean" value="true" xsi:type="Literal"/>
               <code localId="1567" locator="272:51-272:53" valueType="t:String" value="1" xsi:type="Literal"/>
               <severity localId="1568" locator="272:56-272:62" valueType="t:String" value="Error" xsi:type="Literal"/>
               <message localId="1569" locator="272:65-272:98" valueType="t:String" value="Cannot compute a medication code" xsi:type="Literal"/>
            </else>
         </expression>
         <operand localId="1519" name="choice">
            <operandTypeSpecifier localId="1518" locator="263:46-263:89" xsi:type="ChoiceTypeSpecifier">
               <choice localId="1516" locator="263:53-263:72" name="fhir:CodeableConcept" xsi:type="NamedTypeSpecifier"/>
               <choice localId="1517" locator="263:75-263:88" name="fhir:Reference" xsi:type="NamedTypeSpecifier"/>
            </operandTypeSpecifier>
         </operand>
      </def>
      <def localId="1583" locator="278:1-282:5" name="getObservationCode" context="Patient" accessLevel="Public" fluent="true" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="1583">
               <a:s>/**
 * @description Returns the code of an Observation CodeableConcept
 */
define fluent function getObservationCode(observation FHIR.Observation):
  </a:s>
               <a:s r="1586">
                  <a:s r="1586">
                     <a:s>case 
    </a:s>
                     <a:s r="1587">
                        <a:s>when </a:s>
                        <a:s r="1588">
                           <a:s r="1590">
                              <a:s r="1589">
                                 <a:s>observation</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="1590">
                                 <a:s>code</a:s>
                              </a:s>
                           </a:s>
                           <a:s> is </a:s>
                           <a:s r="1591">
                              <a:s>FHIR.CodeableConcept</a:s>
                           </a:s>
                        </a:s>
                        <a:s> then </a:s>
                        <a:s r="1604">
                           <a:s r="1596">
                              <a:s r="1592">
                                 <a:s>(</a:s>
                                 <a:s r="1592">
                                    <a:s r="1594">
                                       <a:s r="1593">
                                          <a:s>observation</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="1594">
                                          <a:s>value</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> as </a:s>
                                    <a:s r="1595">
                                       <a:s>CodeableConcept</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="1596">
                                 <a:s>coding</a:s>
                              </a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="1604">
                              <a:s>code</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s r="1606">
    else null
  end</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1586" locator="279:3-282:5" xsi:type="Case">
            <caseItem localId="1587" locator="280:5-280:105">
               <when localId="1588" locator="280:10-280:49" xsi:type="Is">
                  <operand localId="1590" locator="280:10-280:25" path="code" xsi:type="Property">
                     <source localId="1589" locator="280:10-280:20" name="observation" xsi:type="OperandRef"/>
                  </operand>
                  <isTypeSpecifier localId="1591" locator="280:30-280:49" name="fhir:CodeableConcept" xsi:type="NamedTypeSpecifier"/>
               </when>
               <then localId="1604" locator="280:56-280:105" xsi:type="Query">
                  <source localId="1603" alias="$this">
                     <expression localId="1596" locator="280:56-280:100" path="coding" xsi:type="Property">
                        <source localId="1592" locator="280:56-280:93" strict="false" xsi:type="As">
                           <operand localId="1594" locator="280:57-280:73" path="value" xsi:type="Property">
                              <source localId="1593" locator="280:57-280:67" name="observation" xsi:type="OperandRef"/>
                           </operand>
                           <asTypeSpecifier localId="1595" locator="280:78-280:92" name="fhir:CodeableConcept" xsi:type="NamedTypeSpecifier"/>
                        </source>
                     </expression>
                  </source>
                  <where localId="1600" xsi:type="Not">
                     <operand localId="1599" xsi:type="IsNull">
                        <operand localId="1598" path="code" xsi:type="Property">
                           <source localId="1597" name="$this" xsi:type="AliasRef"/>
                        </operand>
                     </operand>
                  </where>
                  <return localId="1605" distinct="false">
                     <expression localId="1602" path="code" xsi:type="Property">
                        <source localId="1601" name="$this" xsi:type="AliasRef"/>
                     </expression>
                  </return>
               </then>
            </caseItem>
            <else localId="1607" xsi:type="As">
               <operand localId="1606" locator="281:10-281:13" xsi:type="Null"/>
               <asTypeSpecifier localId="1608" xsi:type="ListTypeSpecifier">
                  <elementType localId="1609" name="fhir:code" xsi:type="NamedTypeSpecifier"/>
               </asTypeSpecifier>
            </else>
         </expression>
         <operand localId="1585" name="observation">
            <operandTypeSpecifier localId="1584" locator="278:55-278:70" name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
         </operand>
      </def>
      <def localId="1610" locator="287:1-288:45" name="getObservationCodes" context="Patient" accessLevel="Public" fluent="true" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="1610">
               <a:s>/**
 * @description Returns a list of codes of an a list of Observations
 */
define fluent function getObservationCodes(obslist List&lt;FHIR.Observation>):
  </a:s>
               <a:s r="1619">
                  <a:s r="1619">
                     <a:s>
                        <a:s r="1614">
                           <a:s r="1615">
                              <a:s>
                                 <a:s>obslist</a:s>
                              </a:s>
                           </a:s>
                           <a:s> obs</a:s>
                        </a:s>
                     </a:s>
                     <a:s> </a:s>
                     <a:s r="1616">
                        <a:s>return </a:s>
                        <a:s r="1618">
                           <a:s r="1617">
                              <a:s>obs</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="1618">
                              <a:s>getObservationCode()</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1619" locator="288:3-288:45" xsi:type="Query">
            <source localId="1614" locator="288:3-288:13" alias="obs">
               <expression localId="1615" locator="288:3-288:9" name="obslist" xsi:type="OperandRef"/>
            </source>
            <return localId="1616" locator="288:15-288:45">
               <expression localId="1618" locator="288:22-288:45" name="getObservationCode" xsi:type="FunctionRef">
                  <operand localId="1617" locator="288:22-288:24" name="obs" xsi:type="AliasRef"/>
               </expression>
            </return>
         </expression>
         <operand localId="1613" name="obslist">
            <operandTypeSpecifier localId="1611" locator="287:52-287:73" xsi:type="ListTypeSpecifier">
               <elementType localId="1612" locator="287:57-287:72" name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
            </operandTypeSpecifier>
         </operand>
      </def>
   </statements>
</library>
