

<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE HTML>
<html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta content="text/html;charset=utf-8" http-equiv="Content-Type"/>
    <title>HIV.B9.DT Logic - XML Representation - WHO SMART Guidelines - HIV v1.0.0</title>

    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta name="author" content="http://hl7.org/fhir"/>

    <link href="fhir.css" rel="stylesheet"/>
    <link href="assets/css/fa-all.css" rel="stylesheet" type="text/css" />
    <!-- Bootstrap core CSS -->
    <link href="assets/css/bootstrap-fhir.css" rel="stylesheet"/>

    <!-- Project extras -->
    <link href="assets/css/project.css" rel="stylesheet"/>
    <link href="assets/css/pygments-manni.css" rel="stylesheet"/>
    <link href="assets/css/jquery-ui.css" rel="stylesheet"/>
  	<link href="assets/css/prism.css" rel="stylesheet" />
    <!-- Placeholder for child template CSS declarations -->
    <link href="assets/css/who.css" rel="stylesheet"/>
    <link href="assets/css/lforms.min.css" rel="stylesheet"/>


    <script type="text/javascript" src="fhir-table-scripts.js"> </script>

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="assets/js/html5shiv.js"></script>
    <script src="assets/js/respond.min.js"></script>
    <![endif]-->

    <!-- Favicons -->
    <link rel="fhir-logo" sizes="144x144" href="assets/ico/icon-fhir-144.png"/>
    <link rel="fhir-logo" sizes="114x114" href="assets/ico/icon-fhir-114.png"/>
    <link rel="fhir-logo" sizes="72x72" href="assets/ico/icon-fhir-72.png"/>
    <link rel="fhir-logo" href="assets/ico/icon-fhir-57.png"/>
    <link rel="shortcut icon" href="assets/ico/favicon.png"/>
  </head>
  <body onload="document.body.style.opacity='1'">

	  <script src="assets/js/prism.js"></script>

    <style type="text/css">h2{--heading-prefix:"5.1.15"}
    h3,h4,h5,h6{--heading-prefix:"5.1.15"}</style>
    <div id="segment-header" class="segment">  <!-- segment-header -->

      <div id="segment-navbar" class="segment">  <!-- segment-navbar -->
        <div id="stripe"> </div>
        <div class="container">  <!-- container -->
          <!-- HEADER CONTENT -->
  
          <nav class="navbar navbar-inverse">
            <!--status-bar-->
            <div class="container">
              <button data-target=".navbar-inverse-collapse" class="navbar-toggle" data-toggle="collapse" type="button">
                <span class="icon-bar"> </span>
                <span class="icon-bar"> </span>
                <span class="icon-bar"> </span>
              </button>
              <a class="navbar-brand hidden" href="http://hl7.org/fhir/R4/index.html">FHIR</a>
              <div class="nav-collapse collapse navbar-inverse-collapse">
                <!-- menu.xml  -->

<ul xmlns="http://www.w3.org/1999/xhtml" class="nav navbar-nav">
  <li class="dropdown">
    <a data-toggle="dropdown" href="#" class="dropdown-toggle">Home
      <b class="caret"></b>
    </a>
    <ul class="dropdown-menu">
      <li>
        <a href="index.html">Summary</a>
      </li>
      <li>
        <a href="changes.html">Changes</a>
      </li>
      <li>
        <a href="dependencies.html">Dependencies</a>
      </li>
      <li>
        <a href="references.html">References</a>
      </li>
      <li>
        <a href="adapting.html">Adapting Guidelines for Country use</a>
      </li>
    </ul>
  </li>
  <li class="dropdown">
    <a data-toggle="dropdown" href="#" class="dropdown-toggle">Business Requirements
      <b class="caret"></b>
    </a>
    <ul class="dropdown-menu">
      <li>
        <a href="concepts.html">Concepts</a>
      </li>
      <li>
        <a href="personas.html">Generic Personas</a>
      </li>
      <li>
        <a href="scenarios.html">User Scenarios</a>
      </li>
      <li>
        <a href="business-processes.html">Business Processes</a>
      </li>
      <li>
        <a href="dictionary.html">Data Dictionary</a>
      </li>
      <li>
        <a href="decision-logic.html">Decision-support Logic</a>
      </li>
      <li>
        <a href="indicators.html">Indicator and Performance Metrics</a>
      </li>
      <li>
        <a href="functional-requirements.html">Functional Requirements</a>
      </li>
      <li>
        <a href="non-functional-requirements.html">Non-functional Requirements</a>
      </li>
    </ul>
  </li>
  <li class="dropdown">
    <a data-toggle="dropdown" href="#" class="dropdown-toggle">Data Models and Exchange
      <b class="caret"></b>
    </a>
    <ul class="dropdown-menu">
      <li>
        <a href="system-actors.html">System Actors</a>
      </li>
      <li>
        <a href="sequence-diagrams.html">Sequence Diagrams</a>
      </li>
      <li>
        <a href="transactions.html">Transactions</a>
      </li>
      <li>
        <a href="indicators-measures.html">Indicators and Measures</a>
      </li>
      <li>
        <a href="codings.html">Codings</a>
      </li>
    </ul>
  </li>
  <li class="dropdown">
    <a data-toggle="dropdown" href="#" class="dropdown-toggle">Deployment
      <b class="caret"></b>
    </a>
    <ul class="dropdown-menu">
      <li>
        <a href="security-privacy.html">Security and Privacy Considerations</a>
      </li>
      <li>
        <a href="testing.html">Testing</a>
      </li>
      <li>
        <a href="test-data.html">Test Data</a>
      </li>
      <li>
        <a href="reference-implementations.html">Reference Implementations</a>
      </li>
      <li>
        <a href="downloads.html">Downloads</a>
      </li>
    </ul>
  </li>
  <li class="dropdown">
    <a data-toggle="dropdown" href="#" class="dropdown-toggle">Indices
      <b class="caret"></b>
    </a>
    <ul class="dropdown-menu">
      <li>
        <a href="artifacts.html">Artifact Index</a>
      </li>
      <li>
        <a href="maps.html">Mappings</a>
      </li>
    </ul>
  </li>
</ul>
              </div>  <!-- /.nav-collapse -->

              <div class="sf_colsIn col-md-8  navbar-right-container" data-sf-element="LanguageSelectorSearch" data-placeholder-label="Language Selector and Search" style="display: flex; justify-content: flex-end; align-items: center;">
                <!-- This div will be pushed to the right -->
                <div class="language-selector" style="margin-left: auto; background-color: #00477d; color: white;">
                  <i class="fa fa-language fa-lg"></i>
                  <label for="language-selector"> </label>
                  <select onChange="openLink(value)" id="language-selector" name="language-selector">
                    <option disabled selected>Select language</option>
                    <option value="en" class="selected">English</option>
                  </select>
                  <i class="fas fa-angle-down"></i>
                </div>
                <!-- Search Content -->
              </div>
            </div>  <!-- /.container -->
          </nav>  <!-- /.navbar -->
        <!-- /HEADER CONTENT -->
        </div>  <!-- /container -->
      </div>  <!-- /segment-navbar -->
      

      <div class="container" style=" justify-content: space-between; align-items: left;">

        <!-- Placeholder for child template header declarations -->
<div id="project-nav">
    <a id="who-logo" no-external="true" href="index.html">
      
<img height="50" style="margin:7px" alt="Welcome on standards website" src="assets/images/h-logo-blue.svg"/>
        
    </a>
</div>

 <div id="family-nav">
  <a id="fhir-logo" no-external="true" href="http://hl7.org/fhir">  </a>
</div> 


        <div id="ig-status" class="ig-status-active">
          <p><span style="font-size:12pt;font-weight:bold">WHO SMART Guidelines - HIV</span>
            <br/>
            <span style="display:inline-block;">1.0.0 - release


            </span>
          </p>
        </div>
      </div> <!-- /container -->
    </div>  <!-- /segment-header -->


    <!--status-bar-->

    <div id="segment-breadcrumb" class="segment">  <!-- segment-breadcrumb -->
      <div class="container">  <!-- container -->
        <ul class="breadcrumb">
          <li><a href='toc.html'><b>Table of Contents</b></a></li><li><a href='indices.html'><b>Indices</b></a></li><li><a href='artifacts.html'><b>Artifact Index</b></a></li><li><b>HIV.B9.DT Logic</b></li>

        </ul>
      </div>  <!-- /container -->
    </div>  <!-- /segment-breadcrumb -->

    <a name="top"> </a>
    <div id="segment-content" class="segment">  <!-- segment-content -->
      <div class="container">  <!-- container -->
        <div class="row">
          <div class="inner-wrapper">

<div style="counter-reset: section 7" class="col-12">
<!--ReleaseHeader--><p id="publish-box">This page is part of the WHO SMART Guidelines - HIV (v1.0.0: Release) based on <a data-no-external="true" href="http://hl7.org/fhir/R4">FHIR (HL7® FHIR® Standard) R4</a>. This is the current published version.  For a full list of available versions, see the <a data-no-external="true" href="http://smart.who.int/hiv/history.html">Directory of published versions</a></p><!--EndReleaseHeader-->









<ul class="nav nav-tabs">

  <li>
    <a href="Library-HIVB9DTLogic.html">Narrative Content</a>
  </li>



  
    <li class="active">
      <a href="#">XML</a>
    </li>
  


  
    <li>
      <a href="Library-HIVB9DTLogic.json.html">JSON</a>
    </li>
  


  
    <li>
      <a href="Library-HIVB9DTLogic.ttl.html">TTL</a>
    </li>
  



</ul>


<a name="root"> </a>


<h2 id="root">: HIV.B9.DT Logic - XML Representation</h2>

  <table class="colsd">
    <tr>

      <td colspan="2">
        
          Draft
          
            as of 2025-07-08
          
        
      </td>

    </tr>
  </table>


<p><a href="Library-HIVB9DTLogic.xml" no-download="true">Raw xml</a> | <a href="Library-HIVB9DTLogic.xml" download>Download</a></p>

  <!-- insert intro if present -->
  



  <pre class="xml" style="white-space: pre; text-wrap: nowrap; width: auto;"><code style="white-space: pre; text-wrap: nowrap;">
&lt;<a href="http://hl7.org/fhir/R4/library.html#Library">Library</a> xmlns=&quot;http://hl7.org/fhir&quot;&gt;
  &lt;<a href="http://hl7.org/fhir/R4/library.html#Library.id">id</a> <a href="http://hl7.org/fhir/R4/datatypes.html#string">value</a>=&quot;HIVB9DTLogic&quot;/&gt;
  &lt;<a href="http://hl7.org/fhir/R4/library.html#Library.meta">meta</a>&gt;
    &lt;<a href="http://hl7.org/fhir/R4/datatypes.html#Meta#Meta.profile">profile</a>
             <a href="http://hl7.org/fhir/R4/datatypes.html#canonical">value</a>=&quot;http://hl7.org/fhir/uv/crmi/StructureDefinition/crmi-shareablelibrary&quot;/&gt;
    &lt;<a href="http://hl7.org/fhir/R4/datatypes.html#Meta#Meta.profile">profile</a>
             <a href="http://hl7.org/fhir/R4/datatypes.html#canonical">value</a>=&quot;http://hl7.org/fhir/uv/crmi/StructureDefinition/crmi-publishablelibrary&quot;/&gt;
    &lt;<a href="http://hl7.org/fhir/R4/datatypes.html#Meta#Meta.profile">profile</a>
             <a href="http://hl7.org/fhir/R4/datatypes.html#canonical">value</a>=&quot;http://hl7.org/fhir/uv/cql/StructureDefinition/cql-library&quot;/&gt;
    &lt;<a href="http://hl7.org/fhir/R4/datatypes.html#Meta#Meta.profile">profile</a>
             <a href="http://hl7.org/fhir/R4/datatypes.html#canonical">value</a>=&quot;http://hl7.org/fhir/uv/cql/StructureDefinition/cql-module&quot;/&gt;
  &lt;/meta&gt;
  &lt;<a href="http://hl7.org/fhir/R4/library.html#Library.text">text</a>&gt;
    &lt;<a href="http://hl7.org/fhir/R4/datatypes.html#Narrative#Narrative.status">status</a> <a href="http://hl7.org/fhir/R4/datatypes.html#code">value</a>=&quot;extensions&quot;/&gt;
    &lt;div xmlns=&quot;http://www.w3.org/1999/xhtml&quot;&gt;
&lt;div&gt;
    &lt;table class=&quot;grid dict&quot;&gt;
        
        
        &lt;tr&gt;
            &lt;th scope=&quot;row&quot;&gt;&lt;b&gt;Title: &lt;/b&gt;&lt;/th&gt;
            &lt;td style=&quot;padding-left: 4px;&quot;&gt;HIV.B9.DT Logic&lt;/td&gt;
        &lt;/tr&gt;
        

        
        
        &lt;tr&gt;
            &lt;th scope=&quot;row&quot;&gt;&lt;b&gt;Id: &lt;/b&gt;&lt;/th&gt;
            &lt;td style=&quot;padding-left: 4px;&quot;&gt;HIVB9DTLogic&lt;/td&gt;
        &lt;/tr&gt;
        

        
        
        &lt;tr&gt;
            &lt;th scope=&quot;row&quot;&gt;&lt;b&gt;Version: &lt;/b&gt;&lt;/th&gt;
            &lt;td style=&quot;padding-left: 4px;&quot;&gt;1.0.0&lt;/td&gt;
        &lt;/tr&gt;
        

        
        &lt;tr&gt;
            &lt;th scope=&quot;row&quot;&gt;&lt;b&gt;Url: &lt;/b&gt;&lt;/th&gt;
            &lt;td style=&quot;padding-left: 4px;&quot;&gt;&lt;a href=&quot;Library-HIVB9DTLogic.html&quot;&gt;HIV.B9.DT Logic&lt;/a&gt;&lt;/td&gt;
        &lt;/tr&gt;
        

        

        

        
        &lt;tr&gt;
            &lt;th scope=&quot;row&quot;&gt;&lt;b&gt;Status: &lt;/b&gt;&lt;/th&gt;
            &lt;td style=&quot;padding-left: 4px;&quot;&gt;draft&lt;/td&gt;
        &lt;/tr&gt;
        

        
        &lt;tr&gt;
            &lt;th scope=&quot;row&quot;&gt;&lt;b&gt;Experimental: &lt;/b&gt;&lt;/th&gt;
            &lt;td style=&quot;padding-left: 4px;&quot;&gt;true&lt;/td&gt;
        &lt;/tr&gt;
        

        
        &lt;tr&gt;
            &lt;th scope=&quot;row&quot;&gt;&lt;b&gt;Type: &lt;/b&gt;&lt;/th&gt;
            &lt;td style=&quot;padding-left: 4px;&quot;&gt;
                
                    
                        
                        &lt;p style=&quot;margin-bottom: 5px;&quot;&gt;
                            &lt;b&gt;system: &lt;/b&gt; &lt;span&gt;&lt;a href=&quot;http://terminology.hl7.org/6.0.2/CodeSystem-library-type.html&quot;&gt;http://terminology.hl7.org/CodeSystem/library-type&lt;/a&gt;&lt;/span&gt;
                        &lt;/p&gt;
                        
                        
                        &lt;p style=&quot;margin-bottom: 5px;&quot;&gt;
                            &lt;b&gt;code: &lt;/b&gt; &lt;span&gt;logic-library&lt;/span&gt;
                        &lt;/p&gt;
                        
                        
                    
                
                
            &lt;/td&gt;
        &lt;/tr&gt;
        

        

        
        &lt;tr&gt;
            &lt;th scope=&quot;row&quot;&gt;&lt;b&gt;Date: &lt;/b&gt;&lt;/th&gt;
            &lt;td style=&quot;padding-left: 4px;&quot;&gt;2025-07-08 23:21:58+0200&lt;/td&gt;
        &lt;/tr&gt;
        

        
        &lt;tr&gt;
            &lt;th scope=&quot;row&quot;&gt;&lt;b&gt;Publisher: &lt;/b&gt;&lt;/th&gt;
            &lt;td style=&quot;padding-left: 4px;&quot;&gt;WHO&lt;/td&gt;
        &lt;/tr&gt;
        

        
        &lt;tr&gt;
            &lt;th scope=&quot;row&quot;&gt;&lt;b&gt;Description: &lt;/b&gt;&lt;/th&gt;
            &lt;td style=&quot;padding-left: 4px;&quot;&gt;&lt;div&gt;&lt;p&gt;HIV.B9.DT Logic&lt;/p&gt;
&lt;/div&gt;&lt;/td&gt;
        &lt;/tr&gt;
        

        

        

        

        

        

        

        

        

        

        

        

        

        

        
        
        &lt;tr&gt;
          &lt;td colspan=&quot;2&quot;&gt;
            &lt;table&gt;
              &lt;tr&gt;&lt;th&gt;&lt;a id=&quot;cql-content&quot;&gt;&lt;b&gt;Content: &lt;/b&gt;&lt;/a&gt; text/cql&lt;/th&gt;&lt;/tr&gt;
              &lt;tr&gt;&lt;td&gt;&lt;pre&gt;&lt;code class=&quot;language-cql&quot;&gt;/*
Library: HIV.B9.DT Logic

@DecisionID: HIV.B9.DT.HIV Re-testing Recommendations
@BusinessRule: HIV restesting recommendations
@Trigger: HIV.B9 Determine recommended services
@HitPolicy: Rule order
@Description: Determine retest recommendation

Data Concepts:
 * HIV.B.DE115: HIV status | HIV status reported after applying the national HIV testing algorithm. No single HIV test can provide an HIV-positive diagnosis.
 * HIV.B.DE33: Partner HIV status (reported) | The HIV status of the client's partner.
 * HIV.C.DE55: Sex partner's HIV treatment status | Treatment adherence of client's sex partner for partners that are HIV-positive
 * HIV.Config.DE12: HIV burden of the setting | HIV burden of the setting (high or low) based on the national HIV prevalence or where the HIV prevalence and/or incidence in a geographical setting is higher than national prevalence and, therefore, needs priority in the HIV response
 * HIV.B.DE49: Key population member | Client is a member of a key population that has an increased risk of HIV
 * HIV.B.DE29: Currently pregnant | Client is currently pregnant
 * HIV.D.DE939: TB diagnosis result | Final result of the TB investigation (bacteriological and/or clinical)
 * HIV.D.DE282: Presumptive TB | Client's comorbidities or coinfections or symptoms of these include presumptive TB
 * HIV.C.DE10: Currently on PrEP | The client is currently taking PrEP. Oral pre-exposure prophylaxis (PrEP) of HIV is the use of ARV drugs by people who are not infected with HIV to block the acquisition of HIV.
 * HIV.B.DE225: At elevated risk for HIV acquisition | Client is at elevated risk for HIV acquisition
*/
library HIVB9DTLogic

// Included Libraries
using FHIR version '4.0.1'

include HIVCommon version '0.0.1' called Common
include HIVConcepts called Concepts
include HIVConfig called Config
include HIVEncounterElements called Elements
include FHIRHelpers version '4.0.1'

include WHOCommon called WCom
// Included for PlanDefinition
include WHOConcepts called WCx
include WHOEncounterElements called WElm

parameter Today Date default Today()

context Patient

 /*
  @input: &amp;quot;HIV status negative or unknown&amp;quot;
  @pseudocode: &amp;quot;HIV status&amp;quot; IN 'HIV-negative', 'Unknown'
  */
define &amp;quot;HIV status negative or unknown&amp;quot;:
  exists(Elements.&amp;quot;HIV Status Observation&amp;quot; S
    where S.value ~ Concepts.&amp;quot;HIV-negative&amp;quot;
       or S.value ~ Concepts.&amp;quot;Unknown&amp;quot;) 

 /*
  @input: &amp;quot;Partner HIV reported positive&amp;quot;
  @pseudocode: &amp;quot;Partner HIV status (reported)&amp;quot;='HIV-positive'
  */
define &amp;quot;Partner HIV positive&amp;quot;:
  exists(Elements.&amp;quot;Partner HIV status reported Observation&amp;quot; O
    where O.value ~ Concepts.&amp;quot;HIV-positive&amp;quot;)

 /*
  @input: &amp;quot;Sex partner's HIV treatment status is partner not virally suppressed&amp;quot;
  @pseudocode: &amp;quot;Sex partner's HIV treatment status&amp;quot;='Partner is not virally suppressed'
  */
define &amp;quot;Sex partner's HIV treatment status is partner not virally suppressed&amp;quot;:
  exists(Elements.&amp;quot;Sex partners HIV treatment status&amp;quot; O
    where O.value ~ Concepts.&amp;quot;Partner is not virally suppressed&amp;quot;)

 /*
  @input: &amp;quot;HIV burden of setting is high HIV burden setting&amp;quot;
  @pseudocode: &amp;quot;HIV burden of the setting&amp;quot;='High HIV burden setting'
  */
define &amp;quot;HIV burden of setting is high HIV burden setting&amp;quot;:
  Config.&amp;quot;HIV burden of setting&amp;quot; ~ Concepts.&amp;quot;High HIV burden setting&amp;quot;

 /*
  @input: &amp;quot;HIV burden of setting is low HIV burden setting&amp;quot;
  @pseudocode: &amp;quot;HIV burden of the setting&amp;quot;='Low HIV burden setting'
  */
define &amp;quot;HIV burden of setting is low HIV burden setting&amp;quot;:
  Config.&amp;quot;HIV burden of setting&amp;quot; ~ Concepts.&amp;quot;Low HIV burden setting&amp;quot;

 /*
  @input: &amp;quot;Key population member&amp;quot;
  @pseudocode: &amp;quot;Key population member&amp;quot; = TRUE
  */
define &amp;quot;Key population member&amp;quot;:
  Elements.&amp;quot;Is Key population member B.DE49&amp;quot;

 /*
  @input: &amp;quot;Currently pregnant&amp;quot;
  @pseudocode: &amp;quot;Currently pregnant&amp;quot;=True
  */
define &amp;quot;Currently pregnant&amp;quot;:
  exists(WElm.&amp;quot;Pregnant Observation&amp;quot;)

 /*
  @input: &amp;quot;TB diagnosis result is diagnosed TB&amp;quot;
  @pseudocode: &amp;quot;Currently pregnant&amp;quot;=True
  */
define &amp;quot;TB diagnosis result is diagnosed TB&amp;quot;:
  exists(Elements.&amp;quot;TB diagnosis result Observation&amp;quot; O
    where O.value ~ Concepts.&amp;quot;Diagnosed TB&amp;quot;)

 /*
  @input: &amp;quot;Presumptive TB&amp;quot;
  @pseudocode: &amp;quot;Presumptive TB&amp;quot;=True
  */
define &amp;quot;Presumptive TB&amp;quot;:
  exists(Elements.&amp;quot;Presumptive TB D.DE282 Observation&amp;quot; O
    where O.value is true)

/*
  @input: &amp;quot;Currently on PrEP&amp;quot;
  @pseudocode: &amp;quot;Currently on PrEP&amp;quot;=True
  */
define &amp;quot;Currently on PrEP&amp;quot;:
  exists(Elements.&amp;quot;Currently on PrEP Observation&amp;quot; O
    where O.value is true)

 /*
  @input: &amp;quot;At elevated risk for HIV acquisition&amp;quot;
  @pseudocode: &amp;quot;At elevated risk for HIV acquisition&amp;quot;=True
  */
define &amp;quot;At elevated risk for HIV acquisition&amp;quot;:
  exists(Elements.&amp;quot;At elevated risk for HIV acquisition PRV.DE1 Observation&amp;quot; O
    where O.value is true)

 /*
  @output: &amp;quot;Schedule an annual follow-up test&amp;quot;
  @pseudocode: &amp;quot;Follow-up test recommended date&amp;quot; = &amp;quot;Visit date&amp;quot; + 1 year
  */
define &amp;quot;Schedule an annual follow-up test&amp;quot;:
  &amp;quot;HIV status negative or unknown&amp;quot; and
    case
    when &amp;quot;Partner has HIV and is not virally suppressed&amp;quot;
      then true
    when &amp;quot;HIV burden of setting is high HIV burden setting&amp;quot;
      then true
    when &amp;quot;Key population member&amp;quot;
      then true
    when &amp;quot;At elevated risk for HIV acquisition&amp;quot;
      then true
    else false
    end

/*
 @output: &amp;quot;Follow-up test recommended&amp;quot;
 @pseudocode: N/A
 */
define &amp;quot;Follow-up test recommended&amp;quot;:
  &amp;quot;HIV status negative or unknown&amp;quot; and
  case
  when &amp;quot;TB diagnosis result is diagnosed TB&amp;quot;
    then true
  when &amp;quot;Presumptive TB&amp;quot;
    then true
  else false
  end

/*
 @output: &amp;quot;Schedule quarterly retesting for PrEP users&amp;quot;
 @pseudocode: N/A
 */
define &amp;quot;Schedule quarterly retesting for PrEP users&amp;quot;:
  &amp;quot;HIV status negative or unknown&amp;quot; and &amp;quot;Currently on PrEP&amp;quot;

/*
 @output: &amp;quot;Schedule an HIV test, syphilis test, hepatitis B test as early as possible during this pregnancy&amp;quot;
 @pseudocode: N/A
 */
define &amp;quot;Schedule an HIV test, syphilis test, hepatitis B test as early as possible during this pregnancy&amp;quot;:
  &amp;quot;Pregnant in high HIV burden setting&amp;quot;

/*
 @output: &amp;quot;Schedule a 'Follow-up test recommended date during a third trimester visit&amp;quot;
 @pseudocode: N/A
 */
define &amp;quot;Schedule a 'Follow-up test recommended date' during a third trimester visit&amp;quot;:
  &amp;quot;Pregnant in high HIV burden setting&amp;quot;

/*
 @output: &amp;quot;Schedule a 'Follow-up test recommended date during a third trimester visit&amp;quot;
 @pseudocode: N/A
 */
define &amp;quot;Schedule a 'Follow-up test recommended date' at first ANC contact date&amp;quot;:
  &amp;quot;Pregnant in low HIV burden setting&amp;quot; and 
  case
  when &amp;quot;Key population member&amp;quot;
    then true
  when &amp;quot;Partner has HIV and is not virally suppressed&amp;quot;
    then true
  when &amp;quot;At elevated risk for HIV acquisition&amp;quot;
    then true
  else false
  end

/*
 @dynamicValue: Guidance
 */
define &amp;quot;Guidance&amp;quot;:
  Combine({
    if &amp;quot;Schedule an annual follow-up test&amp;quot;
      then 'Schedule an annual follow-up test.  

  WHO guidance recommends annual retesting for people who have ongoing HIV-related risks in all settings. These include people with a known HIV-positive partner who is not virally suppressed on ART.'
      else '',
    if &amp;quot;Follow-up test recommended&amp;quot;
      then 'Recommend a follow-up test.  

  In certain conditions and situations, individuals who have been tested for HIV in the past can be advised to retest. These include: 
  * Individuals presenting with a diagnosis or receiving treatment for STIs or viral hepatitis, 
  * Individuals with a confirmed or presumptive TB diagnosis, 
  * Outpatients presenting with clinical conditions or symptoms indicative of HIV, individuals with recent HIV risk exposure.'
      else '',
    if &amp;quot;Schedule quarterly retesting for PrEP users&amp;quot;
      then 'Schedule quarterly retesting for PrEP users.'
      else '',
    if &amp;quot;Schedule an HIV test, syphilis test, hepatitis B test as early as possible during this pregnancy&amp;quot;
      then 'Schedule an HIV test, syphilis test, hepatitis B test as early as possible during this pregnancy

  All pregnant women should be tested for HIV as well as syphilis and hepatitis B virus at least once and as early as possible during pregnancy.'
      else '',
    if &amp;quot;Schedule a 'Follow-up test recommended date' at first ANC contact date&amp;quot;
      then 'In low HIV burden settings, retesting all pregnant women is not warranted unless focused among women from key populations or at high ongoing risk, such as those from key populations or with partners with HIV who are not virally suppressed. Countries could consider one additional retest in the post-partum period, such as at 14 weeks, six months or nine months for women in high HIV burden or incidence districts or provinces, key populations or women with partners with HIV who are not virally suppressed.'
      else ''
  })

/*
 @dynamicValue: &amp;quot;Date to schedule&amp;quot;
 */
define &amp;quot;Schedule Follow-up Date&amp;quot;:
  case
  when &amp;quot;Schedule an annual follow-up test&amp;quot;
    then Today + 1 years
  when &amp;quot;Schedule quarterly retesting for PrEP users&amp;quot;
    then Today + 3 months
  else null
  end

// Helper Logic
define &amp;quot;Pregnant in high HIV burden setting&amp;quot;:
  &amp;quot;HIV status negative or unknown&amp;quot; and
  &amp;quot;HIV burden of setting is high HIV burden setting&amp;quot; and
  &amp;quot;Currently pregnant&amp;quot;

define &amp;quot;Pregnant in low HIV burden setting&amp;quot;:
  &amp;quot;HIV status negative or unknown&amp;quot; and
  &amp;quot;HIV burden of setting is low HIV burden setting&amp;quot; and
  &amp;quot;Currently pregnant&amp;quot;

define &amp;quot;Partner has HIV and is not virally suppressed&amp;quot;:
  &amp;quot;Partner HIV positive&amp;quot; and &amp;quot;Sex partner's HIV treatment status is partner not virally suppressed&amp;quot;

&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;
            &lt;/table&gt;
          &lt;/td&gt;
        &lt;/tr&gt;
        
        
        
        
        
        &lt;tr&gt;
          &lt;td colspan=&quot;2&quot;&gt;
            &lt;table&gt;
              &lt;tr&gt;&lt;th&gt;&lt;b&gt;Content: &lt;/b&gt; application/elm+xml&lt;/th&gt;&lt;/tr&gt;
              &lt;tr&gt;&lt;td&gt;&lt;pre&gt;&lt;code/&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;
            &lt;/table&gt;
          &lt;/td&gt;
        &lt;/tr&gt;
        
        
    &lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;<a name="end-xhtml"></a>
  &lt;/text&gt;
  &lt;<a href="http://hl7.org/fhir/R4/library.html#Library.extension">extension</a>
             <a href="http://hl7.org/fhir/R4/datatypes.html#uri">url</a>=&quot;http://hl7.org/fhir/StructureDefinition/cqf-knowledgeCapability&quot;&gt;
    &lt;<a href="http://hl7.org/fhir/R4/extensibility.html#Extension#Extension.value[x]">valueCode</a> <a href="http://hl7.org/fhir/R4/datatypes.html#code">value</a>=&quot;computable&quot;/&gt;
  &lt;/extension&gt;
  &lt;<a href="http://hl7.org/fhir/R4/library.html#Library.url">url</a> <a href="http://hl7.org/fhir/R4/datatypes.html#uri">value</a>=&quot;http://smart.who.int/hiv/Library/HIVB9DTLogic&quot;/&gt;
  &lt;<a href="http://hl7.org/fhir/R4/library.html#Library.version">version</a> <a href="http://hl7.org/fhir/R4/datatypes.html#string">value</a>=&quot;1.0.0&quot;/&gt;
  &lt;<a href="http://hl7.org/fhir/R4/library.html#Library.name">name</a> <a href="http://hl7.org/fhir/R4/datatypes.html#string">value</a>=&quot;HIVB9DTLogic&quot;/&gt;
  &lt;<a href="http://hl7.org/fhir/R4/library.html#Library.title">title</a> <a href="http://hl7.org/fhir/R4/datatypes.html#string">value</a>=&quot;HIV.B9.DT Logic&quot;/&gt;
  &lt;<a href="http://hl7.org/fhir/R4/library.html#Library.status">status</a> <a href="http://hl7.org/fhir/R4/datatypes.html#code">value</a>=&quot;draft&quot;/&gt;
  &lt;<a href="http://hl7.org/fhir/R4/library.html#Library.experimental">experimental</a> <a href="http://hl7.org/fhir/R4/datatypes.html#boolean">value</a>=&quot;true&quot;/&gt;
  &lt;<a href="http://hl7.org/fhir/R4/library.html#Library.type">type</a>&gt;
    &lt;<a href="http://hl7.org/fhir/R4/datatypes.html#CodeableConcept#CodeableConcept.coding">coding</a>&gt;
      &lt;<a href="http://hl7.org/fhir/R4/datatypes.html#Coding#Coding.system">system</a> <a href="http://hl7.org/fhir/R4/datatypes.html#uri">value</a>=&quot;http://terminology.hl7.org/CodeSystem/library-type&quot;/&gt;
      &lt;<a href="http://hl7.org/fhir/R4/datatypes.html#Coding#Coding.code">code</a> <a href="http://hl7.org/fhir/R4/datatypes.html#code">value</a>=&quot;logic-library&quot;/&gt;
    &lt;/coding&gt;
  &lt;/type&gt;
  &lt;<a href="http://hl7.org/fhir/R4/library.html#Library.date">date</a> <a href="http://hl7.org/fhir/R4/datatypes.html#dateTime">value</a>=&quot;2025-07-08T23:21:58+02:00&quot;/&gt;
  &lt;<a href="http://hl7.org/fhir/R4/library.html#Library.publisher">publisher</a> <a href="http://hl7.org/fhir/R4/datatypes.html#string">value</a>=&quot;WHO&quot;/&gt;
  &lt;<a href="http://hl7.org/fhir/R4/library.html#Library.contact">contact</a>&gt;
    &lt;<a href="http://hl7.org/fhir/R4/metadatatypes.html#ContactDetail#ContactDetail.name">name</a> <a href="http://hl7.org/fhir/R4/datatypes.html#string">value</a>=&quot;WHO&quot;/&gt;
    &lt;<a href="http://hl7.org/fhir/R4/metadatatypes.html#ContactDetail#ContactDetail.telecom">telecom</a>&gt;
      &lt;<a href="http://hl7.org/fhir/R4/datatypes.html#ContactPoint#ContactPoint.system">system</a> <a href="http://hl7.org/fhir/R4/datatypes.html#code">value</a>=&quot;url&quot;/&gt;
      &lt;<a href="http://hl7.org/fhir/R4/datatypes.html#ContactPoint#ContactPoint.value">value</a> <a href="http://hl7.org/fhir/R4/datatypes.html#string">value</a>=&quot;http://who.int&quot;/&gt;
    &lt;/telecom&gt;
  &lt;/contact&gt;
  &lt;<a href="http://hl7.org/fhir/R4/library.html#Library.description">description</a> <a href="http://hl7.org/fhir/R4/datatypes.html#markdown">value</a>=&quot;HIV.B9.DT Logic&quot;/&gt;
  &lt;<a href="http://hl7.org/fhir/R4/library.html#Library.content">content</a>&gt;
    &lt;<a href="http://hl7.org/fhir/R4/datatypes.html#Attachment#Attachment.contentType">contentType</a> <a href="http://hl7.org/fhir/R4/datatypes.html#code">value</a>=&quot;text/cql&quot;/&gt;
    &lt;<a href="http://hl7.org/fhir/R4/datatypes.html#Attachment#Attachment.data">data</a>
          <a href="http://hl7.org/fhir/R4/datatypes.html#base64Binary">value</a>=&quot;LyoKTGlicmFyeTogSElWLkI5LkRUIExvZ2ljCgpARGVjaXNpb25JRDogSElWLkI5LkRULkhJViBSZS10ZXN0aW5nIFJlY29tbWVuZGF0aW9ucwpAQnVzaW5lc3NSdWxlOiBISVYgcmVzdGVzdGluZyByZWNvbW1lbmRhdGlvbnMKQFRyaWdnZXI6IEhJVi5COSBEZXRlcm1pbmUgcmVjb21tZW5kZWQgc2VydmljZXMKQEhpdFBvbGljeTogUnVsZSBvcmRlcgpARGVzY3JpcHRpb246IERldGVybWluZSByZXRlc3QgcmVjb21tZW5kYXRpb24KCkRhdGEgQ29uY2VwdHM6CiAqIEhJVi5CLkRFMTE1OiBISVYgc3RhdHVzIHwgSElWIHN0YXR1cyByZXBvcnRlZCBhZnRlciBhcHBseWluZyB0aGUgbmF0aW9uYWwgSElWIHRlc3RpbmcgYWxnb3JpdGhtLiBObyBzaW5nbGUgSElWIHRlc3QgY2FuIHByb3ZpZGUgYW4gSElWLXBvc2l0aXZlIGRpYWdub3Npcy4KICogSElWLkIuREUzMzogUGFydG5lciBISVYgc3RhdHVzIChyZXBvcnRlZCkgfCBUaGUgSElWIHN0YXR1cyBvZiB0aGUgY2xpZW50J3MgcGFydG5lci4KICogSElWLkMuREU1NTogU2V4IHBhcnRuZXIncyBISVYgdHJlYXRtZW50IHN0YXR1cyB8IFRyZWF0bWVudCBhZGhlcmVuY2Ugb2YgY2xpZW50J3Mgc2V4IHBhcnRuZXIgZm9yIHBhcnRuZXJzIHRoYXQgYXJlIEhJVi1wb3NpdGl2ZQogKiBISVYuQ29uZmlnLkRFMTI6IEhJViBidXJkZW4gb2YgdGhlIHNldHRpbmcgfCBISVYgYnVyZGVuIG9mIHRoZSBzZXR0aW5nIChoaWdoIG9yIGxvdykgYmFzZWQgb24gdGhlIG5hdGlvbmFsIEhJViBwcmV2YWxlbmNlIG9yIHdoZXJlIHRoZSBISVYgcHJldmFsZW5jZSBhbmQvb3IgaW5jaWRlbmNlIGluIGEgZ2VvZ3JhcGhpY2FsIHNldHRpbmcgaXMgaGlnaGVyIHRoYW4gbmF0aW9uYWwgcHJldmFsZW5jZSBhbmQsIHRoZXJlZm9yZSwgbmVlZHMgcHJpb3JpdHkgaW4gdGhlIEhJViByZXNwb25zZQogKiBISVYuQi5ERTQ5OiBLZXkgcG9wdWxhdGlvbiBtZW1iZXIgfCBDbGllbnQgaXMgYSBtZW1iZXIgb2YgYSBrZXkgcG9wdWxhdGlvbiB0aGF0IGhhcyBhbiBpbmNyZWFzZWQgcmlzayBvZiBISVYKICogSElWLkIuREUyOTogQ3VycmVudGx5IHByZWduYW50IHwgQ2xpZW50IGlzIGN1cnJlbnRseSBwcmVnbmFudAogKiBISVYuRC5ERTkzOTogVEIgZGlhZ25vc2lzIHJlc3VsdCB8IEZpbmFsIHJlc3VsdCBvZiB0aGUgVEIgaW52ZXN0aWdhdGlvbiAoYmFjdGVyaW9sb2dpY2FsIGFuZC9vciBjbGluaWNhbCkKICogSElWLkQuREUyODI6IFByZXN1bXB0aXZlIFRCIHwgQ2xpZW50J3MgY29tb3JiaWRpdGllcyBvciBjb2luZmVjdGlvbnMgb3Igc3ltcHRvbXMgb2YgdGhlc2UgaW5jbHVkZSBwcmVzdW1wdGl2ZSBUQgogKiBISVYuQy5ERTEwOiBDdXJyZW50bHkgb24gUHJFUCB8IFRoZSBjbGllbnQgaXMgY3VycmVudGx5IHRha2luZyBQckVQLiBPcmFsIHByZS1leHBvc3VyZSBwcm9waHlsYXhpcyAoUHJFUCkgb2YgSElWIGlzIHRoZSB1c2Ugb2YgQVJWIGRydWdzIGJ5IHBlb3BsZSB3aG8gYXJlIG5vdCBpbmZlY3RlZCB3aXRoIEhJViB0byBibG9jayB0aGUgYWNxdWlzaXRpb24gb2YgSElWLgogKiBISVYuQi5ERTIyNTogQXQgZWxldmF0ZWQgcmlzayBmb3IgSElWIGFjcXVpc2l0aW9uIHwgQ2xpZW50IGlzIGF0IGVsZXZhdGVkIHJpc2sgZm9yIEhJViBhY3F1aXNpdGlvbgoqLwpsaWJyYXJ5IEhJVkI5RFRMb2dpYwoKLy8gSW5jbHVkZWQgTGlicmFyaWVzCnVzaW5nIEZISVIgdmVyc2lvbiAnNC4wLjEnCgppbmNsdWRlIEhJVkNvbW1vbiB2ZXJzaW9uICcwLjAuMScgY2FsbGVkIENvbW1vbgppbmNsdWRlIEhJVkNvbmNlcHRzIGNhbGxlZCBDb25jZXB0cwppbmNsdWRlIEhJVkNvbmZpZyBjYWxsZWQgQ29uZmlnCmluY2x1ZGUgSElWRW5jb3VudGVyRWxlbWVudHMgY2FsbGVkIEVsZW1lbnRzCmluY2x1ZGUgRkhJUkhlbHBlcnMgdmVyc2lvbiAnNC4wLjEnCgppbmNsdWRlIFdIT0NvbW1vbiBjYWxsZWQgV0NvbQovLyBJbmNsdWRlZCBmb3IgUGxhbkRlZmluaXRpb24KaW5jbHVkZSBXSE9Db25jZXB0cyBjYWxsZWQgV0N4CmluY2x1ZGUgV0hPRW5jb3VudGVyRWxlbWVudHMgY2FsbGVkIFdFbG0KCnBhcmFtZXRlciBUb2RheSBEYXRlIGRlZmF1bHQgVG9kYXkoKQoKY29udGV4dCBQYXRpZW50CgogLyoKICBAaW5wdXQ6ICJISVYgc3RhdHVzIG5lZ2F0aXZlIG9yIHVua25vd24iCiAgQHBzZXVkb2NvZGU6ICJISVYgc3RhdHVzIiBJTiAnSElWLW5lZ2F0aXZlJywgJ1Vua25vd24nCiAgKi8KZGVmaW5lICJISVYgc3RhdHVzIG5lZ2F0aXZlIG9yIHVua25vd24iOgogIGV4aXN0cyhFbGVtZW50cy4iSElWIFN0YXR1cyBPYnNlcnZhdGlvbiIgUwogICAgd2hlcmUgUy52YWx1ZSB+IENvbmNlcHRzLiJISVYtbmVnYXRpdmUiCiAgICAgICBvciBTLnZhbHVlIH4gQ29uY2VwdHMuIlVua25vd24iKSAKCiAvKgogIEBpbnB1dDogIlBhcnRuZXIgSElWIHJlcG9ydGVkIHBvc2l0aXZlIgogIEBwc2V1ZG9jb2RlOiAiUGFydG5lciBISVYgc3RhdHVzIChyZXBvcnRlZCkiPSdISVYtcG9zaXRpdmUnCiAgKi8KZGVmaW5lICJQYXJ0bmVyIEhJViBwb3NpdGl2ZSI6CiAgZXhpc3RzKEVsZW1lbnRzLiJQYXJ0bmVyIEhJViBzdGF0dXMgcmVwb3J0ZWQgT2JzZXJ2YXRpb24iIE8KICAgIHdoZXJlIE8udmFsdWUgfiBDb25jZXB0cy4iSElWLXBvc2l0aXZlIikKCiAvKgogIEBpbnB1dDogIlNleCBwYXJ0bmVyJ3MgSElWIHRyZWF0bWVudCBzdGF0dXMgaXMgcGFydG5lciBub3QgdmlyYWxseSBzdXBwcmVzc2VkIgogIEBwc2V1ZG9jb2RlOiAiU2V4IHBhcnRuZXIncyBISVYgdHJlYXRtZW50IHN0YXR1cyI9J1BhcnRuZXIgaXMgbm90IHZpcmFsbHkgc3VwcHJlc3NlZCcKICAqLwpkZWZpbmUgIlNleCBwYXJ0bmVyJ3MgSElWIHRyZWF0bWVudCBzdGF0dXMgaXMgcGFydG5lciBub3QgdmlyYWxseSBzdXBwcmVzc2VkIjoKICBleGlzdHMoRWxlbWVudHMuIlNleCBwYXJ0bmVycyBISVYgdHJlYXRtZW50IHN0YXR1cyIgTwogICAgd2hlcmUgTy52YWx1ZSB+IENvbmNlcHRzLiJQYXJ0bmVyIGlzIG5vdCB2aXJhbGx5IHN1cHByZXNzZWQiKQoKIC8qCiAgQGlucHV0OiAiSElWIGJ1cmRlbiBvZiBzZXR0aW5nIGlzIGhpZ2ggSElWIGJ1cmRlbiBzZXR0aW5nIgogIEBwc2V1ZG9jb2RlOiAiSElWIGJ1cmRlbiBvZiB0aGUgc2V0dGluZyI9J0hpZ2ggSElWIGJ1cmRlbiBzZXR0aW5nJwogICovCmRlZmluZSAiSElWIGJ1cmRlbiBvZiBzZXR0aW5nIGlzIGhpZ2ggSElWIGJ1cmRlbiBzZXR0aW5nIjoKICBDb25maWcuIkhJViBidXJkZW4gb2Ygc2V0dGluZyIgfiBDb25jZXB0cy4iSGlnaCBISVYgYnVyZGVuIHNldHRpbmciCgogLyoKICBAaW5wdXQ6ICJISVYgYnVyZGVuIG9mIHNldHRpbmcgaXMgbG93IEhJViBidXJkZW4gc2V0dGluZyIKICBAcHNldWRvY29kZTogIkhJViBidXJkZW4gb2YgdGhlIHNldHRpbmciPSdMb3cgSElWIGJ1cmRlbiBzZXR0aW5nJwogICovCmRlZmluZSAiSElWIGJ1cmRlbiBvZiBzZXR0aW5nIGlzIGxvdyBISVYgYnVyZGVuIHNldHRpbmciOgogIENvbmZpZy4iSElWIGJ1cmRlbiBvZiBzZXR0aW5nIiB+IENvbmNlcHRzLiJMb3cgSElWIGJ1cmRlbiBzZXR0aW5nIgoKIC8qCiAgQGlucHV0OiAiS2V5IHBvcHVsYXRpb24gbWVtYmVyIgogIEBwc2V1ZG9jb2RlOiAiS2V5IHBvcHVsYXRpb24gbWVtYmVyIiA9IFRSVUUKICAqLwpkZWZpbmUgIktleSBwb3B1bGF0aW9uIG1lbWJlciI6CiAgRWxlbWVudHMuIklzIEtleSBwb3B1bGF0aW9uIG1lbWJlciBCLkRFNDkiCgogLyoKICBAaW5wdXQ6ICJDdXJyZW50bHkgcHJlZ25hbnQiCiAgQHBzZXVkb2NvZGU6ICJDdXJyZW50bHkgcHJlZ25hbnQiPVRydWUKICAqLwpkZWZpbmUgIkN1cnJlbnRseSBwcmVnbmFudCI6CiAgZXhpc3RzKFdFbG0uIlByZWduYW50IE9ic2VydmF0aW9uIikKCiAvKgogIEBpbnB1dDogIlRCIGRpYWdub3NpcyByZXN1bHQgaXMgZGlhZ25vc2VkIFRCIgogIEBwc2V1ZG9jb2RlOiAiQ3VycmVudGx5IHByZWduYW50Ij1UcnVlCiAgKi8KZGVmaW5lICJUQiBkaWFnbm9zaXMgcmVzdWx0IGlzIGRpYWdub3NlZCBUQiI6CiAgZXhpc3RzKEVsZW1lbnRzLiJUQiBkaWFnbm9zaXMgcmVzdWx0IE9ic2VydmF0aW9uIiBPCiAgICB3aGVyZSBPLnZhbHVlIH4gQ29uY2VwdHMuIkRpYWdub3NlZCBUQiIpCgogLyoKICBAaW5wdXQ6ICJQcmVzdW1wdGl2ZSBUQiIKICBAcHNldWRvY29kZTogIlByZXN1bXB0aXZlIFRCIj1UcnVlCiAgKi8KZGVmaW5lICJQcmVzdW1wdGl2ZSBUQiI6CiAgZXhpc3RzKEVsZW1lbnRzLiJQcmVzdW1wdGl2ZSBUQiBELkRFMjgyIE9ic2VydmF0aW9uIiBPCiAgICB3aGVyZSBPLnZhbHVlIGlzIHRydWUpCgovKgogIEBpbnB1dDogIkN1cnJlbnRseSBvbiBQckVQIgogIEBwc2V1ZG9jb2RlOiAiQ3VycmVudGx5IG9uIFByRVAiPVRydWUKICAqLwpkZWZpbmUgIkN1cnJlbnRseSBvbiBQckVQIjoKICBleGlzdHMoRWxlbWVudHMuIkN1cnJlbnRseSBvbiBQckVQIE9ic2VydmF0aW9uIiBPCiAgICB3aGVyZSBPLnZhbHVlIGlzIHRydWUpCgogLyoKICBAaW5wdXQ6ICJBdCBlbGV2YXRlZCByaXNrIGZvciBISVYgYWNxdWlzaXRpb24iCiAgQHBzZXVkb2NvZGU6ICJBdCBlbGV2YXRlZCByaXNrIGZvciBISVYgYWNxdWlzaXRpb24iPVRydWUKICAqLwpkZWZpbmUgIkF0IGVsZXZhdGVkIHJpc2sgZm9yIEhJViBhY3F1aXNpdGlvbiI6CiAgZXhpc3RzKEVsZW1lbnRzLiJBdCBlbGV2YXRlZCByaXNrIGZvciBISVYgYWNxdWlzaXRpb24gUFJWLkRFMSBPYnNlcnZhdGlvbiIgTwogICAgd2hlcmUgTy52YWx1ZSBpcyB0cnVlKQoKIC8qCiAgQG91dHB1dDogIlNjaGVkdWxlIGFuIGFubnVhbCBmb2xsb3ctdXAgdGVzdCIKICBAcHNldWRvY29kZTogIkZvbGxvdy11cCB0ZXN0IHJlY29tbWVuZGVkIGRhdGUiID0gIlZpc2l0IGRhdGUiICsgMSB5ZWFyCiAgKi8KZGVmaW5lICJTY2hlZHVsZSBhbiBhbm51YWwgZm9sbG93LXVwIHRlc3QiOgogICJISVYgc3RhdHVzIG5lZ2F0aXZlIG9yIHVua25vd24iIGFuZAogICAgY2FzZQogICAgd2hlbiAiUGFydG5lciBoYXMgSElWIGFuZCBpcyBub3QgdmlyYWxseSBzdXBwcmVzc2VkIgogICAgICB0aGVuIHRydWUKICAgIHdoZW4gIkhJViBidXJkZW4gb2Ygc2V0dGluZyBpcyBoaWdoIEhJViBidXJkZW4gc2V0dGluZyIKICAgICAgdGhlbiB0cnVlCiAgICB3aGVuICJLZXkgcG9wdWxhdGlvbiBtZW1iZXIiCiAgICAgIHRoZW4gdHJ1ZQogICAgd2hlbiAiQXQgZWxldmF0ZWQgcmlzayBmb3IgSElWIGFjcXVpc2l0aW9uIgogICAgICB0aGVuIHRydWUKICAgIGVsc2UgZmFsc2UKICAgIGVuZAoKLyoKIEBvdXRwdXQ6ICJGb2xsb3ctdXAgdGVzdCByZWNvbW1lbmRlZCIKIEBwc2V1ZG9jb2RlOiBOL0EKICovCmRlZmluZSAiRm9sbG93LXVwIHRlc3QgcmVjb21tZW5kZWQiOgogICJISVYgc3RhdHVzIG5lZ2F0aXZlIG9yIHVua25vd24iIGFuZAogIGNhc2UKICB3aGVuICJUQiBkaWFnbm9zaXMgcmVzdWx0IGlzIGRpYWdub3NlZCBUQiIKICAgIHRoZW4gdHJ1ZQogIHdoZW4gIlByZXN1bXB0aXZlIFRCIgogICAgdGhlbiB0cnVlCiAgZWxzZSBmYWxzZQogIGVuZAoKLyoKIEBvdXRwdXQ6ICJTY2hlZHVsZSBxdWFydGVybHkgcmV0ZXN0aW5nIGZvciBQckVQIHVzZXJzIgogQHBzZXVkb2NvZGU6IE4vQQogKi8KZGVmaW5lICJTY2hlZHVsZSBxdWFydGVybHkgcmV0ZXN0aW5nIGZvciBQckVQIHVzZXJzIjoKICAiSElWIHN0YXR1cyBuZWdhdGl2ZSBvciB1bmtub3duIiBhbmQgIkN1cnJlbnRseSBvbiBQckVQIgoKLyoKIEBvdXRwdXQ6ICJTY2hlZHVsZSBhbiBISVYgdGVzdCwgc3lwaGlsaXMgdGVzdCwgaGVwYXRpdGlzIEIgdGVzdCBhcyBlYXJseSBhcyBwb3NzaWJsZSBkdXJpbmcgdGhpcyBwcmVnbmFuY3kiCiBAcHNldWRvY29kZTogTi9BCiAqLwpkZWZpbmUgIlNjaGVkdWxlIGFuIEhJViB0ZXN0LCBzeXBoaWxpcyB0ZXN0LCBoZXBhdGl0aXMgQiB0ZXN0IGFzIGVhcmx5IGFzIHBvc3NpYmxlIGR1cmluZyB0aGlzIHByZWduYW5jeSI6CiAgIlByZWduYW50IGluIGhpZ2ggSElWIGJ1cmRlbiBzZXR0aW5nIgoKLyoKIEBvdXRwdXQ6ICJTY2hlZHVsZSBhICdGb2xsb3ctdXAgdGVzdCByZWNvbW1lbmRlZCBkYXRlIGR1cmluZyBhIHRoaXJkIHRyaW1lc3RlciB2aXNpdCIKIEBwc2V1ZG9jb2RlOiBOL0EKICovCmRlZmluZSAiU2NoZWR1bGUgYSAnRm9sbG93LXVwIHRlc3QgcmVjb21tZW5kZWQgZGF0ZScgZHVyaW5nIGEgdGhpcmQgdHJpbWVzdGVyIHZpc2l0IjoKICAiUHJlZ25hbnQgaW4gaGlnaCBISVYgYnVyZGVuIHNldHRpbmciCgovKgogQG91dHB1dDogIlNjaGVkdWxlIGEgJ0ZvbGxvdy11cCB0ZXN0IHJlY29tbWVuZGVkIGRhdGUgZHVyaW5nIGEgdGhpcmQgdHJpbWVzdGVyIHZpc2l0IgogQHBzZXVkb2NvZGU6IE4vQQogKi8KZGVmaW5lICJTY2hlZHVsZSBhICdGb2xsb3ctdXAgdGVzdCByZWNvbW1lbmRlZCBkYXRlJyBhdCBmaXJzdCBBTkMgY29udGFjdCBkYXRlIjoKICAiUHJlZ25hbnQgaW4gbG93IEhJViBidXJkZW4gc2V0dGluZyIgYW5kIAogIGNhc2UKICB3aGVuICJLZXkgcG9wdWxhdGlvbiBtZW1iZXIiCiAgICB0aGVuIHRydWUKICB3aGVuICJQYXJ0bmVyIGhhcyBISVYgYW5kIGlzIG5vdCB2aXJhbGx5IHN1cHByZXNzZWQiCiAgICB0aGVuIHRydWUKICB3aGVuICJBdCBlbGV2YXRlZCByaXNrIGZvciBISVYgYWNxdWlzaXRpb24iCiAgICB0aGVuIHRydWUKICBlbHNlIGZhbHNlCiAgZW5kCgovKgogQGR5bmFtaWNWYWx1ZTogR3VpZGFuY2UKICovCmRlZmluZSAiR3VpZGFuY2UiOgogIENvbWJpbmUoewogICAgaWYgIlNjaGVkdWxlIGFuIGFubnVhbCBmb2xsb3ctdXAgdGVzdCIKICAgICAgdGhlbiAnU2NoZWR1bGUgYW4gYW5udWFsIGZvbGxvdy11cCB0ZXN0LiAgCgogIFdITyBndWlkYW5jZSByZWNvbW1lbmRzIGFubnVhbCByZXRlc3RpbmcgZm9yIHBlb3BsZSB3aG8gaGF2ZSBvbmdvaW5nIEhJVi1yZWxhdGVkIHJpc2tzIGluIGFsbCBzZXR0aW5ncy4gVGhlc2UgaW5jbHVkZSBwZW9wbGUgd2l0aCBhIGtub3duIEhJVi1wb3NpdGl2ZSBwYXJ0bmVyIHdobyBpcyBub3QgdmlyYWxseSBzdXBwcmVzc2VkIG9uIEFSVC4nCiAgICAgIGVsc2UgJycsCiAgICBpZiAiRm9sbG93LXVwIHRlc3QgcmVjb21tZW5kZWQiCiAgICAgIHRoZW4gJ1JlY29tbWVuZCBhIGZvbGxvdy11cCB0ZXN0LiAgCgogIEluIGNlcnRhaW4gY29uZGl0aW9ucyBhbmQgc2l0dWF0aW9ucywgaW5kaXZpZHVhbHMgd2hvIGhhdmUgYmVlbiB0ZXN0ZWQgZm9yIEhJViBpbiB0aGUgcGFzdCBjYW4gYmUgYWR2aXNlZCB0byByZXRlc3QuIFRoZXNlIGluY2x1ZGU6IAogICogSW5kaXZpZHVhbHMgcHJlc2VudGluZyB3aXRoIGEgZGlhZ25vc2lzIG9yIHJlY2VpdmluZyB0cmVhdG1lbnQgZm9yIFNUSXMgb3IgdmlyYWwgaGVwYXRpdGlzLCAKICAqIEluZGl2aWR1YWxzIHdpdGggYSBjb25maXJtZWQgb3IgcHJlc3VtcHRpdmUgVEIgZGlhZ25vc2lzLCAKICAqIE91dHBhdGllbnRzIHByZXNlbnRpbmcgd2l0aCBjbGluaWNhbCBjb25kaXRpb25zIG9yIHN5bXB0b21zIGluZGljYXRpdmUgb2YgSElWLCBpbmRpdmlkdWFscyB3aXRoIHJlY2VudCBISVYgcmlzayBleHBvc3VyZS4nCiAgICAgIGVsc2UgJycsCiAgICBpZiAiU2NoZWR1bGUgcXVhcnRlcmx5IHJldGVzdGluZyBmb3IgUHJFUCB1c2VycyIKICAgICAgdGhlbiAnU2NoZWR1bGUgcXVhcnRlcmx5IHJldGVzdGluZyBmb3IgUHJFUCB1c2Vycy4nCiAgICAgIGVsc2UgJycsCiAgICBpZiAiU2NoZWR1bGUgYW4gSElWIHRlc3QsIHN5cGhpbGlzIHRlc3QsIGhlcGF0aXRpcyBCIHRlc3QgYXMgZWFybHkgYXMgcG9zc2libGUgZHVyaW5nIHRoaXMgcHJlZ25hbmN5IgogICAgICB0aGVuICdTY2hlZHVsZSBhbiBISVYgdGVzdCwgc3lwaGlsaXMgdGVzdCwgaGVwYXRpdGlzIEIgdGVzdCBhcyBlYXJseSBhcyBwb3NzaWJsZSBkdXJpbmcgdGhpcyBwcmVnbmFuY3kKCiAgQWxsIHByZWduYW50IHdvbWVuIHNob3VsZCBiZSB0ZXN0ZWQgZm9yIEhJViBhcyB3ZWxsIGFzIHN5cGhpbGlzIGFuZCBoZXBhdGl0aXMgQiB2aXJ1cyBhdCBsZWFzdCBvbmNlIGFuZCBhcyBlYXJseSBhcyBwb3NzaWJsZSBkdXJpbmcgcHJlZ25hbmN5LicKICAgICAgZWxzZSAnJywKICAgIGlmICJTY2hlZHVsZSBhICdGb2xsb3ctdXAgdGVzdCByZWNvbW1lbmRlZCBkYXRlJyBhdCBmaXJzdCBBTkMgY29udGFjdCBkYXRlIgogICAgICB0aGVuICdJbiBsb3cgSElWIGJ1cmRlbiBzZXR0aW5ncywgcmV0ZXN0aW5nIGFsbCBwcmVnbmFudCB3b21lbiBpcyBub3Qgd2FycmFudGVkIHVubGVzcyBmb2N1c2VkIGFtb25nIHdvbWVuIGZyb20ga2V5IHBvcHVsYXRpb25zIG9yIGF0IGhpZ2ggb25nb2luZyByaXNrLCBzdWNoIGFzIHRob3NlIGZyb20ga2V5IHBvcHVsYXRpb25zIG9yIHdpdGggcGFydG5lcnMgd2l0aCBISVYgd2hvIGFyZSBub3QgdmlyYWxseSBzdXBwcmVzc2VkLiBDb3VudHJpZXMgY291bGQgY29uc2lkZXIgb25lIGFkZGl0aW9uYWwgcmV0ZXN0IGluIHRoZSBwb3N0LXBhcnR1bSBwZXJpb2QsIHN1Y2ggYXMgYXQgMTQgd2Vla3MsIHNpeCBtb250aHMgb3IgbmluZSBtb250aHMgZm9yIHdvbWVuIGluIGhpZ2ggSElWIGJ1cmRlbiBvciBpbmNpZGVuY2UgZGlzdHJpY3RzIG9yIHByb3ZpbmNlcywga2V5IHBvcHVsYXRpb25zIG9yIHdvbWVuIHdpdGggcGFydG5lcnMgd2l0aCBISVYgd2hvIGFyZSBub3QgdmlyYWxseSBzdXBwcmVzc2VkLicKICAgICAgZWxzZSAnJwogIH0pCgovKgogQGR5bmFtaWNWYWx1ZTogIkRhdGUgdG8gc2NoZWR1bGUiCiAqLwpkZWZpbmUgIlNjaGVkdWxlIEZvbGxvdy11cCBEYXRlIjoKICBjYXNlCiAgd2hlbiAiU2NoZWR1bGUgYW4gYW5udWFsIGZvbGxvdy11cCB0ZXN0IgogICAgdGhlbiBUb2RheSArIDEgeWVhcnMKICB3aGVuICJTY2hlZHVsZSBxdWFydGVybHkgcmV0ZXN0aW5nIGZvciBQckVQIHVzZXJzIgogICAgdGhlbiBUb2RheSArIDMgbW9udGhzCiAgZWxzZSBudWxsCiAgZW5kCgovLyBIZWxwZXIgTG9naWMKZGVmaW5lICJQcmVnbmFudCBpbiBoaWdoIEhJViBidXJkZW4gc2V0dGluZyI6CiAgIkhJViBzdGF0dXMgbmVnYXRpdmUgb3IgdW5rbm93biIgYW5kCiAgIkhJViBidXJkZW4gb2Ygc2V0dGluZyBpcyBoaWdoIEhJViBidXJkZW4gc2V0dGluZyIgYW5kCiAgIkN1cnJlbnRseSBwcmVnbmFudCIKCmRlZmluZSAiUHJlZ25hbnQgaW4gbG93IEhJViBidXJkZW4gc2V0dGluZyI6CiAgIkhJViBzdGF0dXMgbmVnYXRpdmUgb3IgdW5rbm93biIgYW5kCiAgIkhJViBidXJkZW4gb2Ygc2V0dGluZyBpcyBsb3cgSElWIGJ1cmRlbiBzZXR0aW5nIiBhbmQKICAiQ3VycmVudGx5IHByZWduYW50IgoKZGVmaW5lICJQYXJ0bmVyIGhhcyBISVYgYW5kIGlzIG5vdCB2aXJhbGx5IHN1cHByZXNzZWQiOgogICJQYXJ0bmVyIEhJViBwb3NpdGl2ZSIgYW5kICJTZXggcGFydG5lcidzIEhJViB0cmVhdG1lbnQgc3RhdHVzIGlzIHBhcnRuZXIgbm90IHZpcmFsbHkgc3VwcHJlc3NlZCIKCg==&quot;/&gt;
  &lt;/content&gt;
  &lt;<a href="http://hl7.org/fhir/R4/library.html#Library.content">content</a>&gt;
    &lt;<a href="http://hl7.org/fhir/R4/datatypes.html#Attachment#Attachment.contentType">contentType</a> <a href="http://hl7.org/fhir/R4/datatypes.html#code">value</a>=&quot;application/elm+xml&quot;/&gt;
  &lt;/content&gt;
&lt;/Library&gt;</code></pre>


  <!-- insert notes if present -->
  



</div>
</div>  <!-- /inner-wrapper -->
</div>  <!-- /row -->
</div>  <!-- /container -->
</div>  <!-- /segment-content -->

<script type="text/javascript" src="assets/js/jquery.js"> </script>     <!-- note keep space here, otherwise it will be transformed to empty tag -> fails -->
<script type="text/javascript" src="assets/js/jquery-ui.min.js"> </script>

<script type="text/javascript" src="assets/js/window-hash.js"> </script>
<a name="bottom"> </a>
<div id="segment-footer" igtool="footer" class="segment">  <!-- segment-footer -->
<div class="container">  <!-- container -->

<div class="inner-wrapper">
  <p>
    IG &#169; 2025+ <a style="color:var(--footer-hyperlink-text-color)" href="http://who.int">WHO</a>.  Package smart.who.int.hiv#1.0.0 based on <a style="color: var(--footer-hyperlink-text-color)" href="http://hl7.org/fhir/R4/">FHIR 4.0.1</a>. Generated <span title="Tue, Jul 8, 2025 23:24+0200">2025-07-08</span>
    <br/>
    <span style="color: var(--footer-highlight-text-color)">
                Links: <a style="color: var(--footer-hyperlink-text-color)" href="toc.html">Table of Contents</a> |
                 <a style="color: var(--footer-hyperlink-text-color)" href="qa.html">QA Report</a>
                 
                
| <a style="color: #81BEF7" target="_blank" href="http://smart.who.int/hiv/history.html">Version History</a> | <a style="color: #81BEF7" rel="license" href="license.html">License</a>
    </span>
  </p>
</div>  <!-- /inner-wrapper -->
</div>  <!-- /container -->
</div>  <!-- /segment-footer -->

<div id="segment-post-footer" class="segment hidden">  <!-- segment-post-footer -->
<div class="container">  <!-- container -->
</div>  <!-- /container -->
</div>  <!-- /segment-post-footer -->

<!-- JS and analytics only. -->
<!-- Bootstrap core JavaScript
================================================== -->
<!-- Placed at the end of the document so the pages load faster -->
<script type="text/javascript" src="assets/js/bootstrap.min.js"> </script>
<script type="text/javascript" src="assets/js/respond.min.js"> </script>
<script type="text/javascript" src="assets/js/anchor.min.js"> </script>
<script type="text/javascript" src="assets/js/clipboard.min.js"> </script>
<script type="text/javascript" src="assets/js/clipboard-btn.js"> </script>
<script type="text/javascript" src="assets/js/anchor-hover.js"> </script>
<!-- Analytics Below
================================================== -->


<div id="feedback-config"
 data-repo-owner=""
 data-repo-name=""
 data-repo-source="https://github.com/WorldHealthOrganization/smart-hiv/issues/new?template=feedback.yml"
 data-issue-label="feedback"
 data-feedback-options="[{&quot;form&quot;:&quot;https://github.com/WorldHealthOrganization/smart-hiv/issues/new?template=feedback.yml&quot;,&quot;type&quot;:&quot;GitHub&quot;,&quot;sectionid&quot;:&quot;section&quot;,&quot;pageid&quot;:&quot;page&quot;},{&quot;form&quot;:&quot;https://forms.office.com/e/WKxJWQMEcx&quot;,&quot;type&quot;:&quot;Form&quot;,&quot;sectionid&quot;:&quot;r275a700d161d41d182d84c2e58947298&quot;}]"
 style="display:none;"></div>

<script src="assets/js/feedback.js"></script>



